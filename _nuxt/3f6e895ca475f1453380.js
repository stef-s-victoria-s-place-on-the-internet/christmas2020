/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{184:function(t,e,n){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var i=0,r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,e);return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},185:function(t,e,n){var r,o=n(246),c=n(212),f=n(248),h=n(249),l=n(250);"undefined"!=typeof ArrayBuffer&&(r=n(251));var d="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),m="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),v=d||m;e.protocol=3;var y=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},w=o(y),C={type:"error",data:"parser error"},S=n(252);function map(t,e,n){for(var r=new Array(t.length),o=h(t.length,n),c=function(i,t,n){e(t,(function(t,e){r[i]=e,n(t,r)}))},i=0;i<t.length;i++)c(i,t[i],o)}e.encodePacket=function(t,n,r,o){"function"==typeof n&&(o=n,n=!1),"function"==typeof r&&(o=r,r=null);var data=void 0===t.data?void 0:t.data.buffer||t.data;if("undefined"!=typeof ArrayBuffer&&data instanceof ArrayBuffer)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var data=t.data,o=new Uint8Array(data),c=new Uint8Array(1+data.byteLength);c[0]=y[t.type];for(var i=0;i<o.length;i++)c[i+1]=o[i];return r(c.buffer)}(t,n,o);if(void 0!==S&&data instanceof S)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);if(v)return function(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var o=new FileReader;return o.onload=function(){e.encodePacket({type:t.type,data:o.result},n,!0,r)},o.readAsArrayBuffer(t.data)}(t,n,r);var o=new Uint8Array(1);o[0]=y[t.type];var c=new S([o.buffer,t.data]);return r(c)}(t,n,o);if(data&&data.base64)return function(t,n){var r="b"+e.packets[t.type]+t.data.data;return n(r)}(t,o);var c=y[t.type];return void 0!==t.data&&(c+=r?l.encode(String(t.data),{strict:!1}):String(t.data)),o(""+c)},e.encodeBase64Packet=function(t,n){var r,o="b"+e.packets[t.type];if(void 0!==S&&t.data instanceof S){var c=new FileReader;return c.onload=function(){var t=c.result.split(",")[1];n(o+t)},c.readAsDataURL(t.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var f=new Uint8Array(t.data),h=new Array(f.length),i=0;i<f.length;i++)h[i]=f[i];r=String.fromCharCode.apply(null,h)}return o+=btoa(r),n(o)},e.decodePacket=function(data,t,n){if(void 0===data)return C;if("string"==typeof data){if("b"===data.charAt(0))return e.decodeBase64Packet(data.substr(1),t);if(n&&!1===(data=function(data){try{data=l.decode(data,{strict:!1})}catch(t){return!1}return data}(data)))return C;var r=data.charAt(0);return Number(r)==r&&w[r]?data.length>1?{type:w[r],data:data.substring(1)}:{type:w[r]}:C}r=new Uint8Array(data)[0];var o=f(data,1);return S&&"blob"===t&&(o=new S([o])),{type:w[r],data:o}},e.decodeBase64Packet=function(t,e){var n=w[t.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:t.substr(1)}};var data=r.decode(t.substr(1));return"blob"===e&&S&&(data=new S([data])),{type:n,data:data}},e.encodePayload=function(t,n,r){"function"==typeof n&&(r=n,n=null);var o=c(t);if(n&&o)return S&&!v?e.encodePayloadAsBlob(t,r):e.encodePayloadAsArrayBuffer(t,r);if(!t.length)return r("0:");map(t,(function(t,r){e.encodePacket(t,!!o&&n,!1,(function(t){r(null,function(t){return t.length+":"+t}(t))}))}),(function(t,e){return r(e.join(""))}))},e.decodePayload=function(data,t,n){if("string"!=typeof data)return e.decodePayloadAsBinary(data,t,n);var r;if("function"==typeof t&&(n=t,t=null),""===data)return n(C,0,1);for(var o,c,f="",i=0,h=data.length;i<h;i++){var l=data.charAt(i);if(":"===l){if(""===f||f!=(o=Number(f)))return n(C,0,1);if(f!=(c=data.substr(i+1,o)).length)return n(C,0,1);if(c.length){if(r=e.decodePacket(c,t,!1),C.type===r.type&&C.data===r.data)return n(C,0,1);if(!1===n(r,i+o,h))return}i+=o,f=""}else f+=l}return""!==f?n(C,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){if(!t.length)return n(new ArrayBuffer(0));map(t,(function(t,n){e.encodePacket(t,!0,!0,(function(data){return n(null,data)}))}),(function(t,e){var r=e.reduce((function(t,p){var e;return t+(e="string"==typeof p?p.length:p.byteLength).toString().length+e+2}),0),o=new Uint8Array(r),c=0;return e.forEach((function(p){var t="string"==typeof p,e=p;if(t){for(var view=new Uint8Array(p.length),i=0;i<p.length;i++)view[i]=p.charCodeAt(i);e=view.buffer}o[c++]=t?0:1;var n=e.byteLength.toString();for(i=0;i<n.length;i++)o[c++]=parseInt(n[i]);o[c++]=255;for(view=new Uint8Array(e),i=0;i<view.length;i++)o[c++]=view[i]})),n(o.buffer)}))},e.encodePayloadAsBlob=function(t,n){map(t,(function(t,n){e.encodePacket(t,!0,!0,(function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var view=new Uint8Array(t.length),i=0;i<t.length;i++)view[i]=t.charCodeAt(i);t=view.buffer,e[0]=0}var r=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),o=new Uint8Array(r.length+1);for(i=0;i<r.length;i++)o[i]=parseInt(r[i]);if(o[r.length]=255,S){var c=new S([e.buffer,o.buffer,t]);n(null,c)}}))}),(function(t,e){return n(new S(e))}))},e.decodePayloadAsBinary=function(data,t,n){"function"==typeof t&&(n=t,t=null);for(var r=data,o=[];r.byteLength>0;){for(var c=new Uint8Array(r),h=0===c[0],l="",i=1;255!==c[i];i++){if(l.length>310)return n(C,0,1);l+=c[i]}r=f(r,2+l.length),l=parseInt(l);var d=f(r,0,l);if(h)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(t){var m=new Uint8Array(d);d="";for(i=0;i<m.length;i++)d+=String.fromCharCode(m[i])}o.push(d),r=f(r,l)}var v=o.length;o.forEach((function(r,i){n(e.decodePacket(r,t,!0),i,v)}))}},187:function(t,e,n){(function(r){e.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(r++,"%c"===t&&(o=r))}),e.splice(o,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=n(233)(e);const{formatters:o}=t.exports;o.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,n(79))},188:function(t,e){e.encode=function(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e},e.decode=function(t){for(var e={},n=t.split("&"),i=0,r=n.length;i<r;i++){var o=n[i].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},189:function(t,e){t.exports=function(a,b){var t=function(){};t.prototype=b.prototype,a.prototype=new t,a.prototype.constructor=a}},190:function(t,e,n){(function(r){e.log=function(...t){return"object"==typeof console&&console.log&&console.log(...t)},e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(r++,"%c"===t&&(o=r))}),e.splice(o,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=n(253)(e);const{formatters:o}=t.exports;o.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,n(79))},196:function(t,e,n){var r=n(235)("socket.io-parser"),o=n(184),c=n(238),f=n(207),h=n(208);function l(){}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=l,e.Decoder=v;var d=e.ERROR+'"encode error"';function m(t){var n=""+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(n+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(n+=t.nsp+","),null!=t.id&&(n+=t.id),null!=t.data){var o=function(t){try{return JSON.stringify(t)}catch(t){return!1}}(t.data);if(!1===o)return d;n+=o}return r("encoded %j as %s",t,n),n}function v(){this.reconstructor=null}function y(t){this.reconPack=t,this.buffers=[]}function w(t){return{type:e.ERROR,data:"parser error: "+t}}l.prototype.encode=function(t,n){(r("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type)?function(t,e){c.removeBlobs(t,(function(t){var n=c.deconstructPacket(t),r=m(n.packet),o=n.buffers;o.unshift(r),e(o)}))}(t,n):n([m(t)])},o(v.prototype),v.prototype.add=function(t){var n;if("string"==typeof t)n=function(t){var i=0,p={type:Number(t.charAt(0))};if(null==e.types[p.type])return w("unknown packet type "+p.type);if(e.BINARY_EVENT===p.type||e.BINARY_ACK===p.type){for(var n="";"-"!==t.charAt(++i)&&(n+=t.charAt(i),i!=t.length););if(n!=Number(n)||"-"!==t.charAt(i))throw new Error("Illegal attachments");p.attachments=Number(n)}if("/"===t.charAt(i+1))for(p.nsp="";++i;){if(","===(c=t.charAt(i)))break;if(p.nsp+=c,i===t.length)break}else p.nsp="/";var o=t.charAt(i+1);if(""!==o&&Number(o)==o){for(p.id="";++i;){var c;if(null==(c=t.charAt(i))||Number(c)!=c){--i;break}if(p.id+=t.charAt(i),i===t.length)break}p.id=Number(p.id)}if(t.charAt(++i)){var h=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(i));if(!(!1!==h&&(p.type===e.ERROR||f(h))))return w("invalid payload");p.data=h}return r("decoded %s as %j",t,p),p}(t),e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type?(this.reconstructor=new y(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!h(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",n))}},v.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},y.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=c.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},y.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},197:function(t,e,n){"use strict";(function(t){var r=n(239),o=n(240),c=n(241);function f(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function h(t,e){if(f()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return v(this,t)}return d(this,t,e,n)}function d(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=y(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|C(e,n),o=(t=h(t,r)).write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|w(e.length);return 0===(t=h(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?h(t,0):y(t,e);if("Buffer"===e.type&&c(e.data))return y(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function m(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function v(t,e){if(m(e),t=h(t,e<0?0:0|w(e)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function y(t,e){var n=e.length<0?0:0|w(e.length);t=h(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function w(t){if(t>=f())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f().toString(16)+" bytes");return 0|t}function C(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return X(t).length;default:if(r)return Y(t).length;e=(""+e).toLowerCase(),r=!0}}function S(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return F(this,e,n);case"ascii":return _(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return D(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function k(b,t,e){var i=b[t];b[t]=b[e],b[e]=i}function x(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:E(t,e,n,r,o);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):E(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function E(t,e,n,r,o){var i,c=1,f=t.length,h=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;c=2,f/=2,h/=2,n/=2}function l(t,i){return 1===c?t[i]:t.readUInt16BE(i*c)}if(o){var d=-1;for(i=n;i<f;i++)if(l(t,i)===l(e,-1===d?0:i-d)){if(-1===d&&(d=i),i-d+1===h)return d*c}else-1!==d&&(i-=i-d),d=-1}else for(n+h>f&&(n=f-h),i=n;i>=0;i--){for(var m=!0,v=0;v<h;v++)if(l(t,i+v)!==l(e,v)){m=!1;break}if(m)return i}return-1}function O(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var c=e.length;if(c%2!=0)throw new TypeError("Invalid hex string");r>c/2&&(r=c/2);for(var i=0;i<r;++i){var f=parseInt(e.substr(2*i,2),16);if(isNaN(f))return i;t[n+i]=f}return i}function M(t,e,n,r){return G(Y(e,t.length-n),t,n,r)}function A(t,e,n,r){return G(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,n,r)}function N(t,e,n,r){return A(t,e,n,r)}function T(t,e,n,r){return G(X(e),t,n,r)}function R(t,e,n,r){return G(function(t,e){for(var n,r,o,c=[],i=0;i<t.length&&!((e-=2)<0);++i)n=t.charCodeAt(i),r=n>>8,o=n%256,c.push(o),c.push(r);return c}(e,t.length-n),t,n,r)}function D(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function F(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,c,f,h,l=t[i],d=null,m=l>239?4:l>223?3:l>191?2:1;if(i+m<=n)switch(m){case 1:l<128&&(d=l);break;case 2:128==(192&(o=t[i+1]))&&(h=(31&l)<<6|63&o)>127&&(d=h);break;case 3:o=t[i+1],c=t[i+2],128==(192&o)&&128==(192&c)&&(h=(15&l)<<12|(63&o)<<6|63&c)>2047&&(h<55296||h>57343)&&(d=h);break;case 4:o=t[i+1],c=t[i+2],f=t[i+3],128==(192&o)&&128==(192&c)&&128==(192&f)&&(h=(15&l)<<18|(63&o)<<12|(63&c)<<6|63&f)>65535&&h<1114112&&(d=h)}null===d?(d=65533,m=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=m}return function(t){var e=t.length;if(e<=B)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=B));return n}(r)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=f(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return d(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,r){return m(e),e<=0?h(t,e):void 0!==n?"string"==typeof r?h(t,e).fill(n,r):h(t,e).fill(n):h(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return v(null,t)},l.allocUnsafeSlow=function(t){return v(null,t)},l.isBuffer=function(b){return!(null==b||!b._isBuffer)},l.compare=function(a,b){if(!l.isBuffer(a)||!l.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var t=a.length,e=b.length,i=0,n=Math.min(t,e);i<n;++i)if(a[i]!==b[i]){t=a[i],e=b[i];break}return t<e?-1:e<t?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!c(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=l.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var o=t[i];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},l.byteLength=C,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<t;i+=2)k(this,i,i+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<t;i+=4)k(this,i,i+3),k(this,i+1,i+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<t;i+=8)k(this,i,i+7),k(this,i+1,i+6),k(this,i+2,i+5),k(this,i+3,i+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?F(this,0,t):S.apply(this,arguments)},l.prototype.equals=function(b){if(!l.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===l.compare(this,b)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,r,o){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var c=(o>>>=0)-(r>>>=0),f=(n>>>=0)-(e>>>=0),h=Math.min(c,f),d=this.slice(r,o),m=t.slice(e,n),i=0;i<h;++i)if(d[i]!==m[i]){c=d[i],f=m[i];break}return c<f?-1:f<c?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return x(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return x(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var c=!1;;)switch(r){case"hex":return O(this,t,e,n);case"utf8":case"utf-8":return M(this,t,e,n);case"ascii":return A(this,t,e,n);case"latin1":case"binary":return N(this,t,e,n);case"base64":return T(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,e,n);default:if(c)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),c=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var B=4096;function _(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function P(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function I(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=K(t[i]);return o}function L(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function j(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function z(t,e,n,r,o,c){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<c)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function U(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function V(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function $(t,e,n,r,o,c){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function J(t,e,n,r,c){return c||$(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function H(t,e,n,r,c){return c||$(t,0,n,8),o.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var o=e-t;n=new l(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},l.prototype.readUInt8=function(t,e){return e||j(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||j(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||j(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||j(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||j(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||j(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||j(t,4,this.length),o.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||j(t,4,this.length),o.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||j(t,8,this.length),o.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||j(t,8,this.length),o.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||z(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||z(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):U(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):U(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):V(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):V(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);z(this,t,e,n,o-1,-o)}var i=0,c=1,sub=0;for(this[e]=255&t;++i<n&&(c*=256);)t<0&&0===sub&&0!==this[e+i-1]&&(sub=1),this[e+i]=(t/c>>0)-sub&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);z(this,t,e,n,o-1,-o)}var i=n-1,c=1,sub=0;for(this[e+i]=255&t;--i>=0&&(c*=256);)t<0&&0===sub&&0!==this[e+i+1]&&(sub=1),this[e+i]=(t/c>>0)-sub&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):U(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):U(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):V(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):V(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return J(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return J(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return H(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return H(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},l.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var code=t.charCodeAt(0);code<256&&(t=code)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var o=l.isBuffer(t)?t:Y(new l(t,r).toString()),c=o.length;for(i=0;i<n-e;++i)this[i+e]=o[i%c]}return this};var W=/[^+\/0-9A-Za-z-_]/g;function K(t){return t<16?"0"+t.toString(16):t.toString(16)}function Y(t,e){var n;e=e||1/0;for(var r=t.length,o=null,c=[],i=0;i<r;++i){if((n=t.charCodeAt(i))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&c.push(239,191,189);continue}if(i+1===r){(e-=3)>-1&&c.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&c.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&c.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;c.push(n)}else if(n<2048){if((e-=2)<0)break;c.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;c.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;c.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return c}function X(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(W,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(35))},198:function(t,e,n){var r=n(244),o=n(199);t.exports=function(t){var e=t.xdomain,n=t.xscheme,c=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||r))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!n&&c)return new XDomainRequest}catch(t){}if(!e)try{return new(o[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}},199:function(t,e){t.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},200:function(t,e,n){var r=n(185),o=n(184);function c(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}t.exports=c,o(c.prototype),c.prototype.onError=function(t,desc){var e=new Error(t);return e.type="TransportError",e.description=desc,this.emit("error",e),this},c.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},c.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},c.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},c.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},c.prototype.onData=function(data){var t=r.decodePacket(data,this.socket.binaryType);this.onPacket(t)},c.prototype.onPacket=function(t){this.emit("packet",t)},c.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},206:function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,b=t.indexOf("["),o=t.indexOf("]");-1!=b&&-1!=o&&(t=t.substring(0,b)+t.substring(b,o).replace(/:/g,";")+t.substring(o,t.length));for(var c=n.exec(t||""),f={},i=14;i--;)f[r[i]]=c[i]||"";return-1!=b&&-1!=o&&(f.source=e,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=!0),f}},207:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},208:function(t,e,n){(function(e){t.exports=function(t){return n&&e.isBuffer(t)||r&&(t instanceof ArrayBuffer||o(t))};var n="function"==typeof e&&"function"==typeof e.isBuffer,r="function"==typeof ArrayBuffer,o=function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}}).call(this,n(197).Buffer)},209:function(t,e,n){var r=n(242),o=n(215),c=n(184),f=n(196),h=n(216),l=n(217),d=n(187)("socket.io-client:manager"),m=n(214),v=n(259),y=Object.prototype.hasOwnProperty;function w(t,e){if(!(this instanceof w))return new w(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new v({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||f;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}t.exports=w,w.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)y.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},w.prototype.updateSocketIds=function(){for(var t in this.nsps)y.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},w.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},c(w.prototype),w.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},w.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},w.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},w.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},w.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},w.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},w.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},w.prototype.open=w.prototype.connect=function(t,e){if(d("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;d("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,o=this;this.readyState="opening",this.skipReconnect=!1;var c=h(n,"open",(function(){o.onopen(),t&&t()})),f=h(n,"error",(function(data){if(d("connect_error"),o.cleanup(),o.readyState="closed",o.emitAll("connect_error",data),t){var e=new Error("Connection error");e.data=data,t(e)}else o.maybeReconnectOnOpen()}));if(!1!==this._timeout){var l=this._timeout;d("connect attempt will timeout after %d",l);var m=setTimeout((function(){d("connect attempt timed out after %d",l),c.destroy(),n.close(),n.emit("error","timeout"),o.emitAll("connect_timeout",l)}),l);this.subs.push({destroy:function(){clearTimeout(m)}})}return this.subs.push(c),this.subs.push(f),this},w.prototype.onopen=function(){d("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(h(t,"data",l(this,"ondata"))),this.subs.push(h(t,"ping",l(this,"onping"))),this.subs.push(h(t,"pong",l(this,"onpong"))),this.subs.push(h(t,"error",l(this,"onerror"))),this.subs.push(h(t,"close",l(this,"onclose"))),this.subs.push(h(this.decoder,"decoded",l(this,"ondecoded")))},w.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},w.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},w.prototype.ondata=function(data){this.decoder.add(data)},w.prototype.ondecoded=function(t){this.emit("packet",t)},w.prototype.onerror=function(t){d("error",t),this.emitAll("error",t)},w.prototype.socket=function(t,e){var n=this.nsps[t];if(!n){n=new o(this,t,e),this.nsps[t]=n;var r=this;n.on("connecting",c),n.on("connect",(function(){n.id=r.generateId(t)})),this.autoConnect&&c()}function c(){~m(r.connecting,n)||r.connecting.push(n)}return n},w.prototype.destroy=function(t){var e=m(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},w.prototype.packet=function(t){d("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,(function(n){for(var i=0;i<n.length;i++)e.engine.write(n[i],t.options);e.encoding=!1,e.processPacketQueue()})))},w.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},w.prototype.cleanup=function(){d("cleanup");for(var t=this.subs.length,i=0;i<t;i++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},w.prototype.close=w.prototype.disconnect=function(){d("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},w.prototype.onclose=function(t){d("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},w.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)d("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();d("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout((function(){t.skipReconnect||(d("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open((function(e){e?(d("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(d("reconnect success"),t.onreconnect())})))}),e);this.subs.push({destroy:function(){clearTimeout(n)}})}},w.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},210:function(t,e,n){var r=n(198),o=n(245),c=n(255),f=n(256);e.polling=function(t){var e=!1,n=!1,f=!1!==t.jsonp;if("undefined"!=typeof location){var h="https:"===location.protocol,l=location.port;l||(l=h?443:80),e=t.hostname!==location.hostname||l!==t.port,n=t.secure!==h}if(t.xdomain=e,t.xscheme=n,"open"in new r(t)&&!t.forceJSONP)return new o(t);if(!f)throw new Error("JSONP disabled");return new c(t)},e.websocket=f},211:function(t,e,n){var r=n(200),o=n(188),c=n(185),f=n(189),h=n(213),l=n(190)("engine.io-client:polling");t.exports=m;var d=null!=new(n(198))({xdomain:!1}).responseType;function m(t){var e=t&&t.forceBase64;d&&!e||(this.supportsBinary=!1),r.call(this,t)}f(m,r),m.prototype.name="polling",m.prototype.doOpen=function(){this.poll()},m.prototype.pause=function(t){var e=this;function n(){l("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(l("we are currently polling - waiting to pause"),r++,this.once("pollComplete",(function(){l("pre-pause polling complete"),--r||n()}))),this.writable||(l("we are currently writing - waiting to pause"),r++,this.once("drain",(function(){l("pre-pause writing complete"),--r||n()})))}else n()},m.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},m.prototype.onData=function(data){var t=this;l("polling got data %s",data);c.decodePayload(data,this.socket.binaryType,(function(e,n,r){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},m.prototype.doClose=function(){var t=this;function e(){l("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(l("transport open - closing"),e()):(l("transport not open - deferring close"),this.once("open",e))},m.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};c.encodePayload(t,this.supportsBinary,(function(data){e.doWrite(data,n)}))},m.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=h()),this.supportsBinary||t.sid||(t.b64=1),t=o.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t}},212:function(t,e,n){(function(e){var r=n(247),o=Object.prototype.toString,c="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),f="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);t.exports=function t(n){if(!n||"object"!=typeof n)return!1;if(r(n)){for(var i=0,o=n.length;i<o;i++)if(t(n[i]))return!0;return!1}if("function"==typeof e&&e.isBuffer&&e.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||c&&n instanceof Blob||f&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return t(n.toJSON(),!0);for(var h in n)if(Object.prototype.hasOwnProperty.call(n,h)&&t(n[h]))return!0;return!1}}).call(this,n(197).Buffer)},213:function(t,e,n){"use strict";var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),c=64,map={},f=0,i=0;function h(t){var e="";do{e=o[t%c]+e,t=Math.floor(t/c)}while(t>0);return e}function l(){var t=h(+new Date);return t!==r?(f=0,r=t):t+"."+h(f++)}for(;i<c;i++)map[o[i]]=i;l.encode=h,l.decode=function(t){var e=0;for(i=0;i<t.length;i++)e=e*c+map[t.charAt(i)];return e},t.exports=l},214:function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var i=0;i<t.length;++i)if(t[i]===e)return i;return-1}},215:function(t,e,n){var r=n(196),o=n(184),c=n(258),f=n(216),h=n(217),l=n(187)("socket.io-client:socket"),d=n(188),m=n(212);t.exports=w;var v={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},y=o.prototype.emit;function w(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}o(w.prototype),w.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[f(t,"open",h(this,"onopen")),f(t,"packet",h(this,"onpacket")),f(t,"close",h(this,"onclose"))]}},w.prototype.open=w.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},w.prototype.send=function(){var t=c(arguments);return t.unshift("message"),this.emit.apply(this,t),this},w.prototype.emit=function(t){if(v.hasOwnProperty(t))return y.apply(this,arguments),this;var e=c(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:m(e))?r.BINARY_EVENT:r.EVENT,data:e,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},w.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},w.prototype.onopen=function(){if(l("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?d.encode(this.query):this.query;l("sending connect packet with query %s",t),this.packet({type:r.CONNECT,query:t})}else this.packet({type:r.CONNECT})},w.prototype.onclose=function(t){l("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},w.prototype.onpacket=function(t){var e=t.nsp===this.nsp,n=t.type===r.ERROR&&"/"===t.nsp;if(e||n)switch(t.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(t);break;case r.ACK:case r.BINARY_ACK:this.onack(t);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",t.data)}},w.prototype.onevent=function(t){var e=t.data||[];l("emitting event %j",e),null!=t.id&&(l("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?y.apply(this,e):this.receiveBuffer.push(e)},w.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var o=c(arguments);l("sending ack %j",o),e.packet({type:m(o)?r.BINARY_ACK:r.ACK,id:t,data:o})}}},w.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(l("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):l("bad ack %s",t.id)},w.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},w.prototype.emitBuffered=function(){var i;for(i=0;i<this.receiveBuffer.length;i++)y.apply(this,this.receiveBuffer[i]);for(this.receiveBuffer=[],i=0;i<this.sendBuffer.length;i++)this.packet(this.sendBuffer[i]);this.sendBuffer=[]},w.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},w.prototype.destroy=function(){if(this.subs){for(var i=0;i<this.subs.length;i++)this.subs[i].destroy();this.subs=null}this.io.destroy(this)},w.prototype.close=w.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},w.prototype.compress=function(t){return this.flags.compress=t,this},w.prototype.binary=function(t){return this.flags.binary=t,this}},216:function(t,e){t.exports=function(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}},217:function(t,e){var n=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}},231:function(t,e,n){var r=n(232),o=n(196),c=n(209),f=n(187)("socket.io-client");t.exports=e=l;var h=e.managers={};function l(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,o=r(t),source=o.source,l=o.id,path=o.path,d=h[l]&&path in h[l].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||d?(f("ignoring socket cache for %s",source),n=c(source,e)):(h[l]||(f("new io instance for %s",source),h[l]=c(source,e)),n=h[l]),o.query&&!e.query&&(e.query=o.query),n.socket(o.path,e)}e.protocol=o.protocol,e.connect=l,e.Manager=n(209),e.Socket=n(215)},232:function(t,e,n){var r=n(206),o=n(187)("socket.io-client:url");t.exports=function(t,e){var n=t;e=e||"undefined"!=typeof location&&location,null==t&&(t=e.protocol+"//"+e.host);"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(o("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),o("parse %s",t),n=r(t));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var c=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+c+":"+n.port,n.href=n.protocol+"://"+c+(e&&e.port===n.port?"":":"+n.port),n}},233:function(t,e,n){t.exports=function(t){function e(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return r.colors[Math.abs(e)%r.colors.length]}function r(t){let n;function f(...t){if(!f.enabled)return;const e=f,o=Number(new Date),c=o-(n||o);e.diff=c,e.prev=n,e.curr=o,n=o,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let h=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(n,o)=>{if("%%"===n)return n;h++;const c=r.formatters[o];if("function"==typeof c){const r=t[h];n=c.call(e,r),t.splice(h,1),h--}return n}),r.formatArgs.call(e,t),(e.log||r.log).apply(e,t)}return f.namespace=t,f.enabled=r.enabled(t),f.useColors=r.useColors(),f.color=e(t),f.destroy=o,f.extend=c,"function"==typeof r.init&&r.init(f),r.instances.push(f),f}function o(){const t=r.instances.indexOf(this);return-1!==t&&(r.instances.splice(t,1),!0)}function c(t,e){const n=r(this.namespace+(void 0===e?":":e)+t);return n.log=this.log,n}function f(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},r.disable=function(){const t=[...r.names.map(f),...r.skips.map(f).map(t=>"-"+t)].join(",");return r.enable(""),t},r.enable=function(t){let i;r.save(t),r.names=[],r.skips=[];const e=("string"==typeof t?t:"").split(/[\s,]+/),n=e.length;for(i=0;i<n;i++)e[i]&&("-"===(t=e[i].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+t.substr(1)+"$")):r.names.push(new RegExp("^"+t+"$")));for(i=0;i<r.instances.length;i++){const t=r.instances[i];t.enabled=r.enabled(t.namespace)}},r.enabled=function(t){if("*"===t[t.length-1])return!0;let i,e;for(i=0,e=r.skips.length;i<e;i++)if(r.skips[i].test(t))return!1;for(i=0,e=r.names.length;i<e;i++)if(r.names[i].test(t))return!0;return!1},r.humanize=n(234),Object.keys(t).forEach(e=>{r[e]=t[e]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=e,r.enable(r.load()),r}},234:function(t,e){var s=1e3,n=60*s,r=60*n,o=24*r,c=7*o,f=365.25*o;function h(t,e,n,r){var o=e>=1.5*n;return Math.round(t/n)+" "+r+(o?"s":"")}t.exports=function(t,e){e=e||{};var l=typeof t;if("string"===l&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var h=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return h*f;case"weeks":case"week":case"w":return h*c;case"days":case"day":case"d":return h*o;case"hours":case"hour":case"hrs":case"hr":case"h":return h*r;case"minutes":case"minute":case"mins":case"min":case"m":return h*n;case"seconds":case"second":case"secs":case"sec":case"s":return h*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}(t);if("number"===l&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=o)return h(t,e,o,"day");if(e>=r)return h(t,e,r,"hour");if(e>=n)return h(t,e,n,"minute");if(e>=s)return h(t,e,s,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=o)return Math.round(t/o)+"d";if(e>=r)return Math.round(t/r)+"h";if(e>=n)return Math.round(t/n)+"m";if(e>=s)return Math.round(t/s)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},235:function(t,e,n){(function(r){function o(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG),t}(e=t.exports=n(236)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var o=0,c=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(o++,"%c"===t&&(c=o))})),t.splice(c,0,r)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=o,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(o())}).call(this,n(79))},236:function(t,e,n){function r(t){var n;function r(){if(r.enabled){var t=r,o=+new Date,c=o-(n||o);t.diff=c,t.prev=n,t.curr=o,n=o;for(var f=new Array(arguments.length),i=0;i<f.length;i++)f[i]=arguments[i];f[0]=e.coerce(f[0]),"string"!=typeof f[0]&&f.unshift("%O");var h=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;h++;var o=e.formatters[r];if("function"==typeof o){var c=f[h];n=o.call(t,c),f.splice(h,1),h--}return n})),e.formatArgs.call(t,f),(r.log||e.log||console.log.bind(console)).apply(t,f)}}return r.namespace=t,r.enabled=e.enabled(t),r.useColors=e.useColors(),r.color=function(t){var i,n=0;for(i in t)n=(n<<5)-n+t.charCodeAt(i),n|=0;return e.colors[Math.abs(n)%e.colors.length]}(t),r.destroy=o,"function"==typeof e.init&&e.init(r),e.instances.push(r),r}function o(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=r.debug=r.default=r).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var i;e.save(t),e.names=[],e.skips=[];var n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length;for(i=0;i<r;i++)n[i]&&("-"===(t=n[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(i=0;i<e.instances.length;i++){var o=e.instances[i];o.enabled=e.enabled(o.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var i,n;for(i=0,n=e.skips.length;i<n;i++)if(e.skips[i].test(t))return!1;for(i=0,n=e.names.length;i<n;i++)if(e.names[i].test(t))return!0;return!1},e.humanize=n(237),e.instances=[],e.names=[],e.skips=[],e.formatters={}},237:function(t,e){var s=1e3,n=60*s,r=60*n,o=24*r,c=365.25*o;function f(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var h,l=typeof t;if("string"===l&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var f=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return f*c;case"days":case"day":case"d":return f*o;case"hours":case"hour":case"hrs":case"hr":case"h":return f*r;case"minutes":case"minute":case"mins":case"min":case"m":return f*n;case"seconds":case"second":case"secs":case"sec":case"s":return f*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}(t);if("number"===l&&!1===isNaN(t))return e.long?f(h=t,o,"day")||f(h,r,"hour")||f(h,n,"minute")||f(h,s,"second")||h+" ms":function(t){if(t>=o)return Math.round(t/o)+"d";if(t>=r)return Math.round(t/r)+"h";if(t>=n)return Math.round(t/n)+"m";if(t>=s)return Math.round(t/s)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},238:function(t,e,n){var r=n(207),o=n(208),c=Object.prototype.toString,f="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===c.call(Blob),h="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===c.call(File);e.deconstructPacket=function(t){var e=[],n=t.data,c=t;return c.data=function t(data,e){if(!data)return data;if(o(data)){var n={_placeholder:!0,num:e.length};return e.push(data),n}if(r(data)){for(var c=new Array(data.length),i=0;i<data.length;i++)c[i]=t(data[i],e);return c}if("object"==typeof data&&!(data instanceof Date)){c={};for(var f in data)c[f]=t(data[f],e);return c}return data}(n,e),c.attachments=e.length,{packet:c,buffers:e}},e.reconstructPacket=function(t,e){return t.data=function t(data,e){if(!data)return data;if(data&&data._placeholder)return e[data.num];if(r(data))for(var i=0;i<data.length;i++)data[i]=t(data[i],e);else if("object"==typeof data)for(var n in data)data[n]=t(data[n],e);return data}(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(data,t){var e=0,n=data;!function c(l,d,m){if(!l)return l;if(f&&l instanceof Blob||h&&l instanceof File){e++;var v=new FileReader;v.onload=function(){m?m[d]=this.result:n=this.result,--e||t(n)},v.readAsArrayBuffer(l)}else if(r(l))for(var i=0;i<l.length;i++)c(l[i],i,l);else if("object"==typeof l&&!o(l))for(var y in l)c(l[y],y,l)}(n),e||t(n)}},239:function(t,e,n){"use strict";e.byteLength=function(t){var e=h(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,i,n=h(t),r=n[0],f=n[1],l=new c(function(t,e,n){return 3*(e+n)/4-n}(0,r,f)),d=0,m=f>0?r-4:r;for(i=0;i<m;i+=4)e=o[t.charCodeAt(i)]<<18|o[t.charCodeAt(i+1)]<<12|o[t.charCodeAt(i+2)]<<6|o[t.charCodeAt(i+3)],l[d++]=e>>16&255,l[d++]=e>>8&255,l[d++]=255&e;2===f&&(e=o[t.charCodeAt(i)]<<2|o[t.charCodeAt(i+1)]>>4,l[d++]=255&e);1===f&&(e=o[t.charCodeAt(i)]<<10|o[t.charCodeAt(i+1)]<<4|o[t.charCodeAt(i+2)]>>2,l[d++]=e>>8&255,l[d++]=255&e);return l},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,c=[],i=0,f=n-o;i<f;i+=16383)c.push(l(t,i,i+16383>f?f:i+16383));1===o?(e=t[n-1],c.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],c.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return c.join("")};for(var r=[],o=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,f=code.length;i<f;++i)r[i]=code[i],o[code.charCodeAt(i)]=i;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var o,c,output=[],i=e;i<n;i+=3)o=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),output.push(r[(c=o)>>18&63]+r[c>>12&63]+r[c>>6&63]+r[63&c]);return output.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},240:function(t,e){e.read=function(t,e,n,r,o){var c,f,h=8*o-r-1,l=(1<<h)-1,d=l>>1,m=-7,i=n?o-1:0,v=n?-1:1,s=t[e+i];for(i+=v,c=s&(1<<-m)-1,s>>=-m,m+=h;m>0;c=256*c+t[e+i],i+=v,m-=8);for(f=c&(1<<-m)-1,c>>=-m,m+=r;m>0;f=256*f+t[e+i],i+=v,m-=8);if(0===c)c=1-d;else{if(c===l)return f?NaN:1/0*(s?-1:1);f+=Math.pow(2,r),c-=d}return(s?-1:1)*f*Math.pow(2,c-r)},e.write=function(t,e,n,r,o,c){var f,h,l,d=8*c-o-1,m=(1<<d)-1,v=m>>1,rt=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,i=r?0:c-1,y=r?1:-1,s=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,f=m):(f=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-f))<1&&(f--,l*=2),(e+=f+v>=1?rt/l:rt*Math.pow(2,1-v))*l>=2&&(f++,l/=2),f+v>=m?(h=0,f=m):f+v>=1?(h=(e*l-1)*Math.pow(2,o),f+=v):(h=e*Math.pow(2,v-1)*Math.pow(2,o),f=0));o>=8;t[n+i]=255&h,i+=y,h/=256,o-=8);for(f=f<<o|h,d+=o;d>0;t[n+i]=255&f,i+=y,f/=256,d-=8);t[n+i-y]|=128*s}},241:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},242:function(t,e,n){t.exports=n(243),t.exports.parser=n(185)},243:function(t,e,n){var r=n(210),o=n(184),c=n(190)("engine.io-client:socket"),f=n(214),h=n(185),l=n(206),d=n(188);function m(t,e){if(!(this instanceof m))return new m(t,e);e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=l(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=l(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=d.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=!1!==e.withCredentials,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}t.exports=m,m.priorWebsocketSuccess=!1,o(m.prototype),m.protocol=h.protocol,m.Socket=m,m.Transport=n(200),m.transports=n(210),m.parser=n(185),m.prototype.createTransport=function(t){c('creating transport "%s"',t);var e=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}(this.query);e.EIO=h.protocol,e.transport=t;var n=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new r[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},m.prototype.open=function(){var t;if(this.rememberUpgrade&&m.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout((function(){e.emit("error","No transports available")}),0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},m.prototype.setTransport=function(t){c("setting transport %s",t.name);var e=this;this.transport&&(c("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",(function(){e.onDrain()})).on("packet",(function(t){e.onPacket(t)})).on("error",(function(t){e.onError(t)})).on("close",(function(){e.onClose("transport close")}))},m.prototype.probe=function(t){c('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),n=!1,r=this;function o(){if(r.onlyBinaryUpgrades){var o=!this.supportsBinary&&r.transport.supportsBinary;n=n||o}n||(c('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(function(o){if(!n)if("pong"===o.type&&"probe"===o.data){if(c('probe transport "%s" pong',t),r.upgrading=!0,r.emit("upgrading",e),!e)return;m.priorWebsocketSuccess="websocket"===e.name,c('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(c("changing transport and sending upgrade packet"),y(),r.setTransport(e),e.send([{type:"upgrade"}]),r.emit("upgrade",e),e=null,r.upgrading=!1,r.flush())}))}else{c('probe transport "%s" failed',t);var f=new Error("probe error");f.transport=e.name,r.emit("upgradeError",f)}})))}function f(){n||(n=!0,y(),e.close(),e=null)}function h(n){var o=new Error("probe error: "+n);o.transport=e.name,f(),c('probe transport "%s" failed because of error: %s',t,n),r.emit("upgradeError",o)}function l(){h("transport closed")}function d(){h("socket closed")}function v(t){e&&t.name!==e.name&&(c('"%s" works - aborting "%s"',t.name,e.name),f())}function y(){e.removeListener("open",o),e.removeListener("error",h),e.removeListener("close",l),r.removeListener("close",d),r.removeListener("upgrading",v)}m.priorWebsocketSuccess=!1,e.once("open",o),e.once("error",h),e.once("close",l),this.once("close",d),this.once("upgrading",v),e.open()},m.prototype.onOpen=function(){if(c("socket open"),this.readyState="open",m.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){c("starting upgrade probes");for(var i=0,t=this.upgrades.length;i<t;i++)this.probe(this.upgrades[i])}},m.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(c('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else c('packet received with socket readyState "%s"',this.readyState)},m.prototype.onHandshake=function(data){this.emit("handshake",data),this.id=data.sid,this.transport.query.sid=data.sid,this.upgrades=this.filterUpgrades(data.upgrades),this.pingInterval=data.pingInterval,this.pingTimeout=data.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},m.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout((function(){"closed"!==e.readyState&&e.onClose("ping timeout")}),t||e.pingInterval+e.pingTimeout)},m.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout((function(){c("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)}),t.pingInterval)},m.prototype.ping=function(){var t=this;this.sendPacket("ping",(function(){t.emit("ping")}))},m.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},m.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(c("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},m.prototype.write=m.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},m.prototype.sendPacket=function(t,data,e,n){if("function"==typeof data&&(n=data,data=void 0),"function"==typeof e&&(n=e,e=null),"closing"!==this.readyState&&"closed"!==this.readyState){(e=e||{}).compress=!1!==e.compress;var r={type:t,data:data,options:e};this.emit("packetCreate",r),this.writeBuffer.push(r),n&&this.once("flush",n),this.flush()}},m.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():e()})):this.upgrading?r():e()}function e(){t.onClose("forced close"),c("socket closing - telling transport to close"),t.transport.close()}function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()}function r(){t.once("upgrade",n),t.once("upgradeError",n)}return this},m.prototype.onError=function(t){c("socket error %j",t),m.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},m.prototype.onClose=function(t,desc){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){c('socket close with reason: "%s"',t);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,desc),this.writeBuffer=[],this.prevBufferLen=0}},m.prototype.filterUpgrades=function(t){for(var e=[],i=0,n=t.length;i<n;i++)~f(this.transports,t[i])&&e.push(t[i]);return e}},244:function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},245:function(t,e,n){var r=n(198),o=n(211),c=n(184),f=n(189),h=n(190)("engine.io-client:polling-xhr"),l=n(199);function d(){}function m(t){if(o.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,"undefined"!=typeof location){var e="https:"===location.protocol,n=location.port;n||(n=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||n!==t.port,this.xs=t.secure!==e}}function v(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}if(t.exports=m,t.exports.Request=v,f(m,o),m.prototype.supportsBinary=!0,m.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new v(t)},m.prototype.doWrite=function(data,t){var e="string"!=typeof data&&void 0!==data,n=this.request({method:"POST",data:data,isBinary:e}),r=this;n.on("success",t),n.on("error",(function(t){r.onError("xhr post error",t)})),this.sendXhr=n},m.prototype.doPoll=function(){h("xhr poll");var t=this.request(),e=this;t.on("data",(function(data){e.onData(data)})),t.on("error",(function(t){e.onError("xhr poll error",t)})),this.pollXhr=t},c(v.prototype),v.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new r(t),n=this;try{h("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var i in e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&e.setRequestHeader(i,this.extraHeaders[i])}catch(t){}if("POST"===this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){n.onLoad()},e.onerror=function(){n.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var t=e.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&(e.responseType="arraybuffer")}catch(t){}4===e.readyState&&(200===e.status||1223===e.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof e.status?e.status:0)}),0))},h("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout((function(){n.onError(t)}),0)}"undefined"!=typeof document&&(this.index=v.requestsCount++,v.requests[this.index]=this)},v.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},v.prototype.onData=function(data){this.emit("data",data),this.onSuccess()},v.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},v.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=d:this.xhr.onreadystatechange=d,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete v.requests[this.index],this.xhr=null}},v.prototype.onLoad=function(){var data;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(t){}data=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(t){this.onError(t)}null!=data&&this.onData(data)},v.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},v.prototype.abort=function(){this.cleanup()},v.requestsCount=0,v.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",y);else if("function"==typeof addEventListener){addEventListener("onpagehide"in l?"pagehide":"unload",y,!1)}function y(){for(var i in v.requests)v.requests.hasOwnProperty(i)&&v.requests[i].abort()}},246:function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var i in t)n.call(t,i)&&e.push(i);return e}},247:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},248:function(t,e){t.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(t),c=new Uint8Array(n-e),i=e,f=0;i<n;i++,f++)c[f]=o[i];return c.buffer}},249:function(t,e){function n(){}t.exports=function(t,e,r){var o=!1;return r=r||n,c.count=t,0===t?e():c;function c(t,n){if(c.count<=0)throw new Error("after called too many times");--c.count,t?(o=!0,e(t),e=r):0!==c.count||o||e(null,n)}}},250:function(t,e){var n,r,o,c=String.fromCharCode;function f(t){for(var e,n,output=[],r=0,o=t.length;r<o;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<o?56320==(64512&(n=t.charCodeAt(r++)))?output.push(((1023&e)<<10)+(1023&n)+65536):(output.push(e),r--):output.push(e);return output}function h(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function l(t,e){return c(t>>e&63|128)}function d(t,e){if(0==(4294967168&t))return c(t);var symbol="";return 0==(4294965248&t)?symbol=c(t>>6&31|192):0==(4294901760&t)?(h(t,e)||(t=65533),symbol=c(t>>12&15|224),symbol+=l(t,6)):0==(4292870144&t)&&(symbol=c(t>>18&7|240),symbol+=l(t,12),symbol+=l(t,6)),symbol+=c(63&t|128)}function m(){if(o>=r)throw Error("Invalid byte index");var t=255&n[o];if(o++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function v(t){var e,c;if(o>r)throw Error("Invalid byte index");if(o==r)return!1;if(e=255&n[o],o++,0==(128&e))return e;if(192==(224&e)){if((c=(31&e)<<6|m())>=128)return c;throw Error("Invalid continuation byte")}if(224==(240&e)){if((c=(15&e)<<12|m()<<6|m())>=2048)return h(c,t)?c:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(c=(7&e)<<18|m()<<12|m()<<6|m())>=65536&&c<=1114111)return c;throw Error("Invalid UTF-8 detected")}t.exports={version:"2.1.2",encode:function(t,e){for(var n=!1!==(e=e||{}).strict,r=f(t),o=r.length,c=-1,h="";++c<o;)h+=d(r[c],n);return h},decode:function(t,e){var h=!1!==(e=e||{}).strict;n=f(t),r=n.length,o=0;for(var l,d=[];!1!==(l=v(h));)d.push(l);return function(t){for(var e,n=t.length,r=-1,output="";++r<n;)(e=t[r])>65535&&(output+=c((e-=65536)>>>10&1023|55296),e=56320|1023&e),output+=c(e);return output}(d)}}},251:function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),i=0;i<t.length;i++)n[t.charCodeAt(i)]=i;e.encode=function(e){var i,n=new Uint8Array(e),r=n.length,o="";for(i=0;i<r;i+=3)o+=t[n[i]>>2],o+=t[(3&n[i])<<4|n[i+1]>>4],o+=t[(15&n[i+1])<<2|n[i+2]>>6],o+=t[63&n[i+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},e.decode=function(t){var i,e,r,o,c,f=.75*t.length,h=t.length,p=0;"="===t[t.length-1]&&(f--,"="===t[t.length-2]&&f--);var l=new ArrayBuffer(f),d=new Uint8Array(l);for(i=0;i<h;i+=4)e=n[t.charCodeAt(i)],r=n[t.charCodeAt(i+1)],o=n[t.charCodeAt(i+2)],c=n[t.charCodeAt(i+3)],d[p++]=e<<2|r>>4,d[p++]=(15&r)<<4|o>>2,d[p++]=(3&o)<<6|63&c;return l}}()},252:function(t,e){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),o=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),c=n&&n.prototype.append&&n.prototype.getBlob;function f(t){return t.map((function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=n.buffer}return e}return t}))}function h(t,e){e=e||{};var r=new n;return f(t).forEach((function(t){r.append(t)})),e.type?r.getBlob(e.type):r.getBlob()}function l(t,e){return new Blob(f(t),e||{})}"undefined"!=typeof Blob&&(h.prototype=Blob.prototype,l.prototype=Blob.prototype),t.exports=r?o?Blob:l:c?h:void 0},253:function(t,e,n){t.exports=function(t){function e(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return r.colors[Math.abs(e)%r.colors.length]}function r(t){let n;function f(...t){if(!f.enabled)return;const e=f,o=Number(new Date),c=o-(n||o);e.diff=c,e.prev=n,e.curr=o,n=o,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let h=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(n,o)=>{if("%%"===n)return n;h++;const c=r.formatters[o];if("function"==typeof c){const r=t[h];n=c.call(e,r),t.splice(h,1),h--}return n}),r.formatArgs.call(e,t),(e.log||r.log).apply(e,t)}return f.namespace=t,f.enabled=r.enabled(t),f.useColors=r.useColors(),f.color=e(t),f.destroy=o,f.extend=c,"function"==typeof r.init&&r.init(f),r.instances.push(f),f}function o(){const t=r.instances.indexOf(this);return-1!==t&&(r.instances.splice(t,1),!0)}function c(t,e){const n=r(this.namespace+(void 0===e?":":e)+t);return n.log=this.log,n}function f(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},r.disable=function(){const t=[...r.names.map(f),...r.skips.map(f).map(t=>"-"+t)].join(",");return r.enable(""),t},r.enable=function(t){let i;r.save(t),r.names=[],r.skips=[];const e=("string"==typeof t?t:"").split(/[\s,]+/),n=e.length;for(i=0;i<n;i++)e[i]&&("-"===(t=e[i].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+t.substr(1)+"$")):r.names.push(new RegExp("^"+t+"$")));for(i=0;i<r.instances.length;i++){const t=r.instances[i];t.enabled=r.enabled(t.namespace)}},r.enabled=function(t){if("*"===t[t.length-1])return!0;let i,e;for(i=0,e=r.skips.length;i<e;i++)if(r.skips[i].test(t))return!1;for(i=0,e=r.names.length;i<e;i++)if(r.names[i].test(t))return!0;return!1},r.humanize=n(254),Object.keys(t).forEach(e=>{r[e]=t[e]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=e,r.enable(r.load()),r}},254:function(t,e){var s=1e3,n=60*s,r=60*n,o=24*r,c=7*o,f=365.25*o;function h(t,e,n,r){var o=e>=1.5*n;return Math.round(t/n)+" "+r+(o?"s":"")}t.exports=function(t,e){e=e||{};var l=typeof t;if("string"===l&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var h=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return h*f;case"weeks":case"week":case"w":return h*c;case"days":case"day":case"d":return h*o;case"hours":case"hour":case"hrs":case"hr":case"h":return h*r;case"minutes":case"minute":case"mins":case"min":case"m":return h*n;case"seconds":case"second":case"secs":case"sec":case"s":return h*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}(t);if("number"===l&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=o)return h(t,e,o,"day");if(e>=r)return h(t,e,r,"hour");if(e>=n)return h(t,e,n,"minute");if(e>=s)return h(t,e,s,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=o)return Math.round(t/o)+"d";if(e>=r)return Math.round(t/r)+"h";if(e>=n)return Math.round(t/n)+"m";if(e>=s)return Math.round(t/s)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},255:function(t,e,n){var r=n(211),o=n(189),c=n(199);t.exports=m;var f,h=/\n/g,l=/\\n/g;function d(){}function m(t){r.call(this,t),this.query=this.query||{},f||(f=c.___eio=c.___eio||[]),this.index=f.length;var e=this;f.push((function(t){e.onData(t)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){e.script&&(e.script.onerror=d)}),!1)}o(m,r),m.prototype.supportsBinary=!1,m.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},m.prototype.doPoll=function(){var t=this,script=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),script.async=!0,script.src=this.uri(),script.onerror=function(e){t.onError("jsonp poll error",e)};var e=document.getElementsByTagName("script")[0];e?e.parentNode.insertBefore(script,e):(document.head||document.body).appendChild(script),this.script=script,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var iframe=document.createElement("iframe");document.body.appendChild(iframe),document.body.removeChild(iframe)}),100)},m.prototype.doWrite=function(data,t){var e=this;if(!this.form){var iframe,form=document.createElement("form"),area=document.createElement("textarea"),n=this.iframeId="eio_iframe_"+this.index;form.className="socketio",form.style.position="absolute",form.style.top="-1000px",form.style.left="-1000px",form.target=n,form.method="POST",form.setAttribute("accept-charset","utf-8"),area.name="d",form.appendChild(area),document.body.appendChild(form),this.form=form,this.area=area}function r(){o(),t()}function o(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(t){e.onError("jsonp polling iframe removal error",t)}try{var html='<iframe src="javascript:0" name="'+e.iframeId+'">';iframe=document.createElement(html)}catch(t){(iframe=document.createElement("iframe")).name=e.iframeId,iframe.src="javascript:0"}iframe.id=e.iframeId,e.form.appendChild(iframe),e.iframe=iframe}this.form.action=this.uri(),o(),data=data.replace(l,"\\\n"),this.area.value=data.replace(h,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===e.iframe.readyState&&r()}:this.iframe.onload=r}},256:function(t,e,n){(function(e){var r,o,c=n(200),f=n(185),h=n(188),l=n(189),d=n(213),m=n(190)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?r=WebSocket:"undefined"!=typeof self&&(r=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{o=n(257)}catch(t){}var v=r||o;function y(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=r&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(v=o),c.call(this,t)}t.exports=y,l(y,c),y.prototype.name="websocket",y.prototype.supportsBinary=!0,y.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new v(t,e):new v(t):new v(t,e,n)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},y.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},y.prototype.write=function(t){var n=this;this.writable=!1;for(var r=t.length,i=0,o=r;i<o;i++)!function(t){f.encodePacket(t,n.supportsBinary,(function(data){if(!n.usingBrowserWebSocket){var o={};if(t.options&&(o.compress=t.options.compress),n.perMessageDeflate)("string"==typeof data?e.byteLength(data):data.length)<n.perMessageDeflate.threshold&&(o.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(data):n.ws.send(data,o)}catch(t){m("websocket closed before onclose event")}--r||c()}))}(t[i]);function c(){n.emit("flush"),setTimeout((function(){n.writable=!0,n.emit("drain")}),0)}},y.prototype.onClose=function(){c.prototype.onClose.call(this)},y.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},y.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=d()),this.supportsBinary||(t.b64=1),(t=h.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+t},y.prototype.check=function(){return!(!v||"__initialize"in v&&this.name===y.prototype.name)}}).call(this,n(197).Buffer)},258:function(t,e){t.exports=function(t,e){for(var n=[],i=(e=e||0)||0;i<t.length;i++)n[i-e]=t[i];return n}},259:function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},260:function(t,e,n){"use strict";var r=n(261),o=n(262);function c(){}c.prototype=r;var f=new c;t.exports=f,f.highlight=function(t,e,n){var r=(n||{}).prefix;null==r&&(r=d);return B(R(t,e,!0,r))},f.highlightAuto=N,f.registerLanguage=function(t,e){var n=e(f);n.rawDefinition=e.bind(null,f),M[t]=n,O.push(t),n.aliases&&T(t,n.aliases)},f.listLanguages=function(){return O.concat()},f.registerAlias=T,f.getLanguage=_;var h=r.inherit,l={}.hasOwnProperty,d="hljs-",m="case_insensitive",v="cached_variants",y="terminator_end",w=" ",C="|",S="(",k=")",x="\\",E=["of","and","for","in","not","or","if","then"],O=[],M={},A={};function N(t,e){var n,r,c,f,h=e||{},l=h.subset||O,m=h.prefix,v=l.length,y=-1;if(null==m&&(m=d),"string"!=typeof t)throw o("Expected `string` for value, got `%s`",t);for(r=B({}),n=B({});++y<v;)_(f=l[y])&&((c=B(R(f,t,!1,m))).language=f,c.relevance>r.relevance&&(r=c),c.relevance>n.relevance&&(r=n,n=c));return r.language&&(n.secondBest=r),n}function T(t,e){var n,r,o,c,map=t;for(n in e&&((map={})[t]=e),map)for(o=(r="string"==typeof(r=map[n])?[r]:r).length,c=-1;++c<o;)A[r[c]]=n}function R(t,e,n,r,c){var f,h,d,v,E,O,A,T,B={},P={},I=[],L="",j=0;if("string"!=typeof t)throw o("Expected `string` for name, got `%s`",t);if("string"!=typeof e)throw o("Expected `string` for value, got `%s`",e);if(f=_(t),d=h=c||f,v=T=[],!f)throw o("Unknown language: `%s` is not registered",t);!function(t){function e(r,o){r.compiled||(r.compiled=!0,r.keywords=r.keywords||r.beginKeywords,r.keywords&&(r.keywords=function(t,e){var n,r={};if("string"==typeof t)o("keyword",t);else for(n in t)o(n,t[n]);return r;function o(t,n){!function(t,e){var n,o=e.length,c=-1;for(;++c<o;)n=e[c].split(C),r[n[0]]=[t,Number(n[1])||D(n[0])?0:1]}(t,(e?n.toLowerCase():n).split(w))}}(r.keywords,t[m])),r.lexemesRe=n(r.lexemes||/\w+/,!0),o&&(r.beginKeywords&&(r.begin="\\b("+r.beginKeywords.split(w).join(C)+")\\b"),r.begin||(r.begin=/\B|\b/),r.beginRe=n(r.begin),r.endSameAsBegin&&(r.end=r.begin),r.end||r.endsWithParent||(r.end=/\B|\b/),r.end&&(r.endRe=n(r.end)),r[y]=source(r.end)||"",r.endsWithParent&&o[y]&&(r[y]+=(r.end?C:"")+o[y])),r.illegal&&(r.illegalRe=n(r.illegal)),void 0===r.relevance&&(r.relevance=1),r.contains=function(t,n){var r,o=[],c=t.length,f=-1;for(;++f<c;)r=t[f],o=o.concat(F("self"===r?n:r));c=o.length,f=-1;for(;++f<c;)e(o[f],n);return o}(r.contains||[],r),r.starts&&e(r.starts,o),r.terminators=function(t){var e,r,o={},c=[],f={},h=1,l=t.contains,d=l.length,m=-1,v=[];for(;++m<d;)w(r=l[m],r.beginKeywords?"\\.?(?:"+r.begin+")\\.?":r.begin);t[y]&&w("end",t[y]);t.illegal&&w("illegal",t.illegal);d=c.length,m=-1;for(;++m<d;)v[m]=c[m][1];return e=n(function(t,e){var n,r,o,c,f=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9]\d*)|\\./,h=0,l="",d=t.length,m=-1;for(;++m<d;){for(n=t[m],o=source(n),r=h+=1,0!==m&&(l+=e),l+=S;o.length>0;){if(null===(c=f.exec(o))){l+=o;break}l+=o.slice(0,c.index),o=o.slice(c.index+c[0].length),c[0][0]===x&&c[1]?l+=x+String(Number(c[1])+r):(l+=c[0],c[0]===S&&h++)}l+=k}return l}(v,C),!0),f={lastIndex:0,exec:function(n){var r,h,l,d;if(0===c.length)return null;if(e.lastIndex=f.lastIndex,!(d=e.exec(n)))return null;r=d.length,h=-1;for(;++h<r;)if(void 0!==d[h]&&void 0!==o[h]){l=o[h];break}"string"==typeof l?(d.type=l,d.extra=[t.illegal,t.terminator_end]):(d.type="begin",d.rule=l);return d}};function w(t,e){o[h]=t,c.push([t,e]),h+=new RegExp(e.toString()+C).exec("").length}}(r))}function n(e,n){return new RegExp(source(e),"m"+(t[m]?"i":"")+(n?"g":""))}function source(t){return t&&t.source||t}e(t)}(f);try{for(h.terminators.lastIndex=0,E=0,A=h.terminators.exec(e);A;)O=V(e.slice(E,A.index),A),E=A.index+O,h.terminators.lastIndex=E,A=h.terminators.exec(e);for(V(e.slice(E)),d=h;d.parent;)d.className&&G(),d=d.parent;return{relevance:j,value:v,illegal:!1,language:t,top:h}}catch(t){if(-1===t.message.indexOf("Illegal"))throw t;return{relevance:0,illegal:!0,value:W(e,[])}}function z(t){var e=t[0],n=t.rule;return n&&n.endSameAsBegin&&(n.endRe=function(t){return new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")}(e)),n.skip?L+=e:(n.excludeBegin&&(L+=e),H(J(),v),n.returnBegin||n.excludeBegin||(L=e)),$(n),n.returnBegin?0:e.length}function U(t){var n=t[0],r=e.slice(t.index),o=function t(e,n){if(function(t,e){var n=t&&t.exec(e);return n&&0===n.index}(e.endRe,n)){for(;e.endsParent&&e.parent;)e=e.parent;return e}if(e.endsWithParent)return t(e.parent,n)}(h,r);if(o){var c=h;c.skip?L+=n:(c.returnEnd||c.excludeEnd||(L+=n),H(J(),v),c.excludeEnd&&(L=n));do{h.className&&G(),h.skip||h.subLanguage||(j+=h.relevance),h=h.parent}while(h!==o.parent);return o.starts&&(o.endSameAsBegin&&(o.starts.endRe=o.endRe),$(o.starts)),c.returnEnd?0:n.length}}function V(t,r){var c,f=r&&r[0];if(L+=t,void 0===f)return H(J(),v),0;if("begin"===B.type&&"end"===r.type&&B.index===r.index&&""===f)return L+=e.slice(r.index,r.index+1),1;if(B=r,"begin"===r.type)return z(r);if("end"===r.type&&void 0!==(c=U(r)))return c;if("illegal"===r.type&&!n)throw o('Illegal lexeme "%s" for mode "%s"',f,h.className||"<unnamed>");return L+=f,f.length}function $(t){var e;t.className&&(e=Y(t.className,[])),e&&(v.push(e),I.push(v),v=e.children),h=Object.create(t,{parent:{value:h}})}function J(){var t=h.subLanguage?function(){var t,e="string"==typeof h.subLanguage;if(e&&!M[h.subLanguage])return W(L,[]);t=e?R(h.subLanguage,L,!0,r,P[h.subLanguage]):N(L,{subset:0===h.subLanguage.length?void 0:h.subLanguage,prefix:r});if(!t.language)return[K(L)];h.relevance>0&&(j+=t.relevance);e&&(P[h.subLanguage]=t.top);return[Y(t.language,t.value,!0)]}():function(){var t,e,n,r,o=[];if(!h.keywords)return W(L,o);t=0,h.lexemesRe.lastIndex=0,e=h.lexemesRe.exec(L);for(;e;)W(L.slice(t,e.index),o),(r=X(h,e))?(j+=r[1],n=Y(r[0],[]),o.push(n),W(e[0],n.children)):W(e[0],o),t=h.lexemesRe.lastIndex,e=h.lexemesRe.exec(L);return W(L.slice(t),o),o}();return L="",t}function H(t,e){for(var n,r=t.length,o=-1;++o<r;)"text"===(n=t[o]).type?W(n.value,e):e.push(n)}function W(t,e){var n;return t&&((n=e[e.length-1])&&"text"===n.type?n.value+=t:e.push(K(t))),e}function K(t){return{type:"text",value:t}}function Y(t,e,n){return{type:"element",tagName:"span",properties:{className:[(n?"":r)+t]},children:e}}function X(t,e){var n=e[0];return f[m]&&(n=n.toLowerCase()),l.call(t.keywords,n)&&t.keywords[n]}function G(){v=I.pop()||T}}function D(t){return-1!==E.indexOf(t.toLowerCase())}function F(t){var e,n,r,o;if(t.variants&&!t[v]){for(e=(r=t.variants).length,n=-1,o=[];++n<e;)o[n]=h(t,{variants:null},r[n]);t[v]=o}return t.cached_variants?t.cached_variants:function t(e){return!!e&&(e.endsWithParent||t(e.starts))}(t)?[h(t,{starts:t.starts?h(t.starts):null})]:[t]}function B(t){return{relevance:t.relevance||0,language:t.language||null,value:t.value||[]}}function _(t){return t=t.toLowerCase(),M[t]||M[A[t]]}},261:function(t,e,n){var r,o,c;o=function(t){var e,n=[],r=Object.keys,o={},c={},f=/^(no-?highlight|plain|text)$/i,h=/\blang(?:uage)?-([\w-]+)\b/i,l=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,d="</span>",m={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},v="of and for in not or if then".split(" ");function y(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function w(t){return t.nodeName.toLowerCase()}function C(t){return f.test(t)}function S(t){var e,n={},r=Array.prototype.slice.call(arguments,1);for(e in t)n[e]=t[e];return r.forEach((function(t){for(e in t)n[e]=t[e]})),n}function k(t){var e=[];return function t(n,r){for(var o=n.firstChild;o;o=o.nextSibling)3===o.nodeType?r+=o.nodeValue.length:1===o.nodeType&&(e.push({event:"start",offset:r,node:o}),r=t(o,r),w(o).match(/br|hr|img|input/)||e.push({event:"stop",offset:r,node:o}));return r}(t,0),e}function x(t){return t.variants&&!t.cached_variants&&(t.cached_variants=t.variants.map((function(e){return S(t,{variants:null},e)}))),t.cached_variants?t.cached_variants:function t(e){return!!e&&(e.endsWithParent||t(e.starts))}(t)?[S(t,{starts:t.starts?S(t.starts):null})]:[t]}function E(t){if(e&&!t.langApiRestored){for(var n in t.langApiRestored=!0,e)t[n]&&(t[e[n]]=t[n]);(t.contains||[]).concat(t.variants||[]).forEach(E)}}function O(t,e){return e?Number(e):(n=t,-1!=v.indexOf(n.toLowerCase())?0:1);var n}function M(t){function e(t){return t&&t.source||t}function n(n,r){return new RegExp(e(n),"m"+(t.case_insensitive?"i":"")+(r?"g":""))}function o(t){var r,o,c={},f=[],h={},l=1;function d(t,e){c[l]=t,f.push([t,e]),l+=function(t){return new RegExp(t.toString()+"|").exec("").length-1}(e)+1}for(var i=0;i<t.contains.length;i++)d(o=t.contains[i],o.beginKeywords?"\\.?(?:"+o.begin+")\\.?":o.begin);t.terminator_end&&d("end",t.terminator_end),t.illegal&&d("illegal",t.illegal);var m=f.map((function(t){return t[1]}));return r=n(function(t,n){for(var r=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,o=0,c="",i=0;i<t.length;i++){var f=o+=1,h=e(t[i]);for(i>0&&(c+=n),c+="(";h.length>0;){var l=r.exec(h);if(null==l){c+=h;break}c+=h.substring(0,l.index),h=h.substring(l.index+l[0].length),"\\"==l[0][0]&&l[1]?c+="\\"+String(Number(l[1])+f):(c+=l[0],"("==l[0]&&o++)}c+=")"}return c}(m,"|"),!0),h.lastIndex=0,h.exec=function(s){var e;if(0===f.length)return null;r.lastIndex=h.lastIndex;var n=r.exec(s);if(!n)return null;for(var i=0;i<n.length;i++)if(null!=n[i]&&null!=c[""+i]){e=c[""+i];break}return"string"==typeof e?(n.type=e,n.extra=[t.illegal,t.terminator_end]):(n.type="begin",n.rule=e),n},h}!function c(f,h){f.compiled||(f.compiled=!0,f.keywords=f.keywords||f.beginKeywords,f.keywords&&(f.keywords=function(t,e){var n={};return"string"==typeof t?o("keyword",t):r(t).forEach((function(e){o(e,t[e])})),n;function o(t,r){e&&(r=r.toLowerCase()),r.split(" ").forEach((function(e){var r=e.split("|");n[r[0]]=[t,O(r[0],r[1])]}))}}(f.keywords,t.case_insensitive)),f.lexemesRe=n(f.lexemes||/\w+/,!0),h&&(f.beginKeywords&&(f.begin="\\b("+f.beginKeywords.split(" ").join("|")+")\\b"),f.begin||(f.begin=/\B|\b/),f.beginRe=n(f.begin),f.endSameAsBegin&&(f.end=f.begin),f.end||f.endsWithParent||(f.end=/\B|\b/),f.end&&(f.endRe=n(f.end)),f.terminator_end=e(f.end)||"",f.endsWithParent&&h.terminator_end&&(f.terminator_end+=(f.end?"|":"")+h.terminator_end)),f.illegal&&(f.illegalRe=n(f.illegal)),null==f.relevance&&(f.relevance=1),f.contains||(f.contains=[]),f.contains=Array.prototype.concat.apply([],f.contains.map((function(t){return x("self"===t?f:t)}))),f.contains.forEach((function(t){c(t,f)})),f.starts&&c(f.starts,h),f.terminators=o(f))}(t)}function A(t,e,n,r){function c(t,e){var n=k.case_insensitive?e[0].toLowerCase():e[0];return t.keywords.hasOwnProperty(n)&&t.keywords[n]}function f(t,e,n,r){if(!n&&""===e)return"";if(!t)return e;var o='<span class="'+(r?"":m.classPrefix);return(o+=t+'">')+e+(n?"":d)}function h(){T+=null!=E.subLanguage?function(){var t="string"==typeof E.subLanguage;if(t&&!o[E.subLanguage])return y(R);var e=t?A(E.subLanguage,R,!0,O[E.subLanguage]):N(R,E.subLanguage.length?E.subLanguage:void 0);return E.relevance>0&&(D+=e.relevance),t&&(O[E.subLanguage]=e.top),f(e.language,e.value,!1,!0)}():function(){var t,e,n,r;if(!E.keywords)return y(R);for(r="",e=0,E.lexemesRe.lastIndex=0,n=E.lexemesRe.exec(R);n;)r+=y(R.substring(e,n.index)),(t=c(E,n))?(D+=t[1],r+=f(t[0],y(n[0]))):r+=y(n[0]),e=E.lexemesRe.lastIndex,n=E.lexemesRe.exec(R);return r+y(R.substr(e))}(),R=""}function l(t){T+=t.className?f(t.className,"",!0):"",E=Object.create(t,{parent:{value:E}})}function v(t){var e=t[0],n=t.rule;return n&&n.endSameAsBegin&&(n.endRe=function(t){return new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")}(e)),n.skip?R+=e:(n.excludeBegin&&(R+=e),h(),n.returnBegin||n.excludeBegin||(R=e)),l(n),n.returnBegin?0:e.length}function w(t){var e=t[0],n=function t(e,n){if(function(t,e){var n=t&&t.exec(e);return n&&0===n.index}(e.endRe,n)){for(;e.endsParent&&e.parent;)e=e.parent;return e}if(e.endsWithParent)return t(e.parent,n)}(E,e);if(n){var r=E;r.skip?R+=e:(r.returnEnd||r.excludeEnd||(R+=e),h(),r.excludeEnd&&(R=e));do{E.className&&(T+=d),E.skip||E.subLanguage||(D+=E.relevance),E=E.parent}while(E!==n.parent);return n.starts&&(n.endSameAsBegin&&(n.starts.endRe=n.endRe),l(n.starts)),r.returnEnd?0:e.length}}var C={};function S(t,r){var o=r&&r[0];if(R+=t,null==o)return h(),0;if("begin"==C.type&&"end"==r.type&&C.index==r.index&&""===o)return R+=e.slice(r.index,r.index+1),1;if(C=r,"begin"===r.type)return v(r);if("illegal"===r.type&&!n)throw new Error('Illegal lexeme "'+o+'" for mode "'+(E.className||"<unnamed>")+'"');if("end"===r.type){var c=w(r);if(null!=c)return c}return R+=o,o.length}var k=F(t);if(!k)throw new Error('Unknown language: "'+t+'"');M(k);var x,E=r||k,O={},T="";for(x=E;x!==k;x=x.parent)x.className&&(T=f(x.className,"",!0)+T);var R="",D=0;try{for(var B,_,P=0;E.terminators.lastIndex=P,B=E.terminators.exec(e);)_=S(e.substring(P,B.index),B),P=B.index+_;for(S(e.substr(P)),x=E;x.parent;x=x.parent)x.className&&(T+=d);return{relevance:D,value:T,illegal:!1,language:t,top:E}}catch(t){if(t.message&&-1!==t.message.indexOf("Illegal"))return{illegal:!0,relevance:0,value:y(e)};throw t}}function N(text,t){t=t||m.languages||r(o);var e={relevance:0,value:y(text)},n=e;return t.filter(F).filter(B).forEach((function(t){var r=A(t,text,!1);r.language=t,r.relevance>n.relevance&&(n=r),r.relevance>e.relevance&&(n=e,e=r)})),n.language&&(e.second_best=n),e}function T(t){return m.tabReplace||m.useBR?t.replace(l,(function(t,e){return m.useBR&&"\n"===t?"<br>":m.tabReplace?e.replace(/\t/g,m.tabReplace):""})):t}function R(t){var e,r,o,f,text,l=function(t){var i,e,n,r,o=t.className+" ";if(o+=t.parentNode?t.parentNode.className:"",e=h.exec(o))return F(e[1])?e[1]:"no-highlight";for(i=0,n=(o=o.split(/\s+/)).length;i<n;i++)if(C(r=o[i])||F(r))return r}(t);C(l)||(m.useBR?(e=document.createElementNS("http://www.w3.org/1999/xhtml","div")).innerHTML=t.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n"):e=t,text=e.textContent,o=l?A(l,text,!0):N(text),(r=k(e)).length&&((f=document.createElementNS("http://www.w3.org/1999/xhtml","div")).innerHTML=o.value,o.value=function(t,e,r){var o=0,c="",f=[];function h(){return t.length&&e.length?t[0].offset!==e[0].offset?t[0].offset<e[0].offset?t:e:"start"===e[0].event?t:e:t.length?t:e}function l(t){c+="<"+w(t)+n.map.call(t.attributes,(function(a){return" "+a.nodeName+'="'+y(a.value).replace('"',"&quot;")+'"'})).join("")+">"}function d(t){c+="</"+w(t)+">"}function m(t){("start"===t.event?l:d)(t.node)}for(;t.length||e.length;){var v=h();if(c+=y(r.substring(o,v[0].offset)),o=v[0].offset,v===t){f.reverse().forEach(d);do{m(v.splice(0,1)[0]),v=h()}while(v===t&&v.length&&v[0].offset===o);f.reverse().forEach(l)}else"start"===v[0].event?f.push(v[0].node):f.pop(),m(v.splice(0,1)[0])}return c+y(r.substr(o))}(r,k(f),text)),o.value=T(o.value),t.innerHTML=o.value,t.className=function(t,e,n){var r=e?c[e]:n,o=[t.trim()];return t.match(/\bhljs\b/)||o.push("hljs"),-1===t.indexOf(r)&&o.push(r),o.join(" ").trim()}(t.className,l,o.language),t.result={language:o.language,re:o.relevance},o.second_best&&(t.second_best={language:o.second_best.language,re:o.second_best.relevance}))}function D(){if(!D.called){D.called=!0;var t=document.querySelectorAll("pre code");n.forEach.call(t,R)}}function F(t){return t=(t||"").toLowerCase(),o[t]||o[c[t]]}function B(t){var e=F(t);return e&&!e.disableAutodetect}return t.highlight=A,t.highlightAuto=N,t.fixMarkup=T,t.highlightBlock=R,t.configure=function(t){m=S(m,t)},t.initHighlighting=D,t.initHighlightingOnLoad=function(){addEventListener("DOMContentLoaded",D,!1),addEventListener("load",D,!1)},t.registerLanguage=function(e,n){var r=o[e]=n(t);E(r),r.rawDefinition=n.bind(null,t),r.aliases&&r.aliases.forEach((function(t){c[t]=e}))},t.listLanguages=function(){return r(o)},t.getLanguage=F,t.autoDetection=B,t.inherit=S,t.IDENT_RE="[a-zA-Z]\\w*",t.UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",t.NUMBER_RE="\\b\\d+(\\.\\d+)?",t.C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",t.BINARY_NUMBER_RE="\\b(0b[01]+)",t.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",t.BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},t.APOS_STRING_MODE={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},t.QUOTE_STRING_MODE={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},t.PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},t.COMMENT=function(e,n,r){var o=t.inherit({className:"comment",begin:e,end:n,contains:[]},r||{});return o.contains.push(t.PHRASAL_WORDS_MODE),o.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|XXX):",relevance:0}),o},t.C_LINE_COMMENT_MODE=t.COMMENT("//","$"),t.C_BLOCK_COMMENT_MODE=t.COMMENT("/\\*","\\*/"),t.HASH_COMMENT_MODE=t.COMMENT("#","$"),t.NUMBER_MODE={className:"number",begin:t.NUMBER_RE,relevance:0},t.C_NUMBER_MODE={className:"number",begin:t.C_NUMBER_RE,relevance:0},t.BINARY_NUMBER_MODE={className:"number",begin:t.BINARY_NUMBER_RE,relevance:0},t.CSS_NUMBER_MODE={className:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},t.REGEXP_MODE={className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[t.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[t.BACKSLASH_ESCAPE]}]},t.TITLE_MODE={className:"title",begin:t.IDENT_RE,relevance:0},t.UNDERSCORE_TITLE_MODE={className:"title",begin:t.UNDERSCORE_IDENT_RE,relevance:0},t.METHOD_GUARD={begin:"\\.\\s*"+t.UNDERSCORE_IDENT_RE,relevance:0},t},c="object"==typeof window&&window||"object"==typeof self&&self,e.nodeType?c&&(c.hljs=o({}),void 0===(r=function(){return c.hljs}.apply(e,[]))||(t.exports=r)):o(e)},262:function(t,e,n){"use strict";var r=n(263),o=c(Error);function c(t){return e.displayName=t.displayName||t.name,e;function e(e){return e&&(e=r.apply(null,arguments)),new t(e)}}t.exports=o,o.eval=c(EvalError),o.range=c(RangeError),o.reference=c(ReferenceError),o.syntax=c(SyntaxError),o.type=c(TypeError),o.uri=c(URIError),o.create=c},263:function(t,e,n){!function(){var e;function n(t){for(var e,n,r,o,c=1,f=[].slice.call(arguments),i=0,h=t.length,l="",d=!1,m=!1,v=function(){return f[c++]},y=function(){for(var n="";/\d/.test(t[i]);)n+=t[i++],e=t[i];return n.length>0?parseInt(n):null};i<h;++i)if(e=t[i],d)switch(d=!1,"."==e?(m=!1,e=t[++i]):"0"==e&&"."==t[i+1]?(m=!0,e=t[i+=2]):m=!0,o=y(),e){case"b":l+=parseInt(v(),10).toString(2);break;case"c":l+="string"==typeof(n=v())||n instanceof String?n:String.fromCharCode(parseInt(n,10));break;case"d":l+=parseInt(v(),10);break;case"f":r=String(parseFloat(v()).toFixed(o||6)),l+=m?r:r.replace(/^0/,"");break;case"j":l+=JSON.stringify(v());break;case"o":l+="0"+parseInt(v(),10).toString(8);break;case"s":l+=v();break;case"x":l+="0x"+parseInt(v(),10).toString(16);break;case"X":l+="0x"+parseInt(v(),10).toString(16).toUpperCase();break;default:l+=e}else"%"===e?d=!0:l+=e;return l}(e=t.exports=n).format=n,e.vsprintf=function(t,e){return n.apply(null,[t].concat(e))},"undefined"!=typeof console&&"function"==typeof console.log&&(e.printf=function(){console.log(n.apply(null,arguments))})}()},270:function(t,e,n){"use strict";n.d(e,"a",(function(){return io})),n.d(e,"b",(function(){return so})),n.d(e,"c",(function(){return co})),n.d(e,"d",(function(){return to})),n.d(e,"e",(function(){return eo})),n.d(e,"f",(function(){return uo})),n.d(e,"g",(function(){return ao}));var r=n(203),o=n(218),c=n(260),f=n.n(c),h=n(181),l=n(182),d=65535,m=Math.pow(2,16);function v(t){return t&d}var y=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},w=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};w.prototype.recover=function(t){var e=0,n=v(t);if(!this.inverted)for(var i=0;i<n;i++)e+=this.ranges[3*i+2]-this.ranges[3*i+1];return this.ranges[3*n]+e+function(t){return(t-(t&d))/m}(t)},w.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},w.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},w.prototype._map=function(t,e,n){for(var r=0,o=this.inverted?2:1,c=this.inverted?1:2,i=0;i<this.ranges.length;i+=3){var f=this.ranges[i]-(this.inverted?r:0);if(f>t)break;var h=this.ranges[i+o],l=this.ranges[i+c],d=f+h;if(t<=d){var v=f+r+((h?t==f?-1:t==d?1:e:e)<0?0:l);if(n)return v;var w=i/3+(t-f)*m;return new y(v,e<0?t!=f:t!=d,w)}r+=l-h}return n?t+r:new y(t+r)},w.prototype.touches=function(t,e){for(var n=0,r=v(e),o=this.inverted?2:1,c=this.inverted?1:2,i=0;i<this.ranges.length;i+=3){var f=this.ranges[i]-(this.inverted?n:0);if(f>t)break;var h=this.ranges[i+o];if(t<=f+h&&i==3*r)return!0;n+=this.ranges[i+c]-h}return!1},w.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,i=0,r=0;i<this.ranges.length;i+=3){var o=this.ranges[i],c=o-(this.inverted?r:0),f=o+(this.inverted?0:r),h=this.ranges[i+e],l=this.ranges[i+n];t(c,c+h,f,f+l),r+=l-h}},w.prototype.invert=function(){return new w(this.ranges,!this.inverted)},w.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},w.offset=function(t){return 0==t?w.empty:new w(t<0?[0,-t,0]:[0,0,t])},w.empty=new w([]);var C=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function S(t){var e=Error.call(this,t);return e.__proto__=S.prototype,e}C.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new C(this.maps,this.mirror,t,e)},C.prototype.copy=function(){return new C(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},C.prototype.appendMap=function(map,t){this.to=this.maps.push(map),null!=t&&this.setMirror(this.maps.length-1,t)},C.prototype.appendMapping=function(t){for(var i=0,e=this.maps.length;i<t.maps.length;i++){var n=t.getMirror(i);this.appendMap(t.maps[i],null!=n&&n<i?e+n:null)}},C.prototype.getMirror=function(t){if(this.mirror)for(var i=0;i<this.mirror.length;i++)if(this.mirror[i]==t)return this.mirror[i+(i%2?-1:1)]},C.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},C.prototype.appendMappingInverted=function(t){for(var i=t.maps.length-1,e=this.maps.length+t.maps.length;i>=0;i--){var n=t.getMirror(i);this.appendMap(t.maps[i].invert(),null!=n&&n>i?e-n-1:null)}},C.prototype.invert=function(){var t=new C;return t.appendMappingInverted(this),t},C.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var i=this.from;i<this.to;i++)t=this.maps[i].map(t,e);return t},C.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},C.prototype._map=function(t,e,n){for(var r=!1,o=null,i=this.from;i<this.to;i++){var map=this.maps[i],c=o&&o[i];if(null!=c&&map.touches(t,c))t=map.recover(c);else{var f=map.mapResult(t,e);if(null!=f.recover){var h=this.getMirror(i);if(null!=h&&h>i&&h<this.to){if(f.deleted){i=h,t=this.maps[h].recover(f.recover);continue}(o||(o=Object.create(null)))[h]=f.recover}}f.deleted&&(r=!0),t=f.pos}}return n?t:new y(t,r)},S.prototype=Object.create(Error.prototype),S.prototype.constructor=S,S.prototype.name="TransformError";var k=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new C},x={before:{configurable:!0},docChanged:{configurable:!0}};function E(){throw new Error("Override me")}x.before.get=function(){return this.docs.length?this.docs[0]:this.doc},k.prototype.step=function(object){var t=this.maybeStep(object);if(t.failed)throw new S(t.failed);return this},k.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},x.docChanged.get=function(){return this.steps.length>0},k.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(k.prototype,x);var O=Object.create(null),M=function(){};M.prototype.apply=function(t){return E()},M.prototype.getMap=function(){return w.empty},M.prototype.invert=function(t){return E()},M.prototype.map=function(t){return E()},M.prototype.merge=function(t){return null},M.prototype.toJSON=function(){return E()},M.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=O[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},M.jsonID=function(t,e){if(t in O)throw new RangeError("Duplicate use of step JSON ID "+t);return O[t]=e,e.prototype.jsonID=t,e};var A=function(t,e){this.doc=t,this.failed=e};A.ok=function(t){return new A(t,null)},A.fail=function(t){return new A(null,t)},A.fromReplace=function(t,e,n,r){try{return A.ok(t.replace(e,n,r))}catch(t){if(t instanceof l.ReplaceError)return A.fail(t.message);throw t}};var N=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&R(t,this.from,this.to)?A.fail("Structure replace would overwrite content"):A.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new w([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?l.Slice.empty:new l.Slice(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var r=this.slice.size+t.slice.size==0?l.Slice.empty:new l.Slice(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),r,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,l.Slice.fromJSON(t,n.slice),!!n.structure)},e}(M);M.jsonID("replace",N);var T=function(t){function e(e,n,r,o,c,f,h){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=c,this.insert=f,this.structure=!!h}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(R(t,this.from,this.gapFrom)||R(t,this.gapTo,this.to)))return A.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return A.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?A.fromReplace(t,this.from,this.to,n):A.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new w([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),c=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||c>r.pos?null:new e(n.pos,r.pos,o,c,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,l.Slice.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(M);function R(t,e,n){for(var r=t.resolve(e),o=n-e,c=r.depth;o>0&&c>0&&r.indexAfter(c)==r.node(c).childCount;)c--,o--;if(o>0)for(var f=r.node(c).maybeChild(r.indexAfter(c));o>0;){if(!f||f.isLeaf)return!0;f=f.firstChild,o--}return!1}function D(t,e,n){for(var r=[],i=0;i<t.childCount;i++){var o=t.child(i);o.content.size&&(o=o.copy(D(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return l.Fragment.fromArray(r)}M.jsonID("replaceAround",T),k.prototype.lift=function(t,e){for(var n=t.$from,r=t.$to,o=t.depth,c=n.before(o+1),f=r.after(o+1),h=c,d=f,m=l.Fragment.empty,v=0,y=o,w=!1;y>e;y--)w||n.index(y)>0?(w=!0,m=l.Fragment.from(n.node(y).copy(m)),v++):h--;for(var C=l.Fragment.empty,S=0,k=o,x=!1;k>e;k--)x||r.after(k+1)<r.end(k)?(x=!0,C=l.Fragment.from(r.node(k).copy(C)),S++):d++;return this.step(new T(h,d,c,f,new l.Slice(m.append(C),v,S),m.size-v,!0))},k.prototype.wrap=function(t,e){for(var content=l.Fragment.empty,i=e.length-1;i>=0;i--)content=l.Fragment.from(e[i].type.create(e[i].attrs,content));var n=t.start,r=t.end;return this.step(new T(n,r,n,r,new l.Slice(content,0,0),e.length,!0))},k.prototype.setBlockType=function(t,e,n,r){var o=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var c=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,r)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(o.doc,o.mapping.slice(c).map(e),n)){o.clearIncompatible(o.mapping.slice(c).map(e,1),n);var f=o.mapping.slice(c),h=f.map(e,1),d=f.map(e+t.nodeSize,1);return o.step(new T(h,d,h+1,d-1,new l.Slice(l.Fragment.from(n.create(r,null,t.marks)),0,0),1,!0)),!1}})),this},k.prototype.setNodeMarkup=function(t,e,n,r){var o=this.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);var c=e.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(t,t+o.nodeSize,c);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new T(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new l.Slice(l.Fragment.from(c),0,0),1,!0))},k.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var r=this.doc.resolve(t),o=l.Fragment.empty,c=l.Fragment.empty,f=r.depth,h=r.depth-e,i=e-1;f>h;f--,i--){o=l.Fragment.from(r.node(f).copy(o));var d=n&&n[i];c=l.Fragment.from(d?d.type.create(d.attrs,c):r.node(f).copy(c))}return this.step(new N(t,t,new l.Slice(o.append(c),e,e),!0))},k.prototype.join=function(t,e){void 0===e&&(e=1);var n=new N(t-e,t+e,l.Slice.empty,!0);return this.step(n)};var F=function(t){function e(e,n,mark){t.call(this),this.from=e,this.to=n,this.mark=mark}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),c=new l.Slice(D(n.content,(function(t,n){return n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),o),n.openStart,n.openEnd);return A.fromReplace(t,this.from,this.to,c)},e.prototype.invert=function(){return new B(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(M);M.jsonID("addMark",F);var B=function(t){function e(e,n,mark){t.call(this),this.from=e,this.to=n,this.mark=mark}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=new l.Slice(D(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return A.fromReplace(t,this.from,this.to,r)},e.prototype.invert=function(){return new F(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(M);function _(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}M.jsonID("removeMark",B),k.prototype.addMark=function(t,e,mark){var n=this,r=[],o=[],c=null,f=null;return this.doc.nodesBetween(t,e,(function(n,h,l){if(n.isInline){var d=n.marks;if(!mark.isInSet(d)&&l.type.allowsMarkType(mark.type)){for(var m=Math.max(h,t),v=Math.min(h+n.nodeSize,e),y=mark.addToSet(d),i=0;i<d.length;i++)d[i].isInSet(y)||(c&&c.to==m&&c.mark.eq(d[i])?c.to=v:r.push(c=new B(m,v,d[i])));f&&f.to==m?f.to=v:o.push(f=new F(m,v,mark))}}})),r.forEach((function(s){return n.step(s)})),o.forEach((function(s){return n.step(s)})),this},k.prototype.removeMark=function(t,e,mark){var n=this;void 0===mark&&(mark=null);var r=[],o=0;return this.doc.nodesBetween(t,e,(function(n,c){if(n.isInline){o++;var f=null;if(mark instanceof l.MarkType){var h=mark.isInSet(n.marks);h&&(f=[h])}else mark?mark.isInSet(n.marks)&&(f=[mark]):f=n.marks;if(f&&f.length)for(var d=Math.min(c+n.nodeSize,e),i=0;i<f.length;i++){for(var style=f[i],m=void 0,v=0;v<r.length;v++){var y=r[v];y.step==o-1&&style.eq(r[v].style)&&(m=y)}m?(m.to=d,m.step=o):r.push({style:style,from:Math.max(c,t),to:d,step:o})}}})),r.forEach((function(t){return n.step(new B(t.from,t.to,t.style))})),this},k.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var r=this.doc.nodeAt(t),o=[],c=t+1,i=0;i<r.childCount;i++){var f=r.child(i),h=c+f.nodeSize,d=n.matchType(f.type,f.attrs);if(d){n=d;for(var m=0;m<f.marks.length;m++)e.allowsMarkType(f.marks[m].type)||this.step(new B(c,h,f.marks[m]))}else o.push(new N(c,h,l.Slice.empty));c=h}if(!n.validEnd){var v=n.fillBefore(l.Fragment.empty,!0);this.replace(c,c,new l.Slice(v,0,0))}for(var y=o.length-1;y>=0;y--)this.step(o[y]);return this},k.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=l.Slice.empty);var r=function(t,e,n,r){if(void 0===n&&(n=e),void 0===r&&(r=l.Slice.empty),e==n&&!r.size)return null;var o=t.resolve(e),c=t.resolve(n);return _(o,c,r)?new N(e,n,r):new P(o,c,r).fit()}(this.doc,t,e,n);return r&&this.step(r),this},k.prototype.replaceWith=function(t,e,content){return this.replace(t,e,new l.Slice(l.Fragment.from(content),0,0))},k.prototype.delete=function(t,e){return this.replace(t,e,l.Slice.empty)},k.prototype.insert=function(t,content){return this.replaceWith(t,t,content)};var P=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var i=0;i<=t.depth;i++){var r=t.node(i);this.frontier.push({type:r.type,match:r.contentMatchAt(t.indexAfter(i))})}this.placed=l.Fragment.empty;for(var o=t.depth;o>0;o--)this.placed=l.Fragment.from(t.node(o).copy(this.placed))},I={depth:{configurable:!0}};function L(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(L(t.firstChild.content,e-1,n)))}function j(t,e,content){return 0==e?t.append(content):t.replaceChild(t.childCount-1,t.lastChild.copy(j(t.lastChild.content,e-1,content)))}function z(t,e){for(var i=0;i<e;i++)t=t.firstChild.content;return t}function U(t,e,n){if(e<=0)return t;var r=t.content;return e>1&&(r=r.replaceChild(0,U(r.firstChild,e-1,1==r.childCount?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(l.Fragment.empty,!0)))),t.copy(r)}function V(t,e,n,r,o){var c=t.node(e),f=o?t.indexAfter(e):t.index(e);if(f==c.childCount&&!n.compatibleContent(c.type))return null;var h=r.fillBefore(c.content,!0,f);return h&&!function(t,e,n){for(var i=n;i<e.childCount;i++)if(!t.allowsMarks(e.child(i).marks))return!0;return!1}(n,c.content,f)?h:null}function $(t,e,n,r,o){if(e<n){var c=t.firstChild;t=t.replaceChild(0,c.copy($(c.content,e+1,n,r,c)))}if(e>r){var f=o.contentMatchAt(0),h=f.fillBefore(t).append(t);t=h.append(f.matchFragment(h).fillBefore(l.Fragment.empty,!0))}return t}function J(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;o==e.start(r)&&n.push(r)}return n}I.depth.get=function(){return this.frontier.length-1},P.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=e<0?this.$to:r.doc.resolve(e);if(this.close(o)){for(var content=this.placed,c=r.depth,f=o.depth;c&&f&&1==content.childCount;)content=content.firstChild.content,c--,f--;var h=new l.Slice(content,c,f);if(e>-1)return new T(r.pos,e,this.$to.pos,this.$to.end(),h,n);if(h.size||r.pos!=this.$to.pos)return new N(r.pos,o.pos,h)}return null},P.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var n=void 0,r=(e?(n=z(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,o=this.depth;o>=0;o--){var c=this.frontier[o],f=c.type,h=c.match,d=void 0,m=void 0;if(1==t&&(r?h.matchType(r.type)||(m=h.fillBefore(l.Fragment.from(r),!1)):f.compatibleContent(n.type)))return{sliceDepth:e,frontierDepth:o,parent:n,inject:m};if(2==t&&r&&(d=h.findWrapping(r.type)))return{sliceDepth:e,frontierDepth:o,parent:n,wrap:d};if(n&&h.matchType(n.type))break}},P.prototype.openMore=function(){var t=this.unplaced,content=t.content,e=t.openStart,n=t.openEnd,r=z(content,e);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new l.Slice(content,e+1,Math.max(n,r.size+e>=content.size-n?e+1:0)),!0)},P.prototype.dropNode=function(){var t=this.unplaced,content=t.content,e=t.openStart,n=t.openEnd,r=z(content,e);if(r.childCount<=1&&e>0){var o=content.size-e<=e+r.size;this.unplaced=new l.Slice(L(content,e-1,1),e-1,o?e-1:n)}else this.unplaced=new l.Slice(L(content,e,1),e,n)},P.prototype.placeNodes=function(t){for(var e=t.sliceDepth,n=t.frontierDepth,r=t.parent,o=t.inject,c=t.wrap;this.depth>n;)this.closeFrontierNode();if(c)for(var i=0;i<c.length;i++)this.openFrontierNode(c[i]);var f=this.unplaced,h=r?r.content:f.content,d=f.openStart-e,m=0,v=[],y=this.frontier[n],w=y.match,C=y.type;if(o){for(var S=0;S<o.childCount;S++)v.push(o.child(S));w=w.matchFragment(o)}for(var k=h.size+e-(f.content.size-f.openEnd);m<h.childCount;){var x=h.child(m),E=w.matchType(x.type);if(!E)break;(++m>1||0==d||x.content.size)&&(w=E,v.push(U(x.mark(C.allowedMarks(x.marks)),1==m?d:0,m==h.childCount?k:-1)))}var O=m==h.childCount;O||(k=-1),O&&k<0&&r&&r.type==this.frontier[this.depth].type?this.closeFrontierNode():this.frontier[n].match=w;for(var M=0,A=h;M<k;M++){var N=A.lastChild;this.frontier.push({type:N.type,match:N.contentMatchAt(N.childCount)}),A=N.content}this.unplaced=O?0==e?l.Slice.empty:new l.Slice(L(f.content,e-1,1),e-1,k<0?f.openEnd:e-1):new l.Slice(L(f.content,e,m),f.openStart,f.openEnd),this.placed=j(this.placed,n,l.Fragment.from(v))},P.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!V(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r},P.prototype.findCloseLevel=function(t){t:for(var i=Math.min(this.depth,t.depth);i>=0;i--){var e=this.frontier[i],n=e.match,r=V(t,i,e.type,n,!1);if(r){for(var o=i-1;o>=0;o--){var c=this.frontier[o],f=c.match,h=V(t,o,c.type,f,!0);if(!h||h.childCount)continue t}return{depth:i,fit:r}}}},P.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return!1;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=j(this.placed,e.depth,e.fit));for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return!0},P.prototype.openFrontierNode=function(t,e,content){var n=this.frontier[this.depth];n.match=n.match.matchType(t),this.placed=j(this.placed,this.depth,l.Fragment.from(t.create(e,content))),this.frontier.push({type:t,match:t.contentMatch})},P.prototype.closeFrontierNode=function(){var t=this.frontier.pop().match.fillBefore(l.Fragment.empty,!0);t.childCount&&(this.placed=j(this.placed,this.frontier.length,t))},Object.defineProperties(P.prototype,I),k.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var r=this.doc.resolve(t),o=this.doc.resolve(e);if(_(r,o,n))return this.step(new N(t,e,n));var c=J(r,this.doc.resolve(e));0==c[c.length-1]&&c.pop();var f=-(r.depth+1);c.unshift(f);for(var h=r.depth,d=r.pos-1;h>0;h--,d--){var m=r.node(h).type.spec;if(m.defining||m.isolating)break;c.indexOf(h)>-1?f=h:r.before(h)==d&&c.splice(1,0,-h)}for(var v=c.indexOf(f),y=[],w=n.openStart,content=n.content,i=0;;i++){var C=content.firstChild;if(y.push(C),i==n.openStart)break;content=C.content}w>0&&y[w-1].type.spec.defining&&r.node(v).type!=y[w-1].type?w-=1:w>=2&&y[w-1].isTextblock&&y[w-2].type.spec.defining&&r.node(v).type!=y[w-2].type&&(w-=2);for(var S=n.openStart;S>=0;S--){var k=(S+w+1)%(n.openStart+1),x=y[k];if(x)for(var E=0;E<c.length;E++){var O=c[(E+v)%c.length],M=!0;O<0&&(M=!1,O=-O);var A=r.node(O-1),T=r.index(O-1);if(A.canReplaceWith(T,T,x.type,x.marks))return this.replace(r.before(O),M?o.after(O):e,new l.Slice($(n.content,0,n.openStart,k),k,n.openEnd))}}for(var R=this.steps.length,D=c.length-1;D>=0&&(this.replace(t,e,n),!(this.steps.length>R));D--){var F=c[D];D<0||(t=r.before(F),e=o.after(F))}return this},k.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var r=function(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var c=r.index(o);if(r.node(o).canReplaceWith(c,c,n))return r.before(o+1);if(c>0)return null}if(r.parentOffset==r.parent.content.size)for(var f=r.depth-1;f>=0;f--){var h=r.indexAfter(f);if(r.node(f).canReplaceWith(h,h,n))return r.after(f+1);if(h<r.node(f).childCount)return null}}(this.doc,t,n.type);null!=r&&(t=e=r)}return this.replaceRange(t,e,new l.Slice(l.Fragment.from(n),0,0))},k.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=J(n,r),i=0;i<o.length;i++){var c=o[i],f=i==o.length-1;if(f&&0==c||n.node(c).type.contentMatch.validEnd)return this.delete(n.start(c),r.end(c));if(c>0&&(f||n.node(c-1).canReplace(n.index(c-1),r.indexAfter(c-1))))return this.delete(n.before(c),r.after(c))}for(var h=1;h<=n.depth&&h<=r.depth;h++)if(t-n.start(h)==n.depth-h&&e>n.end(h)&&r.end(h)-e!=r.depth-h)return this.delete(n.before(h),e);return this.delete(t,e)};var H={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var W=/Edge\/(\d+)/.exec(navigator.userAgent),K=/MSIE \d/.test(navigator.userAgent),Y=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);H.mac=/Mac/.test(navigator.platform);var X=H.ie=!!(K||Y||W);H.ie_version=K?document.documentMode||6:Y?+Y[1]:W?+W[1]:null,H.gecko=!X&&/gecko\/(\d+)/i.test(navigator.userAgent),H.gecko_version=H.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var G=!X&&/Chrome\/(\d+)/.exec(navigator.userAgent);H.chrome=!!G,H.chrome_version=G&&+G[1],H.ios=!X&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),H.android=/Android \d/.test(navigator.userAgent),H.webkit="webkitFontSmoothing"in document.documentElement.style,H.safari=/Apple Computer/.test(navigator.vendor),H.webkit_version=H.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var Z=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},Q=function(t){var e=t.parentNode;return e&&11==e.nodeType?e.host:e},tt=function(t,e,n){var r=document.createRange();return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},et=function(t,e,n,r){return n&&(ot(t,e,n,r,-1)||ot(t,e,n,r,1))},nt=/^(img|br|input|textarea|hr)$/i;function ot(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:it(t))){var c=t.parentNode;if(1!=c.nodeType||st(t)||nt.test(t.nodeName)||"false"==t.contentEditable)return!1;e=Z(t)+(o<0?0:1),t=c}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(o<0?-1:0)]).contentEditable)return!1;e=o<0?it(t):0}}}function it(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function st(t){for(var desc,e=t;e&&!(desc=e.pmViewDesc);e=e.parentNode);return desc&&desc.node&&desc.node.isBlock&&(desc.dom==t||desc.contentDOM==t)}var at=function(t){var e=t.isCollapsed;return e&&H.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function ct(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function ut(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function pt(t,e){return"number"==typeof t?t:t[e]}function ft(view,rect,t){for(var e=view.someProp("scrollThreshold")||0,n=view.someProp("scrollMargin")||5,r=view.dom.ownerDocument,o=r.defaultView,c=t||view.dom;c;c=Q(c))if(1==c.nodeType){var f=c==r.body||1!=c.nodeType,h=f?ut(o):c.getBoundingClientRect(),l=0,d=0;if(rect.top<h.top+pt(e,"top")?d=-(h.top-rect.top+pt(n,"top")):rect.bottom>h.bottom-pt(e,"bottom")&&(d=rect.bottom-h.bottom+pt(n,"bottom")),rect.left<h.left+pt(e,"left")?l=-(h.left-rect.left+pt(n,"left")):rect.right>h.right-pt(e,"right")&&(l=rect.right-h.right+pt(n,"right")),l||d)if(f)o.scrollBy(l,d);else{var m=c.scrollLeft,v=c.scrollTop;d&&(c.scrollTop+=d),l&&(c.scrollLeft+=l);var y=c.scrollLeft-m,w=c.scrollTop-v;rect={left:rect.left-y,top:rect.top-w,right:rect.right-y,bottom:rect.bottom-w}}if(f)break}}function ht(t){for(var e=[],n=t.ownerDocument;t&&(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t!=n);t=Q(t));return e}function lt(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=n.dom,o=n.top,c=n.left;r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=c&&(r.scrollLeft=c)}}var mt=null;function gt(t,e){for(var n,r,o=2e8,c=0,f=e.top,h=e.top,l=t.firstChild,d=0;l;l=l.nextSibling,d++){var m=void 0;if(1==l.nodeType)m=l.getClientRects();else{if(3!=l.nodeType)continue;m=tt(l).getClientRects()}for(var i=0;i<m.length;i++){var rect=m[i];if(rect.top<=f&&rect.bottom>=h){f=Math.max(rect.bottom,f),h=Math.min(rect.top,h);var v=rect.left>e.left?rect.left-e.left:rect.right<e.left?e.left-rect.right:0;if(v<o){n=l,o=v,r=v&&3==n.nodeType?{left:rect.right<e.left?rect.right:rect.left,top:e.top}:e,1==l.nodeType&&v&&(c=d+(e.left>=(rect.left+rect.right)/2?1:0));continue}}!n&&(e.left>=rect.right&&e.top>=rect.top||e.left>=rect.left&&e.top>=rect.bottom)&&(c=d+1)}}return n&&3==n.nodeType?function(t,e){for(var n=t.nodeValue.length,r=document.createRange(),i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);var rect=bt(r,1);if(rect.top!=rect.bottom&&vt(e,rect))return{node:t,offset:i+(e.left>=(rect.left+rect.right)/2?1:0)}}return{node:t,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:t,offset:c}:gt(n,r)}function vt(t,rect){return t.left>=rect.left-1&&t.left<=rect.right+1&&t.top>=rect.top-1&&t.top<=rect.bottom+1}function yt(view,t){var e,n,r,o,c=view.root;if(c.caretPositionFromPoint)try{var f=c.caretPositionFromPoint(t.left,t.top);f&&(r=(e=f).offsetNode,o=e.offset)}catch(t){}if(!r&&c.caretRangeFromPoint){var h=c.caretRangeFromPoint(t.left,t.top);h&&(r=(n=h).startContainer,o=n.startOffset)}var l,d=c.elementFromPoint(t.left,t.top+1);if(!d||!view.dom.contains(1!=d.nodeType?d.parentNode:d)){var m=view.dom.getBoundingClientRect();if(!vt(t,m))return null;if(!(d=function t(element,e,n){var r=element.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var c=element.childNodes[i];if(1==c.nodeType)for(var f=c.getClientRects(),h=0;h<f.length;h++){var rect=f[h];if(vt(e,rect))return t(c,e,rect)}if((i=(i+1)%r)==o)break}return element}(view.dom,t,m)))return null}if(d=function(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}(d,t),r){if(H.gecko&&1==r.nodeType&&(o=Math.min(o,r.childNodes.length))<r.childNodes.length){var v,y=r.childNodes[o];"IMG"==y.nodeName&&(v=y.getBoundingClientRect()).right<=t.left&&v.bottom>t.top&&o++}r==view.dom&&o==r.childNodes.length-1&&1==r.lastChild.nodeType&&t.top>r.lastChild.getBoundingClientRect().bottom?l=view.state.doc.content.size:0!=o&&1==r.nodeType&&"BR"==r.childNodes[o-1].nodeName||(l=function(view,t,e,n){for(var r=-1,o=t;o!=view.dom;){var desc=view.docView.nearestDesc(o,!0);if(!desc)return null;if(desc.node.isBlock&&desc.parent){var rect=desc.dom.getBoundingClientRect();if(rect.left>n.left||rect.top>n.top)r=desc.posBefore;else{if(!(rect.right<n.left||rect.bottom<n.top))break;r=desc.posAfter}}o=desc.dom.parentNode}return r>-1?r:view.docView.posFromDOM(t,e)}(view,r,o,t))}null==l&&(l=function(view,t,e){var n=gt(t,e),r=n.node,o=n.offset,c=-1;if(1==r.nodeType&&!r.firstChild){var rect=r.getBoundingClientRect();c=rect.left!=rect.right&&e.left>(rect.left+rect.right)/2?1:-1}return view.docView.posFromDOM(r,o,c)}(view,d,t));var desc=view.docView.nearestDesc(d,!0);return{pos:l,inside:desc?desc.posAtStart-desc.border:-1}}function bt(object,t){var e=object.getClientRects();return e.length?e[t<0?0:e.length-1]:object.getBoundingClientRect()}function wt(view,t){var e=view.docView.domFromPos(t),n=e.node,r=e.offset;if(3==n.nodeType&&(H.webkit||H.gecko)){var rect=bt(tt(n,r,r),0);if(H.gecko&&r&&/\s/.test(n.nodeValue[r-1])&&r<n.nodeValue.length){var o=bt(tt(n,r-1,r-1),-1);if(o.top==rect.top){var c=bt(tt(n,r,r+1),-1);if(c.top!=rect.top)return Ct(c,c.left<o.left)}}return rect}if(1==n.nodeType&&!view.state.doc.resolve(t).parent.inlineContent){var f,h=!0;if(r<n.childNodes.length){var l=n.childNodes[r];1==l.nodeType&&(f=l.getBoundingClientRect())}if(!f&&r){var d=n.childNodes[r-1];1==d.nodeType&&(f=d.getBoundingClientRect(),h=!1)}return function(rect,t){if(0==rect.height)return rect;var e=t?rect.top:rect.bottom;return{top:e,bottom:e,left:rect.left,right:rect.right}}(f||n.getBoundingClientRect(),h)}for(var m=-1;m<2;m+=2)if(m<0&&r){var v=void 0,y=3==n.nodeType?tt(n,r-1,r):3==(v=n.childNodes[r-1]).nodeType?tt(v):1==v.nodeType&&"BR"!=v.nodeName?v:null;if(y){var w=bt(y,1);if(w.top<w.bottom)return Ct(w,!1)}}else if(m>0&&r<it(n)){var C=void 0,S=3==n.nodeType?tt(n,r,r+1):3==(C=n.childNodes[r]).nodeType?tt(C):1==C.nodeType?C:null;if(S){var k=bt(S,-1);if(k.top<k.bottom)return Ct(k,!0)}}return Ct(bt(3==n.nodeType?tt(n):n,0),!1)}function Ct(rect,t){if(0==rect.width)return rect;var e=t?rect.left:rect.right;return{top:rect.top,bottom:rect.bottom,left:e,right:e}}function St(view,t,e){var n=view.state,r=view.root.activeElement;n!=t&&view.updateState(t),r!=view.dom&&view.focus();try{return e()}finally{n!=t&&view.updateState(n),r!=view.dom&&r.focus()}}var kt=/[\u0590-\u08ac]/;var xt=null,Et=null,Ot=!1;function Mt(view,t,e){return xt==t&&Et==e?Ot:(xt=t,Et=e,Ot="up"==e||"down"==e?function(view,t,e){var n=t.selection,r="up"==e?n.$anchor.min(n.$head):n.$anchor.max(n.$head);return St(view,t,(function(){for(var t=view.docView.domFromPos(r.pos).node;;){var n=view.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.dom;break}t=n.dom.parentNode}for(var o=wt(view,r.pos),c=t.firstChild;c;c=c.nextSibling){var f=void 0;if(1==c.nodeType)f=c.getClientRects();else{if(3!=c.nodeType)continue;f=tt(c,0,c.nodeValue.length).getClientRects()}for(var i=0;i<f.length;i++){var h=f[i];if(h.bottom>h.top&&("up"==e?h.bottom<o.top+1:h.top>o.bottom-1))return!1}}return!0}))}(view,t,e):function(view,t,e){var n=t.selection.$head;if(!n.parent.isTextblock)return!1;var r=n.parentOffset,o=!r,c=r==n.parent.content.size,f=getSelection();return kt.test(n.parent.textContent)&&f.modify?St(view,t,(function(){var t=f.getRangeAt(0),r=f.focusNode,o=f.focusOffset,c=f.caretBidiLevel;f.modify("move",e,"character");var h=!(n.depth?view.docView.domAfterPos(n.before()):view.dom).contains(1==f.focusNode.nodeType?f.focusNode:f.focusNode.parentNode)||r==f.focusNode&&o==f.focusOffset;return f.removeAllRanges(),f.addRange(t),null!=c&&(f.caretBidiLevel=c),h})):"left"==e||"backward"==e?o:c}(view,t,e))}var At=function(t,e,n,r){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},Nt={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};At.prototype.matchesWidget=function(){return!1},At.prototype.matchesMark=function(){return!1},At.prototype.matchesNode=function(){return!1},At.prototype.matchesHack=function(){return!1},Nt.beforePosition.get=function(){return!1},At.prototype.parseRule=function(){return null},At.prototype.stopEvent=function(){return!1},Nt.size.get=function(){for(var t=0,i=0;i<this.children.length;i++)t+=this.children[i].size;return t},Nt.border.get=function(){return 0},At.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var i=0;i<this.children.length;i++)this.children[i].destroy()},At.prototype.posBeforeChild=function(t){for(var i=0,e=this.posAtStart;i<this.children.length;i++){var n=this.children[i];if(n==t)return e;e+=n.size}},Nt.posBefore.get=function(){return this.parent.posBeforeChild(this)},Nt.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},Nt.posAfter.get=function(){return this.posBefore+this.size},Nt.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},At.prototype.localPosFromDOM=function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var r,desc;if(t==this.contentDOM)r=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;r=t.previousSibling}for(;r&&(!(desc=r.pmViewDesc)||desc.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(desc)+desc.size:this.posAtStart}var o,c;if(t==this.contentDOM)o=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.nextSibling}for(;o&&(!(c=o.pmViewDesc)||c.parent!=this);)o=o.nextSibling;return o?this.posBeforeChild(c):this.posAtEnd}var f;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))f=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var h=t;;h=h.parentNode){if(h==this.dom){f=!1;break}if(h.parentNode.firstChild!=h)break}if(null==f&&e==t.childNodes.length)for(var l=t;;l=l.parentNode){if(l==this.dom){f=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==f?n>0:f)?this.posAtEnd:this.posAtStart},At.prototype.nearestDesc=function(t,e){for(var n=!0,r=t;r;r=r.parentNode){var desc=this.getDesc(r);if(desc&&(!e||desc.node)){if(!n||!desc.nodeDOM||(1==desc.nodeDOM.nodeType?desc.nodeDOM.contains(1==t.nodeType?t:t.parentNode):desc.nodeDOM==t))return desc;n=!1}}},At.prototype.getDesc=function(t){for(var desc=t.pmViewDesc,e=desc;e;e=e.parent)if(e==this)return desc},At.prototype.posFromDOM=function(t,e,n){for(var r=t;;r=r.parentNode){var desc=this.getDesc(r);if(desc)return desc.localPosFromDOM(t,e,n)}},At.prototype.descAt=function(t){for(var i=0,e=0;i<this.children.length;i++){var n=this.children[i],r=e+n.size;if(e==t&&r!=e){for(;!n.border&&n.children.length;)n=n.children[0];return n}if(t<r)return n.descAt(t-e-n.border);e=r}},At.prototype.domFromPos=function(t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var e=0,i=0;;i++){if(e==t){for(;i<this.children.length&&(this.children[i].beforePosition||this.children[i].dom.parentNode!=this.contentDOM);)i++;return{node:this.contentDOM,offset:i==this.children.length?this.contentDOM.childNodes.length:Z(this.children[i].dom)}}if(i==this.children.length)throw new Error("Invalid position "+t);var n=this.children[i],r=e+n.size;if(t<r)return n.domFromPos(t-e-n.border);e=r}},At.prototype.parseRange=function(t,e,base){if(void 0===base&&(base=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var n=-1,r=-1,o=base,i=0;;i++){var c=this.children[i],f=o+c.size;if(-1==n&&t<=f){var h=o+c.border;if(t>=h&&e<=f-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(t,e,h);t=o;for(var l=i;l>0;l--){var d=this.children[l-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){n=Z(d.dom)+1;break}t-=d.size}-1==n&&(n=0)}if(n>-1&&e<=f){e=f;for(var m=i+1;m<this.children.length;m++){var v=this.children[m];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(-1)){r=Z(v.dom);break}e+=v.size}-1==r&&(r=this.contentDOM.childNodes.length);break}o=f}return{node:this.contentDOM,from:t,to:e,fromOffset:n,toOffset:r}},At.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},At.prototype.domAfterPos=function(t){var e=this.domFromPos(t),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]},At.prototype.setSelection=function(t,head,e,n){for(var r=Math.min(t,head),o=Math.max(t,head),i=0,c=0;i<this.children.length;i++){var f=this.children[i],h=c+f.size;if(r>c&&o<h)return f.setSelection(t-c-f.border,head-c-f.border,e,n);c=h}var l=this.domFromPos(t),d=this.domFromPos(head),m=e.getSelection();if(n||!et(l.node,l.offset,m.anchorNode,m.anchorOffset)||!et(d.node,d.offset,m.focusNode,m.focusOffset))if(m.extend||t==head)m.collapse(l.node,l.offset),t!=head&&m.extend(d.node,d.offset);else{if(t>head){var v=l;l=d,d=v}var y=document.createRange();y.setEnd(d.node,d.offset),y.setStart(l.node,l.offset),m.removeAllRanges(),m.addRange(y)}},At.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},Nt.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},At.prototype.markDirty=function(t,e){for(var n=0,i=0;i<this.children.length;i++){var r=this.children[i],o=n+r.size;if(n==o?t<=o&&e>=n:t<o&&e>n){var c=n+r.border,f=o-r.border;if(t>=c&&e<=f)return this.dirty=t==n||e==o?2:1,void(t!=c||e!=f||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(t-c,e-c):r.dirty=3);r.dirty=3}n=o}this.dirty=2},At.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var n=1==t?2:1;e.dirty<n&&(e.dirty=n)}},Object.defineProperties(At.prototype,Nt);var Tt=[],Rt=function(t){function e(e,n,view,r){var o,c=n.type.toDOM;if("function"==typeof c&&(c=c(view,(function(){return o?o.parent?o.parent.posBeforeChild(o):void 0:r}))),!n.type.spec.raw){if(1!=c.nodeType){var f=document.createElement("span");f.appendChild(c),c=f}c.contentEditable=!1,c.classList.add("ProseMirror-widget")}t.call(this,e,Tt,c,null),this.widget=n,o=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={beforePosition:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(t){return 0==this.dirty&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},e.prototype.ignoreMutation=function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection},Object.defineProperties(e.prototype,n),e}(At),Dt=function(t){function e(e,n,r,text){t.call(this,e,Tt,n,null),this.textDOM=r,this.text=text}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,n),e}(At),Ft=function(t){function e(e,mark,n,r){t.call(this,e,[],n,r),this.mark=mark}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,mark,n,view){var r=view.nodeViews[mark.type.name],o=r&&r(mark,view,n);return o&&o.dom||(o=l.DOMSerializer.renderSpec(document,mark.type.spec.toDOM(mark,n))),new e(t,mark,o.dom,o.contentDOM||o.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(mark){return 3!=this.dirty&&this.mark.eq(mark)},e.prototype.markDirty=function(e,n){if(t.prototype.markDirty.call(this,e,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},e.prototype.slice=function(t,n,view){var r=e.create(this.parent,this.mark,!0,view),o=this.children,c=this.size;n<c&&(o=Yt(o,n,c,view)),t>0&&(o=Yt(o,0,t,view));for(var i=0;i<o.length;i++)o[i].parent=r;return r.children=o,r},e}(At),Bt=function(t){function e(e,n,r,o,c,f,h,view,l){t.call(this,e,n.isLeaf?Tt:[],c,f),this.nodeDOM=h,this.node=n,this.outerDeco=r,this.innerDeco=o,f&&this.updateChildren(view,l)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0},border:{configurable:!0}};return e.create=function(t,n,r,o,view,c){var f,h,d=view.nodeViews[n.type.name],m=d&&d(n,view,(function(){return h?h.parent?h.parent.posBeforeChild(h):void 0:c}),r),v=m&&m.dom,y=m&&m.contentDOM;if(n.isText)if(v){if(3!=v.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else v=document.createTextNode(n.text);else v||(v=(f=l.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n))).dom,y=f.contentDOM);y||n.isText||"BR"==v.nodeName||(v.hasAttribute("contenteditable")||(v.contentEditable=!1),n.type.spec.draggable&&(v.draggable=!0));var w=v;return v=$t(v,r,n),m?h=new Lt(t,n,r,o,v,y,w,m,view,c+1):n.isText?new Pt(t,n,r,o,v,w,view):new e(t,n,r,o,v,y,w,view,c+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?l.Fragment.empty:t.node.content},e},e.prototype.matchesNode=function(t,e,n){return 0==this.dirty&&t.eq(this.node)&&Jt(e,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(view,t){var e=this,n=this.node.inlineContent,r=t,o=n&&view.composing&&this.localCompositionNode(view,t),c=new Wt(this,o&&o.node);!function(t,e,n,r){var o=e.locals(t),c=0;if(0==o.length){for(var i=0;i<t.childCount;i++){var f=t.child(i);r(f,o,e.forChild(c,f),i),c+=f.nodeSize}return}for(var h=0,l=[],d=null,m=0;;){if(h<o.length&&o[h].to==c){for(var v=o[h++],y=void 0;h<o.length&&o[h].to==c;)(y||(y=[v])).push(o[h++]);if(y){y.sort(Kt);for(var w=0;w<y.length;w++)n(y[w],m,!!d)}else n(v,m,!!d)}var C=void 0,S=void 0;if(d)S=-1,C=d,d=null;else{if(!(m<t.childCount))break;S=m,C=t.child(m++)}for(var k=0;k<l.length;k++)l[k].to<=c&&l.splice(k--,1);for(;h<o.length&&o[h].from==c;)l.push(o[h++]);var x=c+C.nodeSize;if(C.isText){var E=x;h<o.length&&o[h].from<E&&(E=o[h].from);for(var O=0;O<l.length;O++)l[O].to<E&&(E=l[O].to);E<x&&(d=C.cut(E-c),C=C.cut(0,E-c),x=E,S=-1)}r(C,l.length?l.slice():Tt,e.forChild(c,C),S),c=x}}(this.node,this.innerDeco,(function(t,i,o){t.spec.marks?c.syncToMarks(t.spec.marks,n,view):t.type.side>=0&&!o&&c.syncToMarks(i==e.node.childCount?l.Mark.none:e.node.child(i).marks,n,view),c.placeWidget(t,view,r)}),(function(t,e,o,i){c.syncToMarks(t.marks,n,view),c.findNodeMatch(t,e,o,i)||c.updateNextNode(t,e,o,view,i)||c.addNode(t,e,o,view,r),r+=t.nodeSize})),c.syncToMarks(Tt,n,view),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||2==this.dirty)&&(o&&this.protectLocalComposition(view,o),this.renderChildren())},e.prototype.renderChildren=function(){!function t(e,n){for(var r=e.firstChild,i=0;i<n.length;i++){var desc=n[i],o=desc.dom;if(o.parentNode==e){for(;o!=r;)r=Ht(r);r=r.nextSibling}else e.insertBefore(o,r);if(desc instanceof Ft){var c=r?r.previousSibling:e.lastChild;t(desc.contentDOM,desc.children),r=c?c.nextSibling:e.firstChild}}for(;r;)r=Ht(r)}(this.contentDOM,this.children),H.ios&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom)},e.prototype.localCompositionNode=function(view,t){var e=view.state.selection,n=e.from,r=e.to;if(!(!(view.state.selection instanceof h.TextSelection)||n<t||r>t+this.node.content.size)){var o=view.root.getSelection(),c=function(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];t=t.childNodes[e-1],e=it(t)}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}(o.focusNode,o.focusOffset);if(c&&this.dom.contains(c.parentNode)){var text=c.nodeValue,f=function(t,text,e,n){for(var i=0,r=0;i<t.childCount&&r<=n;){var o=t.child(i++),c=r;if(r+=o.nodeSize,o.isText){for(var f=o.text;i<t.childCount;){var h=t.child(i++);if(r+=h.nodeSize,!h.isText)break;f+=h.text}if(r>=e){var l=f.lastIndexOf(text,n-c);if(l>=0&&l+text.length+c>=e)return c+l}}}return-1}(this.node.content,text,n-t,r-t);return f<0?null:{node:c,pos:f,text:text}}}},e.prototype.protectLocalComposition=function(view,t){var e=t.node,n=t.pos,text=t.text;if(!this.getDesc(e)){for(var r=e;r.parentNode!=this.contentDOM;r=r.parentNode){for(;r.previousSibling;)r.parentNode.removeChild(r.previousSibling);for(;r.nextSibling;)r.parentNode.removeChild(r.nextSibling);r.pmViewDesc&&(r.pmViewDesc=null)}var desc=new Dt(this,r,e,text);view.compositionNodes.push(desc),this.children=Yt(this.children,n,n+text.length,view,desc)}},e.prototype.update=function(t,e,n,view){return!(3==this.dirty||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,view),!0)},e.prototype.updateInner=function(t,e,n,view){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(view,this.posAtStart),this.dirty=0},e.prototype.updateOuterDeco=function(t){if(!Jt(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=qt(this.dom,this.nodeDOM,Ut(this.outerDeco,this.node,e),Ut(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},Object.defineProperties(e.prototype,n),e}(At);function _t(t,e,n,r,view){return $t(r,e,t),new Bt(null,t,e,n,r,r,r,view,0)}var Pt=function(t){function e(e,n,r,o,c,f,view){t.call(this,e,n,r,o,c,null,f,view)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{skip:this.nodeDOM.parentNode||!0}},e.prototype.update=function(t,e){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text),this.node=t,this.dirty=0,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,r)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,n,view){var r=this.node.cut(t,n),o=document.createTextNode(r.text);return new e(this.parent,r,this.outerDeco,this.innerDeco,o,o,view)},e}(Bt),It=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(){return 0==this.dirty},e}(At),Lt=function(t){function e(e,n,r,o,c,f,h,l,view,d){t.call(this,e,n,r,o,c,f,h,view,d),this.spec=l}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,r,view){if(3==this.dirty)return!1;if(this.spec.update){var o=this.spec.update(e,n);return o&&this.updateInner(e,n,r,view),o}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,r,view)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,head,n,r){this.spec.setSelection?this.spec.setSelection(e,head,n):t.prototype.setSelection.call(this,e,head,n,r)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(Bt);function jt(t){t&&(this.nodeName=t)}jt.prototype=Object.create(null);var zt=[new jt];function Ut(t,e,n){if(0==t.length)return zt;for(var r=n?zt[0]:new jt,o=[r],i=0;i<t.length;i++){var c=t[i].type.attrs,f=r;if(c)for(var h in c.nodeName&&o.push(f=new jt(c.nodeName)),c){var l=c[h];null!=l&&(n&&1==o.length&&o.push(f=r=new jt(e.isInline?"span":"div")),"class"==h?f.class=(f.class?f.class+" ":"")+l:"style"==h?f.style=(f.style?f.style+";":"")+l:"nodeName"!=h&&(f[h]=l))}}return o}function qt(t,e,n,r){if(n==zt&&r==zt)return e;for(var o=e,i=0;i<r.length;i++){var c=r[i],f=n[i];if(i){var h=void 0;f&&f.nodeName==c.nodeName&&o!=t&&(h=o.parentNode)&&h.tagName.toLowerCase()==c.nodeName?o=h:((h=document.createElement(c.nodeName)).appendChild(o),f=zt[0],o=h)}Vt(o,f||zt[0],c)}return o}function Vt(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=e[o]&&t.setAttribute(o,n[o]);if(e.class!=n.class){for(var c=e.class?e.class.split(" "):Tt,f=n.class?n.class.split(" "):Tt,i=0;i<c.length;i++)-1==f.indexOf(c[i])&&t.classList.remove(c[i]);for(var h=0;h<f.length;h++)-1==c.indexOf(f[h])&&t.classList.add(f[h])}if(e.style!=n.style){if(e.style)for(var l,d=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=d.exec(e.style);)t.style.removeProperty(l[1]);n.style&&(t.style.cssText+=n.style)}}function $t(t,e,n){return qt(t,t,zt,Ut(e,n,1!=t.nodeType))}function Jt(a,b){if(a.length!=b.length)return!1;for(var i=0;i<a.length;i++)if(!a[i].type.eq(b[i].type))return!1;return!0}function Ht(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var Wt=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1;var pre=function(t,e){for(var n=[],r=t.childCount,i=e.length-1;r>0&&i>=0;i--){var desc=e[i],o=desc.node;if(o){if(o!=t.child(r-1))break;n.push(desc),--r}}return{nodes:n.reverse(),offset:r}}(t.node.content,t.children);this.preMatched=pre.nodes,this.preMatchOffset=pre.offset};function Kt(a,b){return a.type.side-b.type.side}function Yt(t,e,n,view,r){for(var o=[],i=0,c=0;i<t.length;i++){var f=t[i],h=c,l=c+=f.size;h>=n||l<=e?o.push(f):(h<e&&o.push(f.slice(0,e-h,view)),r&&(o.push(r),r=null),l>n&&o.push(f.slice(n-h,f.size,view)))}return o}function Xt(t,e){var n=t.selection,r=n.$anchor,o=n.$head,c=e>0?r.max(o):r.min(o),f=c.parent.inlineContent?c.depth?t.doc.resolve(e>0?c.after():c.before()):null:c;return f&&h.Selection.findFrom(f,e)}function Gt(view,t){return view.dispatch(view.state.tr.setSelection(t).scrollIntoView()),!0}function Zt(view,t,e){var n=view.state.selection;if(n instanceof h.TextSelection){if(!n.empty||e.indexOf("s")>-1)return!1;if(view.endOfTextblock(t>0?"right":"left")){var r=Xt(view.state,t);return!!(r&&r instanceof h.NodeSelection)&&Gt(view,r)}var desc,o=n.$head,c=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter;if(!c||c.isText)return!1;var f=t<0?o.pos-c.nodeSize:o.pos;return!!(c.isAtom||(desc=view.docView.descAt(f))&&!desc.contentDOM)&&(h.NodeSelection.isSelectable(c)?Gt(view,new h.NodeSelection(t<0?view.state.doc.resolve(o.pos-c.nodeSize):o)):!!H.webkit&&Gt(view,new h.TextSelection(view.state.doc.resolve(t<0?f:f+c.nodeSize))))}if(n instanceof h.NodeSelection&&n.node.isInline)return Gt(view,new h.TextSelection(t>0?n.$to:n.$from));var l=Xt(view.state,t);return!!l&&Gt(view,l)}function Qt(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function te(t){var desc=t.pmViewDesc;return desc&&0==desc.size&&(t.nextSibling||"BR"!=t.nodeName)}function ee(view){var t=view.root.getSelection(),e=t.focusNode,n=t.focusOffset;if(e){var r,o,c=!1;for(H.gecko&&1==e.nodeType&&n<Qt(e)&&te(e.childNodes[n])&&(c=!0);;)if(n>0){if(1!=e.nodeType)break;var f=e.childNodes[n-1];if(te(f))r=e,o=--n;else{if(3!=f.nodeType)break;n=(e=f).nodeValue.length}}else{if(re(e))break;for(var h=e.previousSibling;h&&te(h);)r=e.parentNode,o=Z(h),h=h.previousSibling;if(h)n=Qt(e=h);else{if((e=e.parentNode)==view.dom)break;n=0}}c?oe(view,t,e,n):r&&oe(view,t,r,o)}}function ne(view){var t=view.root.getSelection(),e=t.focusNode,n=t.focusOffset;if(e){for(var r,o,c=Qt(e);;)if(n<c){if(1!=e.nodeType)break;if(!te(e.childNodes[n]))break;r=e,o=++n}else{if(re(e))break;for(var f=e.nextSibling;f&&te(f);)r=f.parentNode,o=Z(f)+1,f=f.nextSibling;if(f)n=0,c=Qt(e=f);else{if((e=e.parentNode)==view.dom)break;n=c=0}}r&&oe(view,t,r,o)}}function re(t){var desc=t.pmViewDesc;return desc&&desc.node&&desc.node.isBlock}function oe(view,t,e,n){if(at(t)){var r=document.createRange();r.setEnd(e,n),r.setStart(e,n),t.removeAllRanges(),t.addRange(r)}else t.extend&&t.extend(e,n);view.domObserver.setCurSelection()}function ie(view,t,e){var n=view.state.selection;if(n instanceof h.TextSelection&&!n.empty||e.indexOf("s")>-1)return!1;var r=n.$from,o=n.$to;if(!r.parent.inlineContent||view.endOfTextblock(t<0?"up":"down")){var c=Xt(view.state,t);if(c&&c instanceof h.NodeSelection)return Gt(view,c)}if(!r.parent.inlineContent){var f=h.Selection.findFrom(t<0?r:o,t);return!f||Gt(view,f)}return!1}function se(view,t){if(!(view.state.selection instanceof h.TextSelection))return!0;var e=view.state.selection,n=e.$head,r=e.$anchor,o=e.empty;if(!n.sameParent(r))return!0;if(!o)return!1;if(view.endOfTextblock(t>0?"forward":"backward"))return!0;var c=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(c&&!c.isText){var tr=view.state.tr;return t<0?tr.delete(n.pos-c.nodeSize,n.pos):tr.delete(n.pos,n.pos+c.nodeSize),view.dispatch(tr),!0}return!1}function ae(view,t,e){view.domObserver.stop(),t.contentEditable=e,view.domObserver.start()}function ce(view,t){var code=t.keyCode,e=function(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(t);return 8==code||H.mac&&72==code&&"c"==e?se(view,-1)||ee(view):46==code||H.mac&&68==code&&"c"==e?se(view,1)||ne(view):13==code||27==code||(37==code?Zt(view,-1,e)||ee(view):39==code?Zt(view,1,e)||ne(view):38==code?ie(view,-1,e)||ee(view):40==code?function(view){if(H.chrome&&!(view.state.selection.$head.parentOffset>0)){var t=view.root.getSelection(),e=t.focusNode,n=t.focusOffset;if(e&&1==e.nodeType&&0==n&&e.firstChild&&"false"==e.firstChild.contentEditable){var r=e.firstChild;ae(view,r,!0),setTimeout((function(){return ae(view,r,!1)}),20)}}}(view)||ie(view,1,e)||ne(view):e==(H.mac?"m":"c")&&(66==code||73==code||89==code||90==code))}function ue(view,t){var e,n,r=view.root.getSelection(),o=view.state.doc,c=view.docView.nearestDesc(r.focusNode),f=c&&0==c.size,head=view.docView.posFromDOM(r.focusNode,r.focusOffset),l=o.resolve(head);if(at(r)){for(e=l;c&&!c.node;)c=c.parent;if(c&&c.node.isAtom&&h.NodeSelection.isSelectable(c.node)&&c.parent&&(!c.node.isInline||!function(t,e,n){for(var r=0==e,o=e==it(t);r||o;){if(t==n)return!0;var c=Z(t);if(!(t=t.parentNode))return!1;r=r&&0==c,o=o&&c==it(t)}}(r.focusNode,r.focusOffset,c.dom))){var d=c.posBefore;n=new h.NodeSelection(head==d?l:o.resolve(d))}}else e=o.resolve(view.docView.posFromDOM(r.anchorNode,r.anchorOffset));n||(n=ve(view,e,l,"pointer"==t||view.state.selection.head<l.pos&&!f?1:-1));return n}function pe(view,t){var e=view.state.selection;if(me(view,e),view.editable?view.hasFocus():ye(view)&&document.activeElement.contains(view.dom)){if(view.domObserver.disconnectSelection(),view.cursorWrapper)!function(view){var t=view.root.getSelection(),e=document.createRange(),n=view.cursorWrapper.dom,img="IMG"==n.nodeName;img?e.setEnd(n.parentNode,Z(n)+1):e.setEnd(n,0);e.collapse(!1),t.removeAllRanges(),t.addRange(e),!img&&!view.state.selection.visible&&H.ie&&H.ie_version<=11&&(n.disabled=!0,n.disabled=!1)}(view);else{var n,r,o=e.anchor,head=e.head;!fe||e instanceof h.TextSelection||(e.$from.parent.inlineContent||(n=he(view,e.from)),e.empty||e.$from.parent.inlineContent||(r=he(view,e.to))),view.docView.setSelection(o,head,view.root,t),fe&&(n&&de(n),r&&de(r)),e.visible?view.dom.classList.remove("ProseMirror-hideselection"):(view.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(view){var t=view.dom.ownerDocument;t.removeEventListener("selectionchange",view.hideSelectionGuard);var e=view.root.getSelection(),n=e.anchorNode,r=e.anchorOffset;t.addEventListener("selectionchange",view.hideSelectionGuard=function(){e.anchorNode==n&&e.anchorOffset==r||(t.removeEventListener("selectionchange",view.hideSelectionGuard),view.dom.classList.remove("ProseMirror-hideselection"))})}(view))}view.domObserver.setCurSelection(),view.domObserver.connectSelection()}}Wt.prototype.getPreMatch=function(t){return t>=this.preMatchOffset?this.preMatched[t-this.preMatchOffset]:null},Wt.prototype.destroyBetween=function(t,e){if(t!=e){for(var i=t;i<e;i++)this.top.children[i].destroy();this.top.children.splice(t,e-t),this.changed=!0}},Wt.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},Wt.prototype.syncToMarks=function(t,e,view){for(var n=0,r=this.stack.length>>1,o=Math.min(r,t.length);n<o&&(n==r-1?this.top:this.stack[n+1<<1]).matchesMark(t[n])&&!1!==t[n].type.spec.spanning;)n++;for(;n<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<t.length;){this.stack.push(this.top,this.index+1);for(var c=-1,i=this.index;i<Math.min(this.index+3,this.top.children.length);i++)if(this.top.children[i].matchesMark(t[r])){c=i;break}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{var f=Ft.create(this.top,t[r],e,view);this.top.children.splice(this.index,0,f),this.top=f,this.changed=!0}this.index=0,r++}},Wt.prototype.findNodeMatch=function(t,e,n,r){var o=-1,c=r<0?void 0:this.getPreMatch(r),f=this.top.children;if(c&&c.matchesNode(t,e,n))o=f.indexOf(c);else for(var i=this.index,h=Math.min(f.length,i+5);i<h;i++){var l=f[i];if(l.matchesNode(t,e,n)&&this.preMatched.indexOf(l)<0){o=i;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)},Wt.prototype.updateNextNode=function(t,e,n,view,r){for(var i=this.index;i<this.top.children.length;i++){var o=this.top.children[i];if(o instanceof Bt){var c=this.preMatched.indexOf(o);if(c>-1&&c+this.preMatchOffset!=r)return!1;var f=o.dom;if(!(this.lock&&(f==this.lock||1==f.nodeType&&f.contains(this.lock.parentNode))&&!(t.isText&&o.node&&o.node.isText&&o.nodeDOM.nodeValue==t.text&&3!=o.dirty&&Jt(e,o.outerDeco)))&&o.update(t,e,n,view))return this.destroyBetween(this.index,i),o.dom!=f&&(this.changed=!0),this.index++,!0;break}}return!1},Wt.prototype.addNode=function(t,e,n,view,r){this.top.children.splice(this.index++,0,Bt.create(this.top,t,e,n,view,r)),this.changed=!0},Wt.prototype.placeWidget=function(t,view,e){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(t))this.index++;else{var desc=new Rt(this.top,t,view,e);this.top.children.splice(this.index++,0,desc),this.changed=!0}},Wt.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof Ft;)t=t.children[t.children.length-1];if(!t||!(t instanceof Pt)||/\n$/.test(t.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var e=document.createElement("br");this.top.children.splice(this.index++,0,new It(this.top,Tt,e,null)),this.changed=!0}};var fe=H.safari||H.chrome&&H.chrome_version<63;function he(view,t){var e=view.docView.domFromPos(t),n=e.node,r=e.offset,o=r<n.childNodes.length?n.childNodes[r]:null,c=r?n.childNodes[r-1]:null;if(H.safari&&o&&"false"==o.contentEditable)return le(o);if(!(o&&"false"!=o.contentEditable||c&&"false"!=c.contentEditable)){if(o)return le(o);if(c)return le(c)}}function le(element){return element.contentEditable="true",H.safari&&element.draggable&&(element.draggable=!1,element.wasDraggable=!0),element}function de(element){element.contentEditable="false",element.wasDraggable&&(element.draggable=!0,element.wasDraggable=null)}function me(view,t){if(t instanceof h.NodeSelection){var desc=view.docView.descAt(t.from);desc!=view.lastSelectedViewDesc&&(ge(view),desc&&desc.selectNode(),view.lastSelectedViewDesc=desc)}else ge(view)}function ge(view){view.lastSelectedViewDesc&&(view.lastSelectedViewDesc.parent&&view.lastSelectedViewDesc.deselectNode(),view.lastSelectedViewDesc=null)}function ve(view,t,e,n){return view.someProp("createSelectionBetween",(function(n){return n(view,t,e)}))||h.TextSelection.between(t,e,n)}function ye(view){var t=view.root.getSelection();if(!t.anchorNode)return!1;try{return view.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(view.editable||view.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(t){return!1}}function be(t){var desc=t.pmViewDesc;if(desc)return desc.parseRule();if("BR"==t.nodeName&&t.parentNode){if(H.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(t.parentNode.lastChild==t||H.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function we(view,t,e,n,r){if(t<0){var o=view.lastSelectionTime>Date.now()-50?view.lastSelectionOrigin:null,c=ue(view,o);if(!view.state.selection.eq(c)){var f=view.state.tr.setSelection(c);"pointer"==o?f.setMeta("pointer",!0):"key"==o&&f.scrollIntoView(),view.dispatch(f)}}else{var d=view.state.doc.resolve(t),m=d.sharedDepth(e);t=d.before(m+1),e=view.state.doc.resolve(e).after(m+1);var v,y,w=view.state.selection,C=function(view,t,e){var n=view.docView.parseRange(t,e),r=n.node,o=n.fromOffset,c=n.toOffset,f=n.from,h=n.to,d=view.root.getSelection(),m=null,v=d.anchorNode;if(v&&view.dom.contains(1==v.nodeType?v:v.parentNode)&&(m=[{node:v,offset:d.anchorOffset}],at(d)||m.push({node:d.focusNode,offset:d.focusOffset})),H.chrome&&8===view.lastKeyCode)for(var y=c;y>o;y--){var w=r.childNodes[y-1],desc=w.pmViewDesc;if("BR"==w.nodeType&&!desc){c=y;break}if(!desc||desc.size)break}var C=view.state.doc,S=view.someProp("domParser")||l.DOMParser.fromSchema(view.state.schema),k=C.resolve(f),x=null,E=S.parse(r,{topNode:k.parent,topMatch:k.parent.contentMatchAt(k.index()),topOpen:!0,from:o,to:c,preserveWhitespace:!k.parent.type.spec.code||"full",editableContent:!0,findPositions:m,ruleFromNode:be,context:k});if(m&&null!=m[0].pos){var O=m[0].pos,head=m[1]&&m[1].pos;null==head&&(head=O),x={anchor:O+f,head:head+f}}return{doc:E,sel:x,from:f,to:h}}(view,t,e),S=view.state.doc,k=S.slice(C.from,C.to);8===view.lastKeyCode&&Date.now()-100<view.lastKeyCodeTime?(v=view.state.selection.to,y="end"):(v=view.state.selection.from,y="start"),view.lastKeyCode=null;var x=function(a,b,t,e,n){var r=a.findDiffStart(b,t);if(null==r)return null;var o=a.findDiffEnd(b,t+a.size,t+b.size),c=o.a,f=o.b;if("end"==n){var h=Math.max(0,r-Math.min(c,f));e-=c+h-r}if(c<r&&a.size<b.size){f=(r-=e<=r&&e>=c?r-e:0)+(f-c),c=r}else if(f<r){c=(r-=e<=r&&e>=f?r-e:0)+(c-f),f=r}return{start:r,endA:c,endB:f}}(k.content,C.doc.content,C.from,v,y);if(!x){if(!(n&&w instanceof h.TextSelection&&!w.empty&&w.$head.sameParent(w.$anchor))||view.composing||C.sel&&C.sel.anchor!=C.sel.head){if(C.sel){var E=Ce(view,view.state.doc,C.sel);E&&!E.eq(view.state.selection)&&view.dispatch(view.state.tr.setSelection(E))}return}x={start:w.from,endA:w.to,endB:w.to}}view.domChangeCount++,view.state.selection.from<view.state.selection.to&&x.start==x.endB&&view.state.selection instanceof h.TextSelection&&(x.start>view.state.selection.from&&x.start<=view.state.selection.from+2?x.start=view.state.selection.from:x.endA<view.state.selection.to&&x.endA>=view.state.selection.to-2&&(x.endB+=view.state.selection.to-x.endA,x.endA=view.state.selection.to)),H.ie&&H.ie_version<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>C.from&&" "==C.doc.textBetween(x.start-C.from-1,x.start-C.from+1)&&(x.start--,x.endA--,x.endB--);var O,M=C.doc.resolveNoCache(x.start-C.from),A=C.doc.resolveNoCache(x.endB-C.from);if((H.ios&&view.lastIOSEnter>Date.now()-100&&(!M.sameParent(A)||r.some((function(t){return"DIV"==t.nodeName})))||!M.sameParent(A)&&M.pos<C.doc.content.size&&(O=h.Selection.findFrom(C.doc.resolve(M.pos+1),1,!0))&&O.head==A.pos)&&view.someProp("handleKeyDown",(function(t){return t(view,ct(13,"Enter"))})))view.lastIOSEnter=0;else if(view.state.selection.anchor>x.start&&function(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||Se(r,!0,!1)<o.pos)return!1;var c=t.resolve(e);if(c.parentOffset<c.parent.content.size||!c.parent.isTextblock)return!1;var f=t.resolve(Se(c,!0,!0));if(!f.parent.isTextblock||f.pos>n||Se(f,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(f.parent.content)}(S,x.start,x.endA,M,A)&&view.someProp("handleKeyDown",(function(t){return t(view,ct(8,"Backspace"))})))H.android&&H.chrome&&view.domObserver.suppressSelectionUpdates();else{var tr,N,T,R,D=x.start,F=x.endA;if(M.sameParent(A)&&M.parent.inlineContent)if(M.pos==A.pos)H.ie&&H.ie_version<=11&&0==M.parentOffset&&(view.domObserver.suppressSelectionUpdates(),setTimeout((function(){return pe(view)}),20)),tr=view.state.tr.delete(D,F),N=S.resolve(x.start).marksAcross(S.resolve(x.endA));else if(x.endA==x.endB&&(R=S.resolve(x.start))&&(T=function(t,e){for(var n,mark,r,o=t.firstChild.marks,c=e.firstChild.marks,f=o,h=c,i=0;i<c.length;i++)f=c[i].removeFromSet(f);for(var d=0;d<o.length;d++)h=o[d].removeFromSet(h);if(1==f.length&&0==h.length)mark=f[0],n="add",r=function(t){return t.mark(mark.addToSet(t.marks))};else{if(0!=f.length||1!=h.length)return null;mark=h[0],n="remove",r=function(t){return t.mark(mark.removeFromSet(t.marks))}}for(var m=[],v=0;v<e.childCount;v++)m.push(r(e.child(v)));if(l.Fragment.from(m).eq(t))return{mark:mark,type:n}}(M.parent.content.cut(M.parentOffset,A.parentOffset),R.parent.content.cut(R.parentOffset,x.endA-R.start()))))tr=view.state.tr,"add"==T.type?tr.addMark(D,F,T.mark):tr.removeMark(D,F,T.mark);else if(M.parent.child(M.index()).isText&&M.index()==A.index()-(A.textOffset?0:1)){var text=M.parent.textBetween(M.parentOffset,A.parentOffset);if(view.someProp("handleTextInput",(function(t){return t(view,D,F,text)})))return;tr=view.state.tr.insertText(text,D,F)}if(tr||(tr=view.state.tr.replace(D,F,C.doc.slice(x.start-C.from,x.endB-C.from))),C.sel){var B=Ce(view,tr.doc,C.sel);B&&!(H.chrome&&H.android&&view.composing&&B.empty&&(B.head==D||B.head==tr.mapping.map(F)-1)||H.ie&&B.empty&&B.head==D)&&tr.setSelection(B)}N&&tr.ensureMarks(N),view.dispatch(tr.scrollIntoView())}}}function Ce(view,t,e){return Math.max(e.anchor,e.head)>t.content.size?null:ve(view,t.resolve(e.anchor),t.resolve(e.head))}function Se(t,e,n){for(var r=t.depth,o=e?t.end():t.pos;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n)for(var c=t.node(r).maybeChild(t.indexAfter(r));c&&!c.isLeaf;)c=c.firstChild,o++;return o}function ke(view,t){for(var e=[],content=t.content,n=t.openStart,r=t.openEnd;n>1&&r>1&&1==content.childCount&&1==content.firstChild.childCount;){n--,r--;var o=content.firstChild;e.push(o.type.name,o.type.hasRequiredAttrs()?o.attrs:null),content=o.content}var c=view.someProp("clipboardSerializer")||l.DOMSerializer.fromSchema(view.state.schema),f=Ne(),h=f.createElement("div");h.appendChild(c.serializeFragment(content,{document:f}));for(var d,m=h.firstChild;m&&1==m.nodeType&&(d=Me[m.nodeName.toLowerCase()]);){for(var i=d.length-1;i>=0;i--){for(var v=f.createElement(d[i]);h.firstChild;)v.appendChild(h.firstChild);h.appendChild(v)}m=h.firstChild}return m&&1==m.nodeType&&m.setAttribute("data-pm-slice",n+" "+r+" "+JSON.stringify(e)),{dom:h,text:view.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function xe(view,text,html,t,e){var n,r,o=e.parent.type.spec.code;if(!html&&!text)return null;var c=text&&(t||o||!html);if(c){if(view.someProp("transformPastedText",(function(t){text=t(text)})),o)return new l.Slice(l.Fragment.from(view.state.schema.text(text)),0,0);var f=view.someProp("clipboardTextParser",(function(t){return t(text,e)}));f?r=f:(n=document.createElement("div"),text.trim().split(/(?:\r\n?|\n)+/).forEach((function(t){n.appendChild(document.createElement("p")).textContent=t})))}else view.someProp("transformPastedHTML",(function(t){html=t(html)})),n=function(html){var t=/(\s*<meta [^>]*>)*/.exec(html);t&&(html=html.slice(t[0].length));var e,n=Ne().createElement("div"),r=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(html),o=0;(e=r&&Me[r[1].toLowerCase()])&&(html=e.map((function(t){return"<"+t+">"})).join("")+html+e.map((function(t){return"</"+t+">"})).reverse().join(""),o=e.length);n.innerHTML=html;for(var i=0;i<o;i++)n=n.firstChild;return n}(html);var h=n&&n.querySelector("[data-pm-slice]"),d=h&&/^(\d+) (\d+) (.*)/.exec(h.getAttribute("data-pm-slice"));if(!r){var m=view.someProp("clipboardParser")||view.someProp("domParser")||l.DOMParser.fromSchema(view.state.schema);r=m.parseSlice(n,{preserveWhitespace:!(!c&&!d),context:e})}return r=d?function(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(e){return t}for(var content=t.content,o=t.openStart,c=t.openEnd,i=n.length-2;i>=0;i-=2){var f=r.nodes[n[i]];if(!f||f.hasRequiredAttrs())break;content=l.Fragment.from(f.create(n[i+1],content)),o++,c++}return new l.Slice(content,o,c)}(function(t,e,n){e<t.openStart&&(t=new l.Slice(Oe(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd));n<t.openEnd&&(t=new l.Slice(Oe(t.content,1,n,t.openEnd,0,0),t.openStart,n));return t}(r,+d[1],+d[2]),d[3]):l.Slice.maxOpen(function(t,e){if(t.childCount<2)return t;for(var n=function(n){var r=e.node(n).contentMatchAt(e.index(n)),o=void 0,c=[];if(t.forEach((function(t){if(c){var e,n=r.findWrapping(t.type);if(!n)return c=null;if(e=c.length&&o.length&&function t(e,n,r,o,c){if(c<e.length&&c<n.length&&e[c]==n[c]){var f=t(e,n,r,o.lastChild,c+1);if(f)return o.copy(o.content.replaceChild(o.childCount-1,f));if(o.contentMatchAt(o.childCount).matchType(c==e.length-1?r.type:e[c+1]))return o.copy(o.content.append(l.Fragment.from(Ee(r,e,c+1))))}}(n,o,t,c[c.length-1],0))c[c.length-1]=e;else{c.length&&(c[c.length-1]=function t(e,n){if(0==n)return e;var r=e.content.replaceChild(e.childCount-1,t(e.lastChild,n-1)),o=e.contentMatchAt(e.childCount).fillBefore(l.Fragment.empty,!0);return e.copy(r.append(o))}(c[c.length-1],o.length));var f=Ee(t,n);c.push(f),r=r.matchType(f.type,f.attrs),o=n}}})),c)return{v:l.Fragment.from(c)}},r=e.depth;r>=0;r--){var o=n(r);if(o)return o.v}return t}(r.content,e),!1),view.someProp("transformPasted",(function(t){r=t(r)})),r}function Ee(t,e,n){void 0===n&&(n=0);for(var i=e.length-1;i>=n;i--)t=e[i].create(null,l.Fragment.from(t));return t}function Oe(t,e,n,r,o,c){var f=e<0?t.firstChild:t.lastChild,h=f.content;return o<r-1&&(h=Oe(h,e,n,r,o+1,c)),o>=n&&(h=e<0?f.contentMatchAt(0).fillBefore(h,t.childCount>1||c<=o).append(h):h.append(f.contentMatchAt(f.childCount).fillBefore(l.Fragment.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,f.copy(h))}var Me={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Ae=null;function Ne(){return Ae||(Ae=document.implementation.createHTMLDocument("title"))}var Te={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Re=H.ie&&H.ie_version<=11,De=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};De.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},De.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var Fe=function(view,t){var e=this;this.view=view,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var i=0;i<t.length;i++)e.queue.push(t[i]);H.ie&&H.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?e.flushSoon():e.flush()})),this.currentSelection=new De,Re&&(this.onCharData=function(t){e.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),e.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Fe.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))},Fe.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Fe.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Te),Re&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Fe.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var i=0;i<e.length;i++)this.queue.push(e[i]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}Re&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Fe.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Fe.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Fe.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)},Fe.prototype.onSelectionChange=function(){if((!(view=this.view).editable||view.root.activeElement==view.dom)&&ye(view)){var view;if(this.suppressingSelectionUpdates)return pe(this.view);if(H.ie&&H.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&et(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},Fe.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Fe.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,desc=this.view.docView.nearestDesc(e);return desc&&desc.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0},Fe.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&ye(this.view)&&!this.ignoreSelectionChange(e),r=-1,o=-1,c=!1,f=[];if(this.view.editable)for(var i=0;i<t.length;i++){var h=this.registerMutation(t[i],f);h&&(r=r<0?h.from:Math.min(h.from,r),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(c=!0))}if(H.gecko&&f.length>1){var l=f.filter((function(t){return"BR"==t.nodeName}));if(2==l.length){var a=l[0],b=l[1];a.parentNode&&a.parentNode.parentNode==b.parentNode?b.remove():a.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),function(view){if(Be)return;Be=!0,"normal"==getComputedStyle(view.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(r,o,c,f),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||pe(this.view))}},Fe.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var desc=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(desc==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!desc||desc.ignoreMutation(t))return null;if("childList"==t.type){var n=t.previousSibling,r=t.nextSibling;if(H.ie&&H.ie_version<=11&&t.addedNodes.length)for(var i=0;i<t.addedNodes.length;i++){var o=t.addedNodes[i],c=o.previousSibling,f=o.nextSibling;(!c||Array.prototype.indexOf.call(t.addedNodes,c)<0)&&(n=c),(!f||Array.prototype.indexOf.call(t.addedNodes,f)<0)&&(r=f)}for(var h=n&&n.parentNode==t.target?Z(n)+1:0,l=desc.localPosFromDOM(t.target,h,-1),d=r&&r.parentNode==t.target?Z(r):t.target.childNodes.length,m=0;m<t.addedNodes.length;m++)e.push(t.addedNodes[m]);return{from:l,to:desc.localPosFromDOM(t.target,d,1)}}return"attributes"==t.type?{from:desc.posAtStart-desc.border,to:desc.posAtEnd+desc.border}:{from:desc.posAtStart,to:desc.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var Be=!1;var _e={},Pe={};function Ie(view,t){view.lastSelectionOrigin=t,view.lastSelectionTime=Date.now()}function Le(view){view.someProp("handleDOMEvents",(function(t){for(var e in t)view.eventHandlers[e]||view.dom.addEventListener(e,view.eventHandlers[e]=function(t){return je(view,t)})}))}function je(view,t){return view.someProp("handleDOMEvents",(function(e){var n=e[t.type];return!!n&&(n(view,t)||t.defaultPrevented)}))}function ze(t){return{left:t.clientX,top:t.clientY}}function Ue(view,t,e,n,r){if(-1==n)return!1;for(var o=view.state.doc.resolve(n),c=function(i){if(view.someProp(t,(function(t){return i>o.depth?t(view,e,o.nodeAfter,o.before(i),r,!0):t(view,e,o.node(i),o.before(i),r,!1)})))return{v:!0}},i=o.depth+1;i>0;i--){var f=c(i);if(f)return f.v}return!1}function qe(view,t,e){view.focused||view.focus();var tr=view.state.tr.setSelection(t);"pointer"==e&&tr.setMeta("pointer",!0),view.dispatch(tr)}function Ve(view,t,e,n,r){return Ue(view,"handleClickOn",t,e,n)||view.someProp("handleClick",(function(e){return e(view,t,n)}))||(r?function(view,t){if(-1==t)return!1;var e,n,r=view.state.selection;r instanceof h.NodeSelection&&(e=r.node);for(var o=view.state.doc.resolve(t),i=o.depth+1;i>0;i--){var c=i>o.depth?o.nodeAfter:o.node(i);if(h.NodeSelection.isSelectable(c)){n=e&&r.$from.depth>0&&i>=r.$from.depth&&o.before(r.$from.depth+1)==r.$from.pos?o.before(r.$from.depth):o.before(i);break}}return null!=n&&(qe(view,h.NodeSelection.create(view.state.doc,n),"pointer"),!0)}(view,e):function(view,t){if(-1==t)return!1;var e=view.state.doc.resolve(t),n=e.nodeAfter;return!!(n&&n.isAtom&&h.NodeSelection.isSelectable(n))&&(qe(view,new h.NodeSelection(e),"pointer"),!0)}(view,e))}function $e(view,t,e,n){return Ue(view,"handleDoubleClickOn",t,e,n)||view.someProp("handleDoubleClick",(function(e){return e(view,t,n)}))}function Je(view,t,e,n){return Ue(view,"handleTripleClickOn",t,e,n)||view.someProp("handleTripleClick",(function(e){return e(view,t,n)}))||function(view,t){var e=view.state.doc;if(-1==t)return!!e.inlineContent&&(qe(view,h.TextSelection.create(e,0,e.content.size),"pointer"),!0);for(var n=e.resolve(t),i=n.depth+1;i>0;i--){var r=i>n.depth?n.nodeAfter:n.node(i),o=n.before(i);if(r.inlineContent)qe(view,h.TextSelection.create(e,o+1,o+1+r.content.size),"pointer");else{if(!h.NodeSelection.isSelectable(r))continue;qe(view,h.NodeSelection.create(e,o),"pointer")}return!0}}(view,e)}function He(view){return Ze(view)}Pe.keydown=function(view,t){if(view.shiftKey=16==t.keyCode||t.shiftKey,!Ye(view,t))if(view.domObserver.forceFlush(),view.lastKeyCode=t.keyCode,view.lastKeyCodeTime=Date.now(),!H.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)view.someProp("handleKeyDown",(function(e){return e(view,t)}))||ce(view,t)?t.preventDefault():Ie(view,"key");else{var e=Date.now();view.lastIOSEnter=e,setTimeout((function(){view.lastIOSEnter==e&&(view.someProp("handleKeyDown",(function(t){return t(view,ct(13,"Enter"))})),view.lastIOSEnter=0)}),50)}},Pe.keyup=function(view,t){16==t.keyCode&&(view.shiftKey=!1)},Pe.keypress=function(view,t){if(!(Ye(view,t)||!t.charCode||t.ctrlKey&&!t.altKey||H.mac&&t.metaKey))if(view.someProp("handleKeyPress",(function(e){return e(view,t)})))t.preventDefault();else{var e=view.state.selection;if(!(e instanceof h.TextSelection&&e.$from.sameParent(e.$to))){var text=String.fromCharCode(t.charCode);view.someProp("handleTextInput",(function(t){return t(view,e.$from.pos,e.$to.pos,text)}))||view.dispatch(view.state.tr.insertText(text).scrollIntoView()),t.preventDefault()}}};var We=H.mac?"metaKey":"ctrlKey";_e.mousedown=function(view,t){view.shiftKey=t.shiftKey;var e=He(view),n=Date.now(),r="singleClick";n-view.lastClick.time<500&&function(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}(t,view.lastClick)&&!t[We]&&("singleClick"==view.lastClick.type?r="doubleClick":"doubleClick"==view.lastClick.type&&(r="tripleClick")),view.lastClick={time:n,x:t.clientX,y:t.clientY,type:r};var o=view.posAtCoords(ze(t));o&&("singleClick"==r?view.mouseDown=new Ke(view,o,t,e):("doubleClick"==r?$e:Je)(view,o.pos,o.inside,t)?t.preventDefault():Ie(view,"pointer"))};var Ke=function(view,t,e,n){var r,o,c=this;if(this.view=view,this.startDoc=view.state.doc,this.pos=t,this.event=e,this.flushed=n,this.selectNode=e[We],this.allowDefault=e.shiftKey,t.inside>-1)r=view.state.doc.nodeAt(t.inside),o=t.inside;else{var f=view.state.doc.resolve(t.pos);r=f.parent,o=f.depth?f.before():0}this.mightDrag=null;var l=n?null:e.target,d=l?view.docView.nearestDesc(l,!0):null;this.target=d?d.dom:null,(r.type.spec.draggable&&!1!==r.type.spec.selectable||view.state.selection instanceof h.NodeSelection&&o==view.state.selection.from)&&(this.mightDrag={node:r,pos:o,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&H.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return c.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),view.root.addEventListener("mouseup",this.up=this.up.bind(this)),view.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ie(view,"pointer")};function Ye(view,t){return!!view.composing||!!(H.safari&&Math.abs(t.timeStamp-view.compositionEndedAt)<500)&&(view.compositionEndedAt=-2e8,!0)}Ke.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},Ke.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(ze(t))),this.allowDefault||!e?Ie(this.view,"pointer"):Ve(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():!this.flushed&&(!H.chrome||this.view.state.selection instanceof h.TextSelection||e.pos!=this.view.state.selection.from&&e.pos!=this.view.state.selection.to)?Ie(this.view,"pointer"):(qe(this.view,h.Selection.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault())}},Ke.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),Ie(this.view,"pointer")},_e.touchdown=function(view){He(view),Ie(view,"pointer")},_e.contextmenu=function(view){return He(view)};var Xe=H.android?5e3:-1;function Ge(view,t){clearTimeout(view.composingTimeout),t>-1&&(view.composingTimeout=setTimeout((function(){return Ze(view)}),t))}function Ze(view,t){for(view.domObserver.forceFlush(),view.composing=!1;view.compositionNodes.length>0;)view.compositionNodes.pop().markParentsDirty();if(t||view.docView.dirty){var e=ue(view);return e.eq(view.state.selection)?view.updateState(view.state):view.dispatch(view.state.tr.setSelection(e)),!0}return!1}Pe.compositionstart=Pe.compositionupdate=function(view){if(!view.composing){view.domObserver.flush();var t=view.state,e=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!e.textOffset&&e.parentOffset&&e.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))view.markCursor=view.state.storedMarks||e.marks(),Ze(view,!0),view.markCursor=null;else if(Ze(view),H.gecko&&t.selection.empty&&e.parentOffset&&!e.textOffset&&e.nodeBefore.marks.length)for(var n=view.root.getSelection(),r=n.focusNode,o=n.focusOffset;r&&1==r.nodeType&&0!=o;){var c=o<0?r.lastChild:r.childNodes[o-1];if(!c)break;if(3==c.nodeType){n.collapse(c,c.nodeValue.length);break}r=c,o=-1}view.composing=!0}Ge(view,Xe)},Pe.compositionend=function(view,t){view.composing&&(view.composing=!1,view.compositionEndedAt=t.timeStamp,Ge(view,20))};var Qe=H.ie&&H.ie_version<15||H.ios&&H.webkit_version<604;function tn(view,text,html,t){var e=xe(view,text,html,view.shiftKey,view.state.selection.$from);if(!view.someProp("handlePaste",(function(n){return n(view,t,e||l.Slice.empty)}))&&e){var n=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(e),tr=n?view.state.tr.replaceSelectionWith(n,view.shiftKey):view.state.tr.replaceSelection(e);view.dispatch(tr.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}_e.copy=Pe.cut=function(view,t){var e=view.state.selection,n="cut"==t.type;if(!e.empty){var data=Qe?null:t.clipboardData,r=ke(view,e.content()),o=r.dom,text=r.text;data?(t.preventDefault(),data.clearData(),data.setData("text/html",o.innerHTML),data.setData("text/plain",text)):function(view,t){var e=view.dom.ownerDocument,n=e.body.appendChild(e.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=e.createRange();o.selectNodeContents(t),view.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){e.body.removeChild(n),view.focus()}),50)}(view,o),n&&view.dispatch(view.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Pe.paste=function(view,t){var data=Qe?null:t.clipboardData,html=data&&data.getData("text/html"),text=data&&data.getData("text/plain");data&&(html||text||data.files.length)?(tn(view,text,html,t),t.preventDefault()):function(view,t){var e=view.dom.ownerDocument,n=view.shiftKey||view.state.selection.$from.parent.type.spec.code,r=e.body.appendChild(e.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){view.focus(),e.body.removeChild(r),n?tn(view,r.value,null,t):tn(view,r.textContent,r.innerHTML,t)}),50)}(view,t)};var en=function(t,e){this.slice=t,this.move=e},nn=H.mac?"altKey":"ctrlKey";for(var rn in _e.dragstart=function(view,t){var e=view.mouseDown;if(e&&e.done(),t.dataTransfer){var n=view.state.selection,r=n.empty?null:view.posAtCoords(ze(t));if(r&&r.pos>=n.from&&r.pos<=(n instanceof h.NodeSelection?n.to-1:n.to));else if(e&&e.mightDrag)view.dispatch(view.state.tr.setSelection(h.NodeSelection.create(view.state.doc,e.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var desc=view.docView.nearestDesc(t.target,!0);if(!desc||!desc.node.type.spec.draggable||desc==view.docView)return;view.dispatch(view.state.tr.setSelection(h.NodeSelection.create(view.state.doc,desc.posBefore)))}var o=view.state.selection.content(),c=ke(view,o),f=c.dom,text=c.text;t.dataTransfer.clearData(),t.dataTransfer.setData(Qe?"Text":"text/html",f.innerHTML),Qe||t.dataTransfer.setData("text/plain",text),view.dragging=new en(o,!t[nn])}},_e.dragend=function(view){window.setTimeout((function(){return view.dragging=null}),50)},Pe.dragover=Pe.dragenter=function(t,e){return e.preventDefault()},Pe.drop=function(view,t){var e=view.dragging;if(view.dragging=null,t.dataTransfer){var n=view.posAtCoords(ze(t));if(n){var r=view.state.doc.resolve(n.pos);if(r){var o=e&&e.slice||xe(view,t.dataTransfer.getData(Qe?"Text":"text/plain"),Qe?null:t.dataTransfer.getData("text/html"),!1,r);if(view.someProp("handleDrop",(function(n){return n(view,t,o||l.Slice.empty,e&&e.move)})))t.preventDefault();else if(o){t.preventDefault();var c=o?function(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var content=n.content,i=0;i<n.openStart;i++)content=content.firstChild.content;for(var o=1;o<=(0==n.openStart&&n.size?2:1);o++)for(var c=r.depth;c>=0;c--){var f=c==r.depth?0:r.pos<=(r.start(c+1)+r.end(c+1))/2?-1:1,h=r.index(c)+(f>0?1:0);if(1==o?r.node(c).canReplace(h,h,content):r.node(c).contentMatchAt(h).findWrapping(content.firstChild.type))return 0==f?r.pos:f<0?r.before(c+1):r.after(c+1)}return null}(view.state.doc,r.pos,o):r.pos;null==c&&(c=r.pos);var tr=view.state.tr;e&&e.move&&tr.deleteSelection();var f=tr.mapping.map(c),d=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,m=tr.doc;if(d?tr.replaceRangeWith(f,f,o.content.firstChild):tr.replaceRange(f,f,o),!tr.doc.eq(m)){var v=tr.doc.resolve(f);d&&h.NodeSelection.isSelectable(o.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(o.content.firstChild)?tr.setSelection(new h.NodeSelection(v)):tr.setSelection(ve(view,v,tr.doc.resolve(tr.mapping.map(c)))),view.focus(),view.dispatch(tr.setMeta("uiEvent","drop"))}}}}}},_e.focus=function(view){view.focused||(view.domObserver.stop(),view.dom.classList.add("ProseMirror-focused"),view.domObserver.start(),view.focused=!0,setTimeout((function(){view.docView&&view.hasFocus()&&!view.domObserver.currentSelection.eq(view.root.getSelection())&&pe(view)}),20))},_e.blur=function(view){view.focused&&(view.domObserver.stop(),view.dom.classList.remove("ProseMirror-focused"),view.domObserver.start(),view.domObserver.currentSelection.set({}),view.focused=!1)},_e.beforeinput=function(view,t){if(H.chrome&&H.android&&"deleteContentBackward"==t.inputType){var e=view.domChangeCount;setTimeout((function(){if(view.domChangeCount==e&&(view.dom.blur(),view.focus(),!view.someProp("handleKeyDown",(function(t){return t(view,ct(8,"Backspace"))})))){var t=view.state.selection.$cursor;t&&t.pos>0&&view.dispatch(view.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},Pe)_e[rn]=Pe[rn];function on(a,b){if(a==b)return!0;for(var p in a)if(a[p]!==b[p])return!1;for(var t in b)if(!(t in a))return!1;return!0}var sn=function(t,e){this.spec=e||hn,this.side=this.spec.side||0,this.toDOM=t};sn.prototype.map=function(t,span,e,n){var r=t.mapResult(span.from+n,this.side<0?-1:1),o=r.pos;return r.deleted?null:new un(o-e,o-e,this)},sn.prototype.valid=function(){return!0},sn.prototype.eq=function(t){return this==t||t instanceof sn&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&on(this.spec,t.spec))};var an=function(t,e){this.spec=e||hn,this.attrs=t};an.prototype.map=function(t,span,e,n){var r=t.map(span.from+n,this.spec.inclusiveStart?-1:1)-e,o=t.map(span.to+n,this.spec.inclusiveEnd?1:-1)-e;return r>=o?null:new un(r,o,this)},an.prototype.valid=function(t,span){return span.from<span.to},an.prototype.eq=function(t){return this==t||t instanceof an&&on(this.attrs,t.attrs)&&on(this.spec,t.spec)},an.is=function(span){return span.type instanceof an};var cn=function(t,e){this.spec=e||hn,this.attrs=t};cn.prototype.map=function(t,span,e,n){var r=t.mapResult(span.from+n,1);if(r.deleted)return null;var o=t.mapResult(span.to+n,-1);return o.deleted||o.pos<=r.pos?null:new un(r.pos-e,o.pos-e,this)},cn.prototype.valid=function(t,span){var e=t.content.findIndex(span.from),n=e.index,r=e.offset;return r==span.from&&r+t.child(n).nodeSize==span.to},cn.prototype.eq=function(t){return this==t||t instanceof cn&&on(this.attrs,t.attrs)&&on(this.spec,t.spec)};var un=function(t,e,n){this.from=t,this.to=e,this.type=n},pn={spec:{configurable:!0}};un.prototype.copy=function(t,e){return new un(t,e,this.type)},un.prototype.eq=function(t,e){return void 0===e&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to},un.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},un.widget=function(t,e,n){return new un(t,t,new sn(e,n))},un.inline=function(t,e,n,r){return new un(t,e,new an(n,r))},un.node=function(t,e,n,r){return new un(t,e,new cn(n,r))},pn.spec.get=function(){return this.type.spec},Object.defineProperties(un.prototype,pn);var fn=[],hn={},ln=function(t,e){this.local=t&&t.length?t:fn,this.children=e&&e.length?e:fn};ln.create=function(t,e){return e.length?bn(e,t,0,hn):dn},ln.prototype.find=function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r},ln.prototype.findInner=function(t,e,n,r,o){for(var i=0;i<this.local.length;i++){var span=this.local[i];span.from<=e&&span.to>=t&&(!o||o(span.spec))&&n.push(span.copy(span.from+r,span.to+r))}for(var c=0;c<this.children.length;c+=3)if(this.children[c]<e&&this.children[c+1]>t){var f=this.children[c]+1;this.children[c+2].findInner(t-f,e-f,n,r+f,o)}},ln.prototype.map=function(t,e,n){return this==dn||0==t.maps.length?this:this.mapInner(t,e,0,0,n||hn)},ln.prototype.mapInner=function(t,e,n,r,o){for(var c,i=0;i<this.local.length;i++){var f=this.local[i].map(t,n,r);f&&f.type.valid(e,f)?(c||(c=[])).push(f):o.onRemove&&o.onRemove(this.local[i].spec)}return this.children.length?function(t,e,n,r,o,c,f){for(var h=t.slice(),l=function(t,e,n,r){for(var i=0;i<h.length;i+=3){var f=h[i+1],l=void 0;-1==f||t>f+c||(e>=h[i]+c?h[i+1]=-1:(l=r-n-(e-t)+(c-o))&&(h[i]+=l,h[i+1]+=l))}},i=0;i<n.maps.length;i++)n.maps[i].forEach(l);for(var d=!1,m=0;m<h.length;m+=3)if(-1==h[m+1]){var v=n.map(h[m]+c),y=v-o;if(y<0||y>=r.content.size){d=!0;continue}var w=n.map(t[m+1]+c,-1)-o,C=r.content.findIndex(y),S=C.index,k=C.offset,x=r.maybeChild(S);if(x&&k==y&&k+x.nodeSize==w){var E=h[m+2].mapInner(n,x,v+1,h[m]+c+1,f);E!=dn?(h[m]=y,h[m+1]=w,h[m+2]=E):(h[m+1]=-2,d=!0)}else d=!0}if(d){var O=bn(function(t,e,n,r,o,c,f){function h(t,e){for(var i=0;i<t.local.length;i++){var c=t.local[i].map(r,o,e);c?n.push(c):f.onRemove&&f.onRemove(t.local[i].spec)}for(var l=0;l<t.children.length;l+=3)h(t.children[l+2],t.children[l]+e+1)}for(var i=0;i<t.length;i+=3)-1==t[i+1]&&h(t[i+2],e[i]+c+1);return n}(h,t,e||[],n,o,c,f),r,0,f);e=O.local;for(var M=0;M<h.length;M+=3)h[M+1]<0&&(h.splice(M,3),M-=3);for(var A=0,N=0;A<O.children.length;A+=3){for(var T=O.children[A];N<h.length&&h[N]<T;)N+=3;h.splice(N,0,O.children[A],O.children[A+1],O.children[A+2])}}return new ln(e&&e.sort(wn),h)}(this.children,c,t,e,n,r,o):c?new ln(c.sort(wn)):dn},ln.prototype.add=function(t,e){return e.length?this==dn?ln.create(t,e):this.addInner(t,e,0):this},ln.prototype.addInner=function(t,e,n){var r,o=this,c=0;t.forEach((function(t,f){var h,l=f+n;if(h=vn(e,t,l)){for(r||(r=o.children.slice());c<r.length&&r[c]<f;)c+=3;r[c]==f?r[c+2]=r[c+2].addInner(t,h,l+1):r.splice(c,0,f,f+t.nodeSize,bn(h,t,l+1,hn)),c+=3}}));var f=gn(c?yn(e):e,-n);return new ln(f.length?this.local.concat(f).sort(wn):this.local,r||this.children)},ln.prototype.remove=function(t){return 0==t.length||this==dn?this:this.removeInner(t,0)},ln.prototype.removeInner=function(t,e){for(var n=this.children,r=this.local,i=0;i<n.length;i+=3){for(var o=void 0,c=n[i]+e,f=n[i+1]+e,h=0,span=void 0;h<t.length;h++)(span=t[h])&&span.from>c&&span.to<f&&(t[h]=null,(o||(o=[])).push(span));if(o){n==this.children&&(n=this.children.slice());var l=n[i+2].removeInner(o,c+1);l!=dn?n[i+2]=l:(n.splice(i,3),i-=3)}}if(r.length)for(var d=0,m=void 0;d<t.length;d++)if(m=t[d])for(var v=0;v<r.length;v++)r[v].eq(m,e)&&(r==this.local&&(r=this.local.slice()),r.splice(v--,1));return n==this.children&&r==this.local?this:r.length||n.length?new ln(r,n):dn},ln.prototype.forChild=function(t,e){if(this==dn)return this;if(e.isLeaf)return ln.empty;for(var n,r,i=0;i<this.children.length;i+=3)if(this.children[i]>=t){this.children[i]==t&&(n=this.children[i+2]);break}for(var o=t+1,c=o+e.content.size,f=0;f<this.local.length;f++){var h=this.local[f];if(h.from<c&&h.to>o&&h.type instanceof an){var l=Math.max(o,h.from)-o,d=Math.min(c,h.to)-o;l<d&&(r||(r=[])).push(h.copy(l,d))}}if(r){var m=new ln(r.sort(wn));return n?new mn([m,n]):m}return n||dn},ln.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof ln)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var i=0;i<this.local.length;i++)if(!this.local[i].eq(t.local[i]))return!1;for(var e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0},ln.prototype.locals=function(t){return Cn(this.localsInner(t))},ln.prototype.localsInner=function(t){if(this==dn)return fn;if(t.inlineContent||!this.local.some(an.is))return this.local;for(var e=[],i=0;i<this.local.length;i++)this.local[i].type instanceof an||e.push(this.local[i]);return e};var dn=new ln;ln.empty=dn,ln.removeOverlap=Cn;var mn=function(t){this.members=t};function gn(t,e){if(!e||!t.length)return t;for(var n=[],i=0;i<t.length;i++){var span=t[i];n.push(new un(span.from+e,span.to+e,span.type))}return n}function vn(t,e,n){if(e.isLeaf)return null;for(var r=n+e.nodeSize,o=null,i=0,span=void 0;i<t.length;i++)(span=t[i])&&span.from>n&&span.to<r&&((o||(o=[])).push(span),t[i]=null);return o}function yn(t){for(var e=[],i=0;i<t.length;i++)null!=t[i]&&e.push(t[i]);return e}function bn(t,e,n,r){var o=[],c=!1;e.forEach((function(e,f){var h=vn(t,e,f+n);if(h){c=!0;var l=bn(h,e,n+f+1,r);l!=dn&&o.push(f,f+e.nodeSize,l)}}));for(var f=gn(c?yn(t):t,-n).sort(wn),i=0;i<f.length;i++)f[i].type.valid(e,f[i])||(r.onRemove&&r.onRemove(f[i].spec),f.splice(i--,1));return f.length||o.length?new ln(f,o):dn}function wn(a,b){return a.from-b.from||a.to-b.to}function Cn(t){for(var e=t,i=0;i<e.length-1;i++){var span=e[i];if(span.from!=span.to)for(var n=i+1;n<e.length;n++){var r=e[n];if(r.from!=span.from){r.from<span.to&&(e==t&&(e=t.slice()),e[i]=span.copy(span.from,r.from),Sn(e,n,span.copy(r.from,span.to)));break}r.to!=span.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,span.to),Sn(e,n+1,r.copy(span.to,r.to)))}}return e}function Sn(t,i,e){for(;i<t.length&&wn(e,t[i])>0;)i++;t.splice(i,0,e)}function kn(view){var t=[];return view.someProp("decorations",(function(e){var n=e(view.state);n&&n!=dn&&t.push(n)})),view.cursorWrapper&&t.push(ln.create(view.state.doc,[view.cursorWrapper.deco])),mn.from(t)}mn.prototype.forChild=function(t,e){if(e.isLeaf)return ln.empty;for(var n=[],i=0;i<this.members.length;i++){var r=this.members[i].forChild(t,e);r!=dn&&(r instanceof mn?n=n.concat(r.members):n.push(r))}return mn.from(n)},mn.prototype.eq=function(t){if(!(t instanceof mn)||t.members.length!=this.members.length)return!1;for(var i=0;i<this.members.length;i++)if(!this.members[i].eq(t.members[i]))return!1;return!0},mn.prototype.locals=function(t){for(var e,n=!0,i=0;i<this.members.length;i++){var r=this.members[i].localsInner(t);if(r.length)if(e){n&&(e=e.slice(),n=!1);for(var o=0;o<r.length;o++)e.push(r[o])}else e=r}return e?Cn(n?e:e.sort(wn)):fn},mn.from=function(t){switch(t.length){case 0:return dn;case 1:return t[0];default:return new mn(t)}};var xn=function(t,e){this._props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=An(this),this.markCursor=null,this.cursorWrapper=null,Mn(this),this.nodeViews=Nn(this),this.docView=_t(this.state.doc,On(this),kn(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(view){view.shiftKey=!1,view.mouseDown=null,view.lastKeyCode=null,view.lastKeyCodeTime=0,view.lastClick={time:0,x:0,y:0,type:""},view.lastSelectionOrigin=null,view.lastSelectionTime=0,view.lastIOSEnter=0,view.composing=!1,view.composingTimeout=null,view.compositionNodes=[],view.compositionEndedAt=-2e8,view.domObserver=new Fe(view,(function(t,e,n,r){return we(view,t,e,n,r)})),view.domObserver.start(),view.domChangeCount=0,view.eventHandlers=Object.create(null);var t=function(t){var e=_e[t];view.dom.addEventListener(t,view.eventHandlers[t]=function(t){!function(view,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var e=t.target;e!=view.dom;e=e.parentNode)if(!e||11==e.nodeType||e.pmViewDesc&&e.pmViewDesc.stopEvent(t))return!1;return!0}(view,t)||je(view,t)||!view.editable&&t.type in Pe||e(view,t)})};for(var e in _e)t(e);H.safari&&view.dom.addEventListener("input",(function(){return null})),Le(view)}(this),this.pluginViews=[],this.updatePluginViews()},En={props:{configurable:!0},root:{configurable:!0}};function On(view){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(view.editable),view.someProp("attributes",(function(e){if("function"==typeof e&&(e=e(view.state)),e)for(var n in e)"class"==n?t.class+=" "+e[n]:t[n]||"contenteditable"==n||"nodeName"==n||(t[n]=String(e[n]))})),[un.node(0,view.state.doc.content.size,t)]}function Mn(view){if(view.markCursor){var t=document.createElement("img");t.setAttribute("mark-placeholder","true"),view.cursorWrapper={dom:t,deco:un.widget(view.state.selection.head,t,{raw:!0,marks:view.markCursor})}}else view.cursorWrapper=null}function An(view){return!view.someProp("editable",(function(t){return!1===t(view.state)}))}function Nn(view){var t={};return view.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}function Tn(t){var e=t.getSelection(),n=e.focusOffset,r=e.focusNode;return r&&1==r.nodeType?[r,n,r.childNodes[n-1],r.childNodes[n]]:null}En.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},xn.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Le(this),this._props=t,this.updateStateInner(t.state,!0)},xn.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)},xn.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},xn.prototype.updateStateInner=function(t,e){var n=this,r=this.state,o=!1;if(this.state=t,e){var c=Nn(this);(function(a,b){var t=0,e=0;for(var n in a){if(a[n]!=b[n])return!0;t++}for(var r in b)e++;return t!=e})(c,this.nodeViews)&&(this.nodeViews=c,o=!0),Le(this)}this.editable=An(this),Mn(this);var view,f,l,d,m,v,y,w,C,S,k,x=kn(this),E=On(this),O=e?"reset":t.scrollToSelection>r.scrollToSelection?"to selection":"preserve",M=o||!this.docView.matchesNode(t.doc,E,x),A=M||!t.selection.eq(r.selection),N="preserve"==O&&A&&null==this.dom.style.overflowAnchor&&function(view){for(var t,e,rect=view.dom.getBoundingClientRect(),n=Math.max(0,rect.top),r=(rect.left+rect.right)/2,o=n+1;o<Math.min(innerHeight,rect.bottom);o+=5){var c=view.root.elementFromPoint(r,o);if(c!=view.dom&&view.dom.contains(c)){var f=c.getBoundingClientRect();if(f.top>=n-20){t=c,e=f.top;break}}}return{refDOM:t,refTop:e,stack:ht(view.dom)}}(this);if(A){this.domObserver.stop();var T=M&&(H.ie||H.chrome)&&!this.composing&&!r.selection.empty&&!t.selection.empty&&(d=r.selection,m=t.selection,v=Math.min(d.$anchor.sharedDepth(d.head),m.$anchor.sharedDepth(m.head)),d.$anchor.start(v)!=m.$anchor.start(v));if(M){var R=H.chrome&&Tn(this.root);!o&&this.docView.update(t.doc,E,x,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=_t(t.doc,E,x,this.dom,this)),R&&function(t,e){var n=Tn(e);if(!n||3==n[0].nodeType)return!1;for(var i=0;i<t.length;i++)if(n[i]!=t[i])return!0;return!1}(R,this.root)&&(T=!0)}T||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(view=this,f=view.docView.domFromPos(view.state.selection.anchor),l=view.root.getSelection(),et(f.node,f.offset,l.anchorNode,l.anchorOffset)))?pe(this,T):(me(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),"reset"==O)this.dom.scrollTop=0;else if("to selection"==O){var D=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(n)}))||(t.selection instanceof h.NodeSelection?ft(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),D):ft(this,this.coordsAtPos(t.selection.head),D))}else N&&(w=(y=N).refDOM,C=y.refTop,S=y.stack,k=w?w.getBoundingClientRect().top:0,lt(S,0==k?0:k-C))},xn.prototype.destroyPluginViews=function(){for(var view;view=this.pluginViews.pop();)view.destroy&&view.destroy()},xn.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.destroyPluginViews();for(var i=0;i<this.state.plugins.length;i++){var r=this.state.plugins[i];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}},xn.prototype.someProp=function(t,e){var n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var c=o[i].props[t];if(null!=c&&(n=e?e(c):c))return n}},xn.prototype.hasFocus=function(){return this.root.activeElement==this.dom},xn.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(mt)return t.focus(mt);var e=ht(t);t.focus(null==mt?{get preventScroll(){return mt={preventScroll:!0},!0}}:void 0),mt||(mt=!1,lt(e,0))}(this.dom),pe(this),this.domObserver.start()},En.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},xn.prototype.posAtCoords=function(t){return yt(this,t)},xn.prototype.coordsAtPos=function(t){return wt(this,t)},xn.prototype.domAtPos=function(t){return this.docView.domFromPos(t)},xn.prototype.nodeDOM=function(t){var desc=this.docView.descAt(t);return desc?desc.nodeDOM:null},xn.prototype.posAtDOM=function(t,e,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},xn.prototype.endOfTextblock=function(t,e){return Mt(this,e||this.state,t)},xn.prototype.destroy=function(){this.docView&&(!function(view){for(var t in view.domObserver.stop(),view.eventHandlers)view.dom.removeEventListener(t,view.eventHandlers[t]);clearTimeout(view.composingTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],kn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},xn.prototype.dispatchEvent=function(t){return function(view,t){je(view,t)||!_e[t.type]||!view.editable&&t.type in Pe||_e[t.type](view,t)}(this,t)},xn.prototype.dispatch=function(tr){var t=this._props.dispatchTransaction;t?t.call(this,tr):this.updateState(this.state.apply(tr))},Object.defineProperties(xn.prototype,En);var Rn=n(194),Dn=n(205),Fn=n(193),Bn=65535,_n=Math.pow(2,16);function Pn(t){return t&Bn}var In=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},Ln=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};Ln.prototype.recover=function(t){var e=0,n=Pn(t);if(!this.inverted)for(var i=0;i<n;i++)e+=this.ranges[3*i+2]-this.ranges[3*i+1];return this.ranges[3*n]+e+function(t){return(t-(t&Bn))/_n}(t)},Ln.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},Ln.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},Ln.prototype._map=function(t,e,n){for(var r=0,o=this.inverted?2:1,c=this.inverted?1:2,i=0;i<this.ranges.length;i+=3){var f=this.ranges[i]-(this.inverted?r:0);if(f>t)break;var h=this.ranges[i+o],l=this.ranges[i+c],d=f+h;if(t<=d){var m=f+r+((h?t==f?-1:t==d?1:e:e)<0?0:l);if(n)return m;var v=i/3+(t-f)*_n;return new In(m,e<0?t!=f:t!=d,v)}r+=l-h}return n?t+r:new In(t+r)},Ln.prototype.touches=function(t,e){for(var n=0,r=Pn(e),o=this.inverted?2:1,c=this.inverted?1:2,i=0;i<this.ranges.length;i+=3){var f=this.ranges[i]-(this.inverted?n:0);if(f>t)break;var h=this.ranges[i+o];if(t<=f+h&&i==3*r)return!0;n+=this.ranges[i+c]-h}return!1},Ln.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,i=0,r=0;i<this.ranges.length;i+=3){var o=this.ranges[i],c=o-(this.inverted?r:0),f=o+(this.inverted?0:r),h=this.ranges[i+e],l=this.ranges[i+n];t(c,c+h,f,f+l),r+=l-h}},Ln.prototype.invert=function(){return new Ln(this.ranges,!this.inverted)},Ln.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},Ln.offset=function(t){return 0==t?Ln.empty:new Ln(t<0?[0,-t,0]:[0,0,t])},Ln.empty=new Ln([]);var jn=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function zn(t){var e=Error.call(this,t);return e.__proto__=zn.prototype,e}jn.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new jn(this.maps,this.mirror,t,e)},jn.prototype.copy=function(){return new jn(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},jn.prototype.appendMap=function(map,t){this.to=this.maps.push(map),null!=t&&this.setMirror(this.maps.length-1,t)},jn.prototype.appendMapping=function(t){for(var i=0,e=this.maps.length;i<t.maps.length;i++){var n=t.getMirror(i);this.appendMap(t.maps[i],null!=n&&n<i?e+n:null)}},jn.prototype.getMirror=function(t){if(this.mirror)for(var i=0;i<this.mirror.length;i++)if(this.mirror[i]==t)return this.mirror[i+(i%2?-1:1)]},jn.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},jn.prototype.appendMappingInverted=function(t){for(var i=t.maps.length-1,e=this.maps.length+t.maps.length;i>=0;i--){var n=t.getMirror(i);this.appendMap(t.maps[i].invert(),null!=n&&n>i?e-n-1:null)}},jn.prototype.invert=function(){var t=new jn;return t.appendMappingInverted(this),t},jn.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var i=this.from;i<this.to;i++)t=this.maps[i].map(t,e);return t},jn.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},jn.prototype._map=function(t,e,n){for(var r=!1,o=null,i=this.from;i<this.to;i++){var map=this.maps[i],c=o&&o[i];if(null!=c&&map.touches(t,c))t=map.recover(c);else{var f=map.mapResult(t,e);if(null!=f.recover){var h=this.getMirror(i);if(null!=h&&h>i&&h<this.to){if(f.deleted){i=h,t=this.maps[h].recover(f.recover);continue}(o||(o=Object.create(null)))[h]=f.recover}}f.deleted&&(r=!0),t=f.pos}}return n?t:new In(t,r)},zn.prototype=Object.create(Error.prototype),zn.prototype.constructor=zn,zn.prototype.name="TransformError";var Un=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new jn},qn={before:{configurable:!0},docChanged:{configurable:!0}};function Vn(){throw new Error("Override me")}qn.before.get=function(){return this.docs.length?this.docs[0]:this.doc},Un.prototype.step=function(object){var t=this.maybeStep(object);if(t.failed)throw new zn(t.failed);return this},Un.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},qn.docChanged.get=function(){return this.steps.length>0},Un.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(Un.prototype,qn);var $n=Object.create(null),Jn=function(){};Jn.prototype.apply=function(t){return Vn()},Jn.prototype.getMap=function(){return Ln.empty},Jn.prototype.invert=function(t){return Vn()},Jn.prototype.map=function(t){return Vn()},Jn.prototype.merge=function(t){return null},Jn.prototype.toJSON=function(){return Vn()},Jn.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=$n[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},Jn.jsonID=function(t,e){if(t in $n)throw new RangeError("Duplicate use of step JSON ID "+t);return $n[t]=e,e.prototype.jsonID=t,e};var Hn=function(t,e){this.doc=t,this.failed=e};Hn.ok=function(t){return new Hn(t,null)},Hn.fail=function(t){return new Hn(null,t)},Hn.fromReplace=function(t,e,n,r){try{return Hn.ok(t.replace(e,n,r))}catch(t){if(t instanceof l.ReplaceError)return Hn.fail(t.message);throw t}};var Wn=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&Yn(t,this.from,this.to)?Hn.fail("Structure replace would overwrite content"):Hn.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new Ln([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?l.Slice.empty:new l.Slice(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var r=this.slice.size+t.slice.size==0?l.Slice.empty:new l.Slice(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),r,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,l.Slice.fromJSON(t,n.slice),!!n.structure)},e}(Jn);Jn.jsonID("replace",Wn);var Kn=function(t){function e(e,n,r,o,c,f,h){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=c,this.insert=f,this.structure=!!h}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(Yn(t,this.from,this.gapFrom)||Yn(t,this.gapTo,this.to)))return Hn.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return Hn.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?Hn.fromReplace(t,this.from,this.to,n):Hn.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new Ln([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),c=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||c>r.pos?null:new e(n.pos,r.pos,o,c,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,l.Slice.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(Jn);function Yn(t,e,n){for(var r=t.resolve(e),o=n-e,c=r.depth;o>0&&c>0&&r.indexAfter(c)==r.node(c).childCount;)c--,o--;if(o>0)for(var f=r.node(c).maybeChild(r.indexAfter(c));o>0;){if(!f||f.isLeaf)return!0;f=f.firstChild,o--}return!1}function Xn(t,e,n){for(var r=[],i=0;i<t.childCount;i++){var o=t.child(i);o.content.size&&(o=o.copy(Xn(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return l.Fragment.fromArray(r)}Jn.jsonID("replaceAround",Kn),Un.prototype.lift=function(t,e){for(var n=t.$from,r=t.$to,o=t.depth,c=n.before(o+1),f=r.after(o+1),h=c,d=f,m=l.Fragment.empty,v=0,y=o,w=!1;y>e;y--)w||n.index(y)>0?(w=!0,m=l.Fragment.from(n.node(y).copy(m)),v++):h--;for(var C=l.Fragment.empty,S=0,k=o,x=!1;k>e;k--)x||r.after(k+1)<r.end(k)?(x=!0,C=l.Fragment.from(r.node(k).copy(C)),S++):d++;return this.step(new Kn(h,d,c,f,new l.Slice(m.append(C),v,S),m.size-v,!0))},Un.prototype.wrap=function(t,e){for(var content=l.Fragment.empty,i=e.length-1;i>=0;i--)content=l.Fragment.from(e[i].type.create(e[i].attrs,content));var n=t.start,r=t.end;return this.step(new Kn(n,r,n,r,new l.Slice(content,0,0),e.length,!0))},Un.prototype.setBlockType=function(t,e,n,r){var o=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var c=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,r)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(o.doc,o.mapping.slice(c).map(e),n)){o.clearIncompatible(o.mapping.slice(c).map(e,1),n);var f=o.mapping.slice(c),h=f.map(e,1),d=f.map(e+t.nodeSize,1);return o.step(new Kn(h,d,h+1,d-1,new l.Slice(l.Fragment.from(n.create(r,null,t.marks)),0,0),1,!0)),!1}})),this},Un.prototype.setNodeMarkup=function(t,e,n,r){var o=this.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);var c=e.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(t,t+o.nodeSize,c);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new Kn(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new l.Slice(l.Fragment.from(c),0,0),1,!0))},Un.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var r=this.doc.resolve(t),o=l.Fragment.empty,c=l.Fragment.empty,f=r.depth,h=r.depth-e,i=e-1;f>h;f--,i--){o=l.Fragment.from(r.node(f).copy(o));var d=n&&n[i];c=l.Fragment.from(d?d.type.create(d.attrs,c):r.node(f).copy(c))}return this.step(new Wn(t,t,new l.Slice(o.append(c),e,e),!0))},Un.prototype.join=function(t,e){void 0===e&&(e=1);var n=new Wn(t-e,t+e,l.Slice.empty,!0);return this.step(n)};var Gn=function(t){function e(e,n,mark){t.call(this),this.from=e,this.to=n,this.mark=mark}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),c=new l.Slice(Xn(n.content,(function(t,n){return n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),o),n.openStart,n.openEnd);return Hn.fromReplace(t,this.from,this.to,c)},e.prototype.invert=function(){return new Zn(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(Jn);Jn.jsonID("addMark",Gn);var Zn=function(t){function e(e,n,mark){t.call(this),this.from=e,this.to=n,this.mark=mark}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=new l.Slice(Xn(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return Hn.fromReplace(t,this.from,this.to,r)},e.prototype.invert=function(){return new Gn(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(Jn);function Qn(t,e,n,r){if(void 0===n&&(n=e),void 0===r&&(r=l.Slice.empty),e==n&&!r.size)return null;var o=t.resolve(e),c=t.resolve(n);if(rr(o,c,r))return new Wn(e,n,r);var f=function(t,e){var n=function t(e,n,r,o){var content=l.Fragment.empty,c=0,f=r[n];if(e.depth>n){var h=t(e,n+1,r,o||f);c=h.openEnd+1,content=l.Fragment.from(e.node(n+1).copy(h.content))}f&&(content=content.append(f.content),c=f.openEnd);o&&(content=content.append(e.node(n).contentMatchAt(e.indexAfter(n)).fillBefore(l.Fragment.empty,!0)),c=0);return{content:content,openEnd:c}}(t,0,e,!1),content=n.content,r=n.openEnd;return new l.Slice(content,t.depth,r||0)}(o,function(t,e){for(var n=new or(t),r=1;e.size&&r<=3;r++){var o=n.placeSlice(e.content,e.openStart,e.openEnd,r);3==r&&o!=e&&o.size&&(r=0),e=o}for(;n.open.length;)n.closeNode();return n.placed}(o,r)),h=nr(o,c,f);if(!h)return null;if(f.size!=h.size&&function(t,e,n){if(!e.parent.isTextblock)return!1;var r,o=n.openEnd?function(content,t){for(var i=1;i<t;i++)content=content.lastChild.content;return content.lastChild}(n.content,n.openEnd):t.node(t.depth-(n.openStart-n.openEnd));if(!o.isTextblock)return!1;for(var i=e.index();i<e.parent.childCount;i++)if(!o.type.allowsMarks(e.parent.child(i).marks))return!1;n.openEnd?r=o.contentMatchAt(o.childCount):(r=o.contentMatchAt(o.childCount),n.size&&(r=r.matchFragment(n.content,n.openStart?1:0)));return(r=r.matchFragment(e.parent.content,e.index()))&&r.validEnd}(o,c,f)){for(var d=c.depth,m=c.after(d);d>1&&m==c.end(--d);)++m;var v=nr(o,t.resolve(m),f);if(v)return new Kn(e,m,n,c.end(),v,f.size)}return h.size||e!=n?new Wn(e,n,h):null}function er(content,t,e,n,r,o,c){var f,h=content.childCount,d=h-(c>0?1:0),m=o<0?t:e.node(r);f=o<0?m.contentMatchAt(d):1==h&&c>0?m.contentMatchAt(o?e.index(r):e.indexAfter(r)):m.contentMatchAt(e.indexAfter(r)).matchFragment(content,h>0&&o?1:0,d);var v=n.node(r);if(c>0&&r<n.depth){var y=v.content.cutByIndex(n.indexAfter(r)).addToStart(content.lastChild),w=f.fillBefore(y,!0);if(w&&w.size&&o>0&&1==h&&(w=null),w){var C=er(content.lastChild.content,content.lastChild,e,n,r+1,1==h?o-1:-1,c-1);if(C){var S=content.lastChild.copy(C);return w.size?content.cutByIndex(0,h-1).append(w).addToEnd(S):content.replaceChild(h-1,S)}}}c>0&&(f=f.matchType((1==h&&o>0?e.node(r+1):content.lastChild).type));var k=n.index(r);if(k==v.childCount&&!v.type.compatibleContent(t.type))return null;for(var x=f.fillBefore(v.content,!0,k),i=k;x&&i<v.content.childCount;i++)m.type.allowsMarks(v.content.child(i).marks)||(x=null);if(!x)return null;if(c>0){var E=function t(e,n,r,o,c){var f,content=e.content,h=content.childCount;f=c>=0?r.node(o).contentMatchAt(r.indexAfter(o)).matchFragment(content,c>0?1:0,h):e.contentMatchAt(h);if(n>0){var d=t(content.lastChild,n-1,r,o+1,1==h?c-1:-1);content=content.replaceChild(h-1,d)}return e.copy(content.append(f.fillBefore(l.Fragment.empty,!0)))}(content.lastChild,c-1,e,r+1,1==h?o-1:-1);content=content.replaceChild(h-1,E)}return content=content.append(x),n.depth>r&&(content=content.addToEnd(function t(e,n){var r=e.node(n),o=r.contentMatchAt(0).fillBefore(r.content,!0,e.index(n));e.depth>n&&(o=o.addToEnd(t(e,n+1)));return r.copy(o)}(n,r+1))),content}function nr(t,e,n){var r=er(n.content,t.node(0),t,e,0,n.openStart,n.openEnd);return r?function(content,t,e){for(;t>0&&e>0&&1==content.childCount;)content=content.firstChild.content,t--,e--;return new l.Slice(content,t,e)}(r,n.openStart,e.depth):null}function rr(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}Jn.jsonID("removeMark",Zn),Un.prototype.addMark=function(t,e,mark){var n=this,r=[],o=[],c=null,f=null;return this.doc.nodesBetween(t,e,(function(n,h,l){if(n.isInline){var d=n.marks;if(!mark.isInSet(d)&&l.type.allowsMarkType(mark.type)){for(var m=Math.max(h,t),v=Math.min(h+n.nodeSize,e),y=mark.addToSet(d),i=0;i<d.length;i++)d[i].isInSet(y)||(c&&c.to==m&&c.mark.eq(d[i])?c.to=v:r.push(c=new Zn(m,v,d[i])));f&&f.to==m?f.to=v:o.push(f=new Gn(m,v,mark))}}})),r.forEach((function(s){return n.step(s)})),o.forEach((function(s){return n.step(s)})),this},Un.prototype.removeMark=function(t,e,mark){var n=this;void 0===mark&&(mark=null);var r=[],o=0;return this.doc.nodesBetween(t,e,(function(n,c){if(n.isInline){o++;var f=null;if(mark instanceof l.MarkType){var h=mark.isInSet(n.marks);h&&(f=[h])}else mark?mark.isInSet(n.marks)&&(f=[mark]):f=n.marks;if(f&&f.length)for(var d=Math.min(c+n.nodeSize,e),i=0;i<f.length;i++){for(var style=f[i],m=void 0,v=0;v<r.length;v++){var y=r[v];y.step==o-1&&style.eq(r[v].style)&&(m=y)}m?(m.to=d,m.step=o):r.push({style:style,from:Math.max(c,t),to:d,step:o})}}})),r.forEach((function(t){return n.step(new Zn(t.from,t.to,t.style))})),this},Un.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var r=this.doc.nodeAt(t),o=[],c=t+1,i=0;i<r.childCount;i++){var f=r.child(i),h=c+f.nodeSize,d=n.matchType(f.type,f.attrs);if(d){n=d;for(var m=0;m<f.marks.length;m++)e.allowsMarkType(f.marks[m].type)||this.step(new Zn(c,h,f.marks[m]))}else o.push(new Wn(c,h,l.Slice.empty));c=h}if(!n.validEnd){var v=n.fillBefore(l.Fragment.empty,!0);this.replace(c,c,new l.Slice(v,0,0))}for(var y=o.length-1;y>=0;y--)this.step(o[y]);return this},Un.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=l.Slice.empty);var r=Qn(this.doc,t,e,n);return r&&this.step(r),this},Un.prototype.replaceWith=function(t,e,content){return this.replace(t,e,new l.Slice(l.Fragment.from(content),0,0))},Un.prototype.delete=function(t,e){return this.replace(t,e,l.Slice.empty)},Un.prototype.insert=function(t,content){return this.replaceWith(t,t,content)};var or=function(t){this.open=[];for(var e=0;e<=t.depth;e++){var n=t.node(e),r=n.contentMatchAt(t.indexAfter(e));this.open.push({parent:n,match:r,content:l.Fragment.empty,wrapper:!1,openEnd:0,depth:e})}this.placed=[]};function ir(t,e,n){var content=t.content;if(e>1){var r=ir(t.firstChild,e-1,1==t.childCount?n-1:0);content=t.content.replaceChild(0,r)}var o=t.type.contentMatch.fillBefore(content,0==n);return t.copy(o.append(content))}function sr(t,e,n,r,o){if(e<n){var c=t.firstChild;t=t.replaceChild(0,c.copy(sr(c.content,e+1,n,r,c)))}if(e>r){var f=o.contentMatchAt(0),h=f.fillBefore(t).append(t);t=h.append(f.matchFragment(h).fillBefore(l.Fragment.empty,!0))}return t}function ar(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;o==e.start(r)&&n.push(r)}return n}or.prototype.placeSlice=function(t,e,n,r,o){if(e>0){var c=t.firstChild,f=this.placeSlice(c.content,Math.max(0,e-1),n&&1==t.childCount?n-1:0,r,c);f.content!=c.content&&(f.content.size?(t=t.replaceChild(0,c.copy(f.content)),e=f.openStart+1):(1==t.childCount&&(n=0),t=t.cutByIndex(1),e=0))}var h=this.placeContent(t,e,n,r,o);if(r>2&&h.size&&0==e){var d=h.content.firstChild,m=1==h.content.childCount;this.placeContent(d.content,0,n&&m?n-1:0,r,d),h=m?l.Fragment.empty:new l.Slice(h.content.cutByIndex(1),0,n)}return h},or.prototype.placeContent=function(t,e,n,r,o){for(var i=0;i<t.childCount;i++){for(var c=t.child(i),f=!1,h=i==t.childCount-1,d=this.open.length-1;d>=0;d--){var m=this.open[d],v=void 0;if(r>1&&(v=m.match.findWrapping(c.type))&&(!o||!v.length||v[v.length-1]!=o.type)){for(;this.open.length-1>d;)this.closeNode();for(var y=0;y<v.length;y++)m.match=m.match.matchType(v[y]),d++,m={parent:v[y].create(),match:v[y].contentMatch,content:l.Fragment.empty,wrapper:!0,openEnd:0,depth:d+y},this.open.push(m)}var w=m.match.matchType(c.type);if(!w){var C=m.match.fillBefore(l.Fragment.from(c));if(!C){if(o&&m.match.matchType(o.type))break;continue}for(var S=0;S<C.childCount;S++){var k=C.child(S);this.addNode(m,k,0),w=m.match.matchFragment(k)}}for(;this.open.length-1>d;)this.closeNode();c=c.mark(m.parent.type.allowedMarks(c.marks)),e&&(c=ir(c,e,h?n:0),e=0),this.addNode(m,c,h?n:0),m.match=w,h&&(n=0),f=!0;break}if(!f)break}return this.open.length>1&&(i>0&&i==t.childCount||o&&this.open[this.open.length-1].parent.type==o.type)&&this.closeNode(),new l.Slice(t.cutByIndex(i),e,n)},or.prototype.addNode=function(t,e,n){var r,o;t.content=(r=t.content,o=t.openEnd,o?r.replaceChild(r.childCount-1,function t(e,n){var content=e.content;if(n>1){var r=t(e.lastChild,n-1);content=e.content.replaceChild(e.childCount-1,r)}var o=e.contentMatchAt(e.childCount).fillBefore(l.Fragment.empty,!0);return e.copy(content.append(o))}(r.lastChild,o)):r).addToEnd(e),t.openEnd=n},or.prototype.closeNode=function(){var t=this.open.pop();0==t.content.size||(t.wrapper?this.addNode(this.open[this.open.length-1],t.parent.copy(t.content),t.openEnd+1):this.placed[t.depth]={depth:t.depth,content:t.content,openEnd:t.openEnd})},Un.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var r=this.doc.resolve(t),o=this.doc.resolve(e);if(rr(r,o,n))return this.step(new Wn(t,e,n));var c=ar(r,this.doc.resolve(e));0==c[c.length-1]&&c.pop();var f=-(r.depth+1);c.unshift(f);for(var h=r.depth,d=r.pos-1;h>0;h--,d--){var m=r.node(h).type.spec;if(m.defining||m.isolating)break;c.indexOf(h)>-1?f=h:r.before(h)==d&&c.splice(1,0,-h)}for(var v=c.indexOf(f),y=[],w=n.openStart,content=n.content,i=0;;i++){var C=content.firstChild;if(y.push(C),i==n.openStart)break;content=C.content}w>0&&y[w-1].type.spec.defining&&r.node(v).type!=y[w-1].type?w-=1:w>=2&&y[w-1].isTextblock&&y[w-2].type.spec.defining&&r.node(v).type!=y[w-2].type&&(w-=2);for(var S=n.openStart;S>=0;S--){var k=(S+w+1)%(n.openStart+1),x=y[k];if(x)for(var E=0;E<c.length;E++){var O=c[(E+v)%c.length],M=!0;O<0&&(M=!1,O=-O);var A=r.node(O-1),N=r.index(O-1);if(A.canReplaceWith(N,N,x.type,x.marks))return this.replace(r.before(O),M?o.after(O):e,new l.Slice(sr(n.content,0,n.openStart,k),k,n.openEnd))}}for(var T=this.steps.length,R=c.length-1;R>=0&&(this.replace(t,e,n),!(this.steps.length>T));R--){var D=c[R];R<0||(t=r.before(D),e=o.after(D))}return this},Un.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var r=function(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var c=r.index(o);if(r.node(o).canReplaceWith(c,c,n))return r.before(o+1);if(c>0)return null}if(r.parentOffset==r.parent.content.size)for(var f=r.depth-1;f>=0;f--){var h=r.indexAfter(f);if(r.node(f).canReplaceWith(h,h,n))return r.after(f+1);if(h<r.node(f).childCount)return null}}(this.doc,t,n.type);null!=r&&(t=e=r)}return this.replaceRange(t,e,new l.Slice(l.Fragment.from(n),0,0))},Un.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=ar(n,r),i=0;i<o.length;i++){var c=o[i],f=i==o.length-1;if(f&&0==c||n.node(c).type.contentMatch.validEnd)return this.delete(n.start(c),r.end(c));if(c>0&&(f||n.node(c-1).canReplace(n.index(c-1),r.indexAfter(c-1))))return this.delete(n.before(c),r.after(c))}for(var h=1;h<=n.depth&&h<=r.depth;h++)if(t-n.start(h)==n.depth-h&&e>n.end(h)&&r.end(h)-e!=r.depth-h)return this.delete(n.before(h),e);return this.delete(t,e)};var cr=function(t,e,n){this.step=t,this.inverted=e,this.origin=n};var ur=function(t,e){this.version=t,this.unconfirmed=e};var pr=new h.PluginKey("collab");function fr(t){return void 0===t&&(t={}),t={version:t.version||0,clientID:null==t.clientID?Math.floor(4294967295*Math.random()):t.clientID},new h.Plugin({key:pr,state:{init:function(){return new ur(t.version,[])},apply:function(tr,t){var e=tr.getMeta(pr);return e||(tr.docChanged?new ur(t.version,t.unconfirmed.concat(function(t){for(var e=[],i=0;i<t.steps.length;i++)e.push(new cr(t.steps[i],t.steps[i].invert(t.docs[i]),t));return e}(tr))):t)}},config:t,historyPreserveItems:!0})}function lr(t,e,n,r){for(var o=pr.getState(t),c=o.version+e.length,f=pr.get(t).spec.config.clientID,l=0;l<n.length&&n[l]==f;)++l;var d=o.unconfirmed.slice(l);if(!(e=l?e.slice(l):e).length)return t.tr.setMeta(pr,new ur(c,d));var m=d.length,tr=t.tr;if(m)d=function(t,e,n){for(var i=t.length-1;i>=0;i--)n.step(t[i].inverted);for(var r=0;r<e.length;r++)n.step(e[r]);for(var o=[],c=0,f=t.length;c<t.length;c++){var h=t[c].step.map(n.mapping.slice(f));f--,h&&!n.maybeStep(h).failed&&(n.mapping.setMirror(f,n.steps.length-1),o.push(new cr(h,h.invert(n.docs[n.docs.length-1]),t[c].origin)))}return o}(d,e,tr);else{for(var i=0;i<e.length;i++)tr.step(e[i]);d=[]}var v=new ur(c,d);return r&&r.mapSelectionBackward&&t.selection instanceof h.TextSelection&&(tr.setSelection(h.TextSelection.between(tr.doc.resolve(tr.mapping.map(t.selection.anchor,-1)),tr.doc.resolve(tr.mapping.map(t.selection.head,-1)),-1)),tr.updated&=-2),tr.setMeta("rebased",m).setMeta("addToHistory",!1).setMeta(pr,v)}var dr=function(){};dr.prototype.append=function(t){return t.length?(t=dr.from(t),!this.length&&t||t.length<200&&this.leafAppend(t)||this.length<200&&t.leafPrepend(this)||this.appendInner(t)):this},dr.prototype.prepend=function(t){return t.length?dr.from(t).append(this):this},dr.prototype.appendInner=function(t){return new gr(this,t)},dr.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?dr.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},dr.prototype.get=function(i){if(!(i<0||i>=this.length))return this.getInner(i)},dr.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},dr.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,i){return r.push(t(e,i))}),e,n),r},dr.from=function(t){return t instanceof dr?t:t&&t.length?new mr(t):dr.empty};var mr=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(t,e,n,r){for(var i=e;i<n;i++)if(!1===t(this.values[i],r+i))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var i=e-1;i>=n;i--)if(!1===t(this.values[i],r+i))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=200)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=200)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(dr);dr.empty=new mr([]);var gr=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var o=this.left.length;return!(e<o&&!1===this.left.forEachInner(t,e,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(t,Math.max(e-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var o=this.left.length;return!(e>o&&!1===this.right.forEachInvertedInner(t,e-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(t,Math.min(e,o),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(dr),vr=dr,yr=n(183),wr=function(t,e){this.items=t,this.eventCount=e};wr.prototype.popEvent=function(t,e){var n=this;if(0==this.eventCount)return null;for(var r,o,c=this.items.length;;c--){if(this.items.get(c-1).selection){--c;break}}e&&(r=this.remapping(c,this.items.length),o=r.maps.length);var f,h,l=t.tr,d=[],m=[];return this.items.forEach((function(t,i){if(!t.step)return r||(r=n.remapping(c,i+1),o=r.maps.length),o--,void m.push(t);if(r){m.push(new Cr(t.map));var map,e=t.step.map(r.slice(o));e&&l.maybeStep(e).doc&&(map=l.mapping.maps[l.mapping.maps.length-1],d.push(new Cr(map,null,null,d.length+m.length))),o--,map&&r.appendMap(map,o)}else l.maybeStep(t.step);return t.selection?(f=r?t.selection.map(r.slice(o)):t.selection,h=new wr(n.items.slice(0,c).append(m.reverse().concat(d)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:h,transform:l,selection:f}},wr.prototype.addTransform=function(t,e,n,r){for(var o=[],c=this.eventCount,f=this.items,h=!r&&f.length?f.get(f.length-1):null,i=0;i<t.steps.length;i++){var l,d=t.steps[i].invert(t.docs[i]),m=new Cr(t.mapping.maps[i],d,e);(l=h&&h.merge(m))&&(m=l,i?o.pop():f=f.slice(0,f.length-1)),o.push(m),e&&(c++,e=null),r||(h=m)}var v,y,w,C=c-n.depth;return C>kr&&(y=C,(v=f).forEach((function(t,i){if(t.selection&&0==y--)return w=i,!1})),f=v.slice(w),c-=C),new wr(f.append(o),c)},wr.prototype.remapping=function(t,e){var n=new yr.a;return this.items.forEach((function(e,i){var r=null!=e.mirrorOffset&&i-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:null;n.appendMap(e.map,r)}),t,e),n},wr.prototype.addMaps=function(t){return 0==this.eventCount?this:new wr(this.items.append(t.map((function(map){return new Cr(map)}))),this.eventCount)},wr.prototype.rebased=function(t,e){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-e),o=t.mapping,c=t.steps.length,f=this.eventCount;this.items.forEach((function(t){t.selection&&f--}),r);var h=e;this.items.forEach((function(e){var r=o.getMirror(--h);if(null!=r){c=Math.min(c,r);var map=o.maps[r];if(e.step){var l=t.steps[r].invert(t.docs[r]),d=e.selection&&e.selection.map(o.slice(h+1,r));d&&f++,n.push(new Cr(map,l,d))}else n.push(new Cr(map))}}),r);for(var l=[],i=e;i<c;i++)l.push(new Cr(o.maps[i]));var d=this.items.slice(0,r).append(l).append(n),m=new wr(d,f);return m.emptyItemCount()>500&&(m=m.compress(this.items.length-n.length)),m},wr.prototype.emptyItemCount=function(){var t=0;return this.items.forEach((function(e){e.step||t++})),t},wr.prototype.compress=function(t){void 0===t&&(t=this.items.length);var e=this.remapping(0,t),n=e.maps.length,r=[],o=0;return this.items.forEach((function(c,i){if(i>=t)r.push(c),c.selection&&o++;else if(c.step){var f=c.step.map(e.slice(n)),map=f&&f.getMap();if(n--,map&&e.appendMap(map,n),f){var h=c.selection&&c.selection.map(e.slice(n));h&&o++;var l,d=new Cr(map.invert(),f,h),m=r.length-1;(l=r.length&&r[m].merge(d))?r[m]=l:r.push(d)}}else c.map&&n--}),this.items.length,0),new wr(vr.from(r.reverse()),o)},wr.empty=new wr(vr.empty,0);var Cr=function(map,t,e,n){this.map=map,this.step=t,this.selection=e,this.mirrorOffset=n};Cr.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new Cr(e.getMap().invert(),e,this.selection)}};var Sr=function(t,e,n,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r},kr=20;function xr(map){var t=[];return map.forEach((function(e,n,r,o){return t.push(r,o)})),t}function Er(t,e){if(!t)return null;for(var n=[],i=0;i<t.length;i+=2){var r=e.map(t[i],1),o=e.map(t[i+1],-1);r<=o&&n.push(r,o)}return n}function Or(t,e,n,r){var o=Nr(e),c=Tr.get(e).spec.config,f=(r?t.undone:t.done).popEvent(e,o);if(f){var h=f.selection.resolve(f.transform.doc),l=(r?t.done:t.undone).addTransform(f.transform,e.selection.getBookmark(),c,o),d=new Sr(r?l:f.remaining,r?f.remaining:l,null,0);n(f.transform.setSelection(h).setMeta(Tr,{redo:r,historyState:d}).scrollIntoView())}}var Mr=!1,Ar=null;function Nr(t){var e=t.plugins;if(Ar!=e){Mr=!1,Ar=e;for(var i=0;i<e.length;i++)if(e[i].spec.historyPreserveItems){Mr=!0;break}}return Mr}var Tr=new h.PluginKey("history"),Rr=new h.PluginKey("closeHistory");function Dr(t){return t={depth:t&&t.depth||100,newGroupDelay:t&&t.newGroupDelay||500},new h.Plugin({key:Tr,state:{init:function(){return new Sr(wr.empty,wr.empty,null,0)},apply:function(tr,e,n){return function(t,e,tr,n){var r,o=tr.getMeta(Tr);if(o)return o.historyState;tr.getMeta(Rr)&&(t=new Sr(t.done,t.undone,null,0));var c=tr.getMeta("appendedTransaction");if(0==tr.steps.length)return t;if(c&&c.getMeta(Tr))return c.getMeta(Tr).redo?new Sr(t.done.addTransform(tr,null,n,Nr(e)),t.undone,xr(tr.mapping.maps[tr.steps.length-1]),t.prevTime):new Sr(t.done,t.undone.addTransform(tr,null,n,Nr(e)),null,t.prevTime);if(!1===tr.getMeta("addToHistory")||c&&!1===c.getMeta("addToHistory"))return(r=tr.getMeta("rebased"))?new Sr(t.done.rebased(tr,r),t.undone.rebased(tr,r),Er(t.prevRanges,tr.mapping),t.prevTime):new Sr(t.done.addMaps(tr.mapping.maps),t.undone.addMaps(tr.mapping.maps),Er(t.prevRanges,tr.mapping),t.prevTime);var f=0==t.prevTime||!c&&(t.prevTime<(tr.time||0)-n.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;var n=!1;return t.mapping.maps[0].forEach((function(t,r){for(var i=0;i<e.length;i+=2)t<=e[i+1]&&r>=e[i]&&(n=!0)})),n}(tr,t.prevRanges)),h=c?Er(t.prevRanges,tr.mapping):xr(tr.mapping.maps[tr.steps.length-1]);return new Sr(t.done.addTransform(tr,f?e.selection.getBookmark():null,n,Nr(e)),wr.empty,h,tr.time)}(e,n,tr,t)}},config:t})}function Fr(t,e){var n=Tr.getState(t);return!(!n||0==n.done.eventCount)&&(e&&Or(n,t,e,!1),!0)}function Br(t,e){var n=Tr.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&Or(n,t,e,!0),!0)}function _r(t){var e=Tr.getState(t);return e?e.done.eventCount:0}function Pr(t){var e=Tr.getState(t);return e?e.undone.eventCount:0}function Ir(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lr(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function jr(t,e,n){return e&&Lr(t.prototype,e),n&&Lr(t,n),t}function zr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ur(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function qr(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Ur(Object(source),!0).forEach((function(e){zr(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Ur(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function Vr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jr(t,e)}function $r(t){return($r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jr(t,p){return(Jr=Object.setPrototypeOf||function(t,p){return t.__proto__=p,t})(t,p)}function Hr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Wr(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kr(t){return function(){var e,n=$r(t);if(Hr()){var r=$r(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Wr(this,e)}}function Yr(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],n=!0,r=!1,o=void 0;try{for(var c,f=t[Symbol.iterator]();!(n=(c=f.next()).done)&&(e.push(c.value),!i||e.length!==i);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==f.return||f.return()}finally{if(r)throw o}}return e}(t,i)||Gr(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xr(t){return function(t){if(Array.isArray(t))return Zr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Gr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gr(t,e){if(t){if("string"==typeof t)return Zr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zr(t,e):void 0}}function Zr(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}r.e,r.e,r.e;function Qr(t){var e=t.doc,n=t.name,r=[],o=Object(Rn.findBlockNodes)(e).filter((function(t){return t.node.type.name===n}));return o.forEach((function(t){var e=t.pos+1;(function t(e){return e.reduce((function(a,b){return a.concat(Array.isArray(b)?t(b):b)}),[])})(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.map((function(e){var r=[].concat(Xr(n),Xr(e.properties?e.properties.className:[]));return e.children?t(e.children,r):{text:e.value,classes:r}}))}(f.a.highlightAuto(t.node.textContent).value)).map((function(t){var n=e,r=n+t.text.length;return e=r,qr({},t,{from:n,to:r})})).forEach((function(t){var e=un.inline(t.from,t.to,{class:t.classes.join(" ")});r.push(e)}))})),ln.create(e,r)}r.e;var to=function(t){Vr(n,t);var e=Kr(n);function n(){return Ir(this,n),e.apply(this,arguments)}return jr(n,[{key:"keys",value:function(t){var e=t.type,n=Object(o.a)(o.b,(function(t,n){return n(t.tr.replaceSelectionWith(e.create()).scrollIntoView()),!0}));return{"Mod-Enter":n,"Shift-Enter":n}}},{key:"name",get:function(){return"hard_break"}},{key:"schema",get:function(){return{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}}}]),n}(r.e),eo=function(t){Vr(n,t);var e=Kr(n);function n(){return Ir(this,n),e.apply(this,arguments)}return jr(n,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(t){return Object(o.p)(e,n.nodes.paragraph,t)}}},{key:"keys",value:function(t){var e=t.type;return this.options.levels.reduce((function(t,n){return qr({},t,{},zr({},"Shift-Ctrl-".concat(n),Object(o.k)(e,{level:n})))}),{})}},{key:"inputRules",value:function(t){var e=t.type;return this.options.levels.map((function(t){return Object(o.o)(new RegExp("^(#{1,".concat(t,"})\\s$")),e,(function(){return{level:t}}))}))}},{key:"name",get:function(){return"heading"}},{key:"defaultOptions",get:function(){return{levels:[1,2,3,4,5,6]}}},{key:"schema",get:function(){return{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:this.options.levels.map((function(t){return{tag:"h".concat(t),attrs:{level:t}}})),toDOM:function(t){return["h".concat(t.attrs.level),0]}}}}]),n}(r.e),no=(r.e,/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/);r.e,r.e;function ro(t){var e=t.matcher,n=void 0===e?{char:"@",allowSpaces:!1,startOfLine:!1}:e,r=t.appendText,c=void 0===r?null:r,f=t.suggestionClass,l=void 0===f?"suggestion":f,d=t.command,m=void 0===d?function(){return!1}:d,v=t.items,y=void 0===v?[]:v,w=t.onEnter,C=void 0===w?function(){return!1}:w,S=t.onChange,k=void 0===S?function(){return!1}:S,x=t.onExit,E=void 0===x?function(){return!1}:x,O=t.onKeyDown,M=void 0===O?function(){return!1}:O,A=t.onFilter,N=void 0===A?function(t,e){return e?t.filter((function(t){return JSON.stringify(t).toLowerCase().includes(e.toLowerCase())})):t}:A;return new h.Plugin({key:new h.PluginKey("suggestions"),view:function(){var t=this;return{update:function(view,e){var n=t.key.getState(e),r=t.key.getState(view.state),f=n.active&&r.active&&n.range.from!==r.range.from,h=!n.active&&r.active,l=n.active&&!r.active,d=h||f,v=!h&&!l&&n.query!==r.query&&!f,w=l||f;if(d||v||w){var S=w?n:r,x=document.querySelector('[data-decoration-id="'.concat(S.decorationId,'"]')),O=x?{getBoundingClientRect:function(){return x.getBoundingClientRect()},clientWidth:x.clientWidth,clientHeight:x.clientHeight}:null,M={view:view,range:S.range,query:S.query,text:S.text,decorationNode:x,virtualNode:O,items:N(Array.isArray(y)?y:y(),S.query),command:function(t){var e=t.range,n=t.attrs;m({range:e,attrs:n,schema:view.state.schema})(view.state,view.dispatch,view),c&&Object(o.c)(c)(view.state,view.dispatch,view)}};w&&E(M),v&&k(M),d&&C(M)}}}},state:{init:function(){return{active:!1,range:{},query:null,text:null}},apply:function(tr,t){var e,r,o,c,f,h,l,d=tr.selection,m=qr({},t);if(d.from===d.to){(d.from<t.range.from||d.from>t.range.to)&&(m.active=!1);var v=d.$from,y=(r=(e=n).char,o=void 0===r?"@":r,c=e.allowSpaces,f=void 0!==c&&c,h=e.startOfLine,l=void 0!==h&&h,function(t){if(t.depth<=0)return!1;for(var e,n="\\".concat(o),r=new RegExp("\\s".concat(n,"$")),c=l?"^":"",h=f?new RegExp("".concat(c).concat(n,".*?(?=\\s").concat(n,"|$)"),"gm"):new RegExp("".concat(c,"(?:^)?").concat(n,"[^\\s").concat(n,"]*"),"gm"),d=t.before(),m=t.end(),text=t.doc.textBetween(d,m,"\0","\0"),v=h.exec(text);null!==v;){var y=v.input.slice(Math.max(0,v.index-1),v.index);if(/^[\s\0]?$/.test(y)){var w=v.index+t.start(),C=w+v[0].length;f&&r.test(text.slice(C-1,C+1))&&(v[0]+=" ",C+=1),w<t.pos&&C>=t.pos&&(e={range:{from:w,to:C},query:v[0].slice(o.length),text:v[0]})}v=h.exec(text)}return e})(v),w=(Math.random()+1).toString(36).substr(2,5);y?(m.active=!0,m.decorationId=t.decorationId?t.decorationId:w,m.range=y.range,m.query=y.query,m.text=y.text):m.active=!1}else m.active=!1;return m.active||(m.decorationId=null,m.range={},m.query=null,m.text=null),m}},props:{handleKeyDown:function(view,t){var e=this.getState(view.state),n=e.active,r=e.range;return!!n&&M({view:view,event:t,range:r})},decorations:function(t){var e=this.getState(t),n=e.active,r=e.range,o=e.decorationId;return n?ln.create(t.doc,[un.inline(r.from,r.to,{nodeName:"span",class:l,"data-decoration-id":o})]):null}}})}r.e,r.e;var oo=Object(Dn.tableNodes)({tableGroup:"block",cellContent:"block+",cellAttributes:{background:{default:null,getFromDOM:function(t){return t.style.backgroundColor||null},setDOMAttr:function(t,e){if(t){var style={style:"".concat(e.style||"","background-color: ").concat(t,";")};Object.assign(e,style)}}}}}),io=(r.e,r.e,r.e,r.e,r.e,r.e,function(t){Vr(n,t);var e=Kr(n);function n(){return Ir(this,n),e.apply(this,arguments)}return jr(n,[{key:"keys",value:function(t){var e=t.type;return{"Mod-b":Object(o.r)(e)}}},{key:"commands",value:function(t){var e=t.type;return function(){return Object(o.r)(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(o.e)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,e)]}},{key:"pasteRules",value:function(t){var e=t.type;return[Object(o.f)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,e)]}},{key:"name",get:function(){return"bold"}},{key:"schema",get:function(){return{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(t){return"normal"!==t.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function(){return["strong",0]}}}}]),n}(r.d)),so=function(t){Vr(n,t);var e=Kr(n);function n(){return Ir(this,n),e.apply(this,arguments)}return jr(n,[{key:"keys",value:function(t){var e=t.type;return{"Mod-`":Object(o.r)(e)}}},{key:"commands",value:function(t){var e=t.type;return function(){return Object(o.r)(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(o.e)(/(?:`)([^`]+)(?:`)$/,e)]}},{key:"pasteRules",value:function(t){var e=t.type;return[Object(o.f)(/(?:`)([^`]+)(?:`)/g,e)]}},{key:"name",get:function(){return"code"}},{key:"schema",get:function(){return{excludes:"_",parseDOM:[{tag:"code"}],toDOM:function(){return["code",0]}}}}]),n}(r.d),ao=function(t){Vr(n,t);var e=Kr(n);function n(){return Ir(this,n),e.apply(this,arguments)}return jr(n,[{key:"keys",value:function(t){var e=t.type;return{"Mod-i":Object(o.r)(e)}}},{key:"commands",value:function(t){var e=t.type;return function(){return Object(o.r)(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(o.e)(/(?:^|[^_])(_([^_]+)_)$/,e),Object(o.e)(/(?:^|[^*])(\*([^*]+)\*)$/,e)]}},{key:"pasteRules",value:function(t){var e=t.type;return[Object(o.f)(/_([^_]+)_/g,e),Object(o.f)(/\*([^*]+)\*/g,e)]}},{key:"name",get:function(){return"italic"}},{key:"schema",get:function(){return{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}}}}]),n}(r.d),co=(r.d,r.d,r.d,function(t){Vr(n,t);var e=Kr(n);function n(){return Ir(this,n),e.apply(this,arguments)}return jr(n,[{key:"init",value:function(){var t=this;this.getSendableSteps=this.debounce((function(e){var n=function(t){var e=pr.getState(t);return 0==e.unconfirmed.length?null:{version:e.version,steps:e.unconfirmed.map((function(s){return s.step})),clientID:pr.get(t).spec.config.clientID,get origins(){return this._origins||(this._origins=e.unconfirmed.map((function(s){return s.origin})))}}}(e);n&&t.options.onSendable({editor:t.editor,sendable:{version:n.version,steps:n.steps.map((function(t){return t.toJSON()})),clientID:n.clientID}})}),this.options.debounce),this.editor.on("transaction",(function(e){var n=e.state;t.getSendableSteps(n)}))}},{key:"debounce",value:function(t,e){var n;return function(){for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];n&&clearTimeout(n),n=setTimeout((function(){t.apply(void 0,o),n=null}),e)}}},{key:"name",get:function(){return"collaboration"}},{key:"defaultOptions",get:function(){var t=this;return{version:0,clientID:Math.floor(4294967295*Math.random()),debounce:250,onSendable:function(){},update:function(e){var n=e.steps,r=e.version,o=t.editor,c=o.state,view=o.view,f=o.schema;(function(t){return pr.getState(t).version})(c)>r||view.dispatch(lr(c,n.map((function(t){return Jn.fromJSON(f,t.step)})),n.map((function(t){return t.clientID}))))}}}},{key:"plugins",get:function(){return[fr({version:this.options.version,clientID:this.options.clientID})]}}]),n}(r.c)),uo=(r.c,function(t){Vr(n,t);var e=Kr(n);function n(){return Ir(this,n),e.apply(this,arguments)}return jr(n,[{key:"keys",value:function(){return{"Mod-z":Fr,"Mod-y":Br,"Shift-Mod-z":Br}}},{key:"commands",value:function(){return{undo:function(){return Fr},redo:function(){return Br},undoDepth:function(){return _r},redoDepth:function(){return Pr}}}},{key:"name",get:function(){return"history"}},{key:"defaultOptions",get:function(){return{depth:"",newGroupDelay:""}}},{key:"plugins",get:function(){return[Dr({depth:this.options.depth,newGroupDelay:this.options.newGroupDelay})]}}]),n}(r.c));r.c,r.c,r.c}}]);